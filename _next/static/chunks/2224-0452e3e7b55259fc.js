"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2224,7595],{52224:function(e,a,l){var r=l(85893),n=l(67294),t=l(60990),s=l(96788),i=l(51015),o=l(44723),c=l(60762),d=l(71919),p=l(97182),h=l(25026),u=l(93454),b=l(76592),C=l(70360),x=l(46577),m=l(8863),y=l(19827),f=l(13539),Z=l(52857),g=l(33453),j=l(92365),w=l(40110),v=l(26541),A=l(96727),S=l(53839),k=l(17071),P=l(89090),D=l(77595);a.Z=function(){let[e,a]=(0,n.useState)([]),[l,N]=(0,n.useState)(!0),[E,R]=(0,n.useState)(""),[T,O]=(0,n.useState)(""),[F,L]=(0,n.useState)(!1),[q,I]=(0,n.useState)(null),[_,z]=(0,n.useState)({name:"",label:"",enabled:!0});(0,n.useEffect)(()=>{M()},[]);let M=async()=>{try{N(!0);let e=await (0,D.Rd)();a(e),R("")}catch(e){R("Failed to load crops: "+e.message)}finally{N(!1)}},U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(I(e),z({name:e.name,label:e.label,enabled:e.enabled})):(I(null),z({name:"",label:"",enabled:!0})),L(!0)},W=()=>{L(!1),I(null),z({name:"",label:"",enabled:!0})},H=async()=>{try{if(R(""),O(""),!_.name||!_.label){R("Name and Label are required");return}q?(await (0,D.Ak)(q.id,_),O("Crop updated successfully")):(await (0,D.e)(_),O("Crop added successfully")),await M(),W()}catch(e){R("Failed to save crop: "+e.message)}},B=async e=>{try{R(""),await (0,D.Ak)(e.id,{enabled:!e.enabled}),await M(),O("Crop ".concat(e.enabled?"disabled":"enabled"," successfully"))}catch(e){R("Failed to update crop: "+e.message)}},G=async e=>{if(confirm('Are you sure you want to delete "'.concat(e.label,'"?')))try{R(""),await (0,D.aD)(e.id),await M(),O("Crop deleted successfully")}catch(e){R("Failed to delete crop: "+e.message)}};return(0,r.jsxs)(t.Z,{sx:{p:3},children:[(0,r.jsxs)(t.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,r.jsx)(s.Z,{variant:"h4",children:"Crops Management"}),(0,r.jsx)(i.Z,{variant:"contained",color:"primary",startIcon:(0,r.jsx)(S.Z,{}),onClick:()=>U(),children:"Add New Crop"})]}),E&&(0,r.jsx)(o.Z,{severity:"error",sx:{mb:2},onClose:()=>R(""),children:E}),T&&(0,r.jsx)(o.Z,{severity:"success",sx:{mb:2},onClose:()=>O(""),children:T}),(0,r.jsx)(c.Z,{children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(s.Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Manage crops available in the system. Only enabled crops will appear in dropdowns throughout the application."}),l?(0,r.jsx)(t.Z,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,r.jsx)(p.Z,{})}):(0,r.jsx)(h.Z,{component:u.Z,children:(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(C.Z,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(m.Z,{children:"Name"}),(0,r.jsx)(m.Z,{children:"Label"}),(0,r.jsx)(m.Z,{children:"Status"}),(0,r.jsx)(m.Z,{align:"right",children:"Actions"})]})}),(0,r.jsx)(y.Z,{children:e.map(e=>(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(m.Z,{children:e.name}),(0,r.jsx)(m.Z,{children:e.label}),(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(f.Z,{checked:e.enabled,onChange:()=>B(e),color:"primary"}),e.enabled?"Enabled":"Disabled"]}),(0,r.jsxs)(m.Z,{align:"right",children:[(0,r.jsx)(Z.Z,{color:"primary",onClick:()=>U(e),size:"small",children:(0,r.jsx)(k.Z,{})}),(0,r.jsx)(Z.Z,{color:"error",onClick:()=>G(e),size:"small",children:(0,r.jsx)(P.Z,{})})]})]},e.id))})]})})]})}),(0,r.jsxs)(g.Z,{open:F,onClose:W,maxWidth:"sm",fullWidth:!0,children:[(0,r.jsx)(j.Z,{children:q?"Edit Crop":"Add New Crop"}),(0,r.jsx)(w.Z,{children:(0,r.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,r.jsx)(v.Z,{label:"Crop Name",value:_.name,onChange:e=>z({..._,name:e.target.value}),disabled:!!q,required:!0,helperText:"Unique identifier (e.g., Rice, Corn)"}),(0,r.jsx)(v.Z,{label:"Display Label",value:_.label,onChange:e=>z({..._,label:e.target.value}),required:!0,helperText:"Human-readable label shown in dropdowns"}),(0,r.jsxs)(t.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(f.Z,{checked:_.enabled,onChange:e=>z({..._,enabled:e.target.checked}),color:"primary"}),(0,r.jsx)(s.Z,{children:"Enabled"})]})]})}),(0,r.jsxs)(A.Z,{children:[(0,r.jsx)(i.Z,{onClick:W,children:"Cancel"}),(0,r.jsx)(i.Z,{onClick:H,variant:"contained",color:"primary",children:q?"Update":"Add"})]})]})]})}},77595:function(e,a,l){l.d(a,{e:function(){return c},aD:function(){return p},Rd:function(){return o},getCrops:function(){return i},Ak:function(){return d}});var r=l(96171);let n={CONSTANTS:"constants",CROPS:"crops"};class t extends r.Z{async getCrops(){try{let e=await this.getDocumentData(n.CONSTANTS,n.CROPS);if(null==e?void 0:e.crops)return e.crops.filter(e=>!1!==e.enabled);return this.getDefaultCrops()}catch(e){return console.error("Error fetching crops:",e),this.getDefaultCrops()}}async getAllCrops(){try{let e=await this.getDocumentData(n.CONSTANTS,n.CROPS);if(null==e?void 0:e.crops)return e.crops;return this.getDefaultCrops()}catch(e){return console.error("Error fetching all crops:",e),this.getDefaultCrops()}}async updateCrops(e){try{let a=this.doc(this.db,n.CONSTANTS,n.CROPS);await this.updateDoc(a,{crops:e})}catch(e){throw console.error("Error updating crops:",e),e}}async addCrop(e){try{let a=await this.getAllCrops(),l={id:e.name,name:e.name,label:e.label||e.name,enabled:!1!==e.enabled};a.push(l),await this.updateCrops(a)}catch(e){throw console.error("Error adding crop:",e),e}}async updateCrop(e,a){try{let l=await this.getAllCrops(),r=l.findIndex(a=>a.id===e);-1!==r&&(l[r]={...l[r],...a},await this.updateCrops(l))}catch(e){throw console.error("Error updating crop:",e),e}}async deleteCrop(e){try{let a=(await this.getAllCrops()).filter(a=>a.id!==e);await this.updateCrops(a)}catch(e){throw console.error("Error deleting crop:",e),e}}getDefaultCrops(){return[{id:"Rice",name:"Rice",label:"Rice",enabled:!0},{id:"Corn",name:"Corn",label:"Corn",enabled:!0},{id:"Pili",name:"Pili",label:"Pili",enabled:!1},{id:"Ampalaya",name:"Ampalaya",label:"Ampalaya",enabled:!1},{id:"PoleSitao",name:"PoleSitao",label:"Pole Sitao",enabled:!1},{id:"Cassava",name:"Cassava",label:"Cassava",enabled:!1},{id:"Coconut",name:"Coconut",label:"Coconut",enabled:!1},{id:"Pineapple",name:"Pineapple",label:"Pineapple",enabled:!1},{id:"Abaca",name:"Abaca",label:"Abaca",enabled:!1},{id:"Cut-flowers",name:"Cut-flowers",label:"Cut Flowers",enabled:!1},{id:"Livestock",name:"Livestock",label:"Livestock",enabled:!1},{id:"Poultry",name:"Poultry",label:"Poultry",enabled:!1},{id:"Fisheries",name:"Fisheries (brackish and freshwater)",label:"Fisheries (brackish and freshwater)",enabled:!1}]}}let s=new t,i=()=>s.getCrops(),o=()=>s.getAllCrops(),c=e=>s.addCrop(e),d=(e,a)=>s.updateCrop(e,a),p=e=>s.deleteCrop(e)}}]);