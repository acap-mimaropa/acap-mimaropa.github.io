"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9503],{31292:function(e,t){t.Z={tablecontainer:{marginTop:e=>e.spacing(1),border:e=>"1px solid ".concat(e.palette.bacap.border),borderRadius:e=>e.spacing(1),boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},table:{"& td":{border:e=>"1px solid ".concat(e.palette.bacap.border)}},headerMonths:{textAlign:"center",borderBottom:"none",borderLeft:e=>"1px solid ".concat(e.palette.bacap.border)},headerSub:{width:"5%",borderLeft:e=>"1px solid ".concat(e.palette.bacap.border)},tablecell:{border:"1px solid",textAlign:"center"},subheader:{marginBottom:e=>e.spacing(3),maxWidth:"800px",color:"gray","& a":{textDecoration:"none",color:e=>e.palette.green.dark},"& a:hover":{textDecoration:"underline"},"& a:visited":{color:e=>e.palette.green.dark}},labels:{fontSize:"12px",color:e=>e.palette.secondary.light},legend:{margin:e=>e.spacing(1),fontSize:"14px",display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"baseline"},"& ul":{listStyle:"none","& li":{marginRight:"10px"},span:{border:"1px solid #ccc",float:"left",width:"12px",height:"12px",margin:"4px"}},"& .wb_normal":{backgroundColor:"red",color:"#fff"},"& .b_normal":{backgroundColor:"yellow"},"& .near_normal":{backgroundColor:"#00c300"},"& .above_normal":{backgroundColor:"blue",color:"#fff"}},tableRowHeader:{"& th, td":{fontSize:"11px",textAlign:"center",lineHeight:e=>e.spacing(2),padding:"2px",fontWeight:500,borderTop:"none"},"& td":{border:"none"},"& td:nth-child(3n)":{borderRight:"1px solid rgb(226, 232, 240)"},"& td:last-child":{borderRight:"none"},"& td:first-child":{borderLeft:"1px solid rgb(226, 232, 240)"}},cellData:{"& td:first-child":{fontSize:"12px",textAlign:"left",borderLeft:"none",padding:"6px 16px 6px 16px"},"& td:last-child":{borderRight:"none"},"& td":{fontSize:"11px",textAlign:"center",padding:"10px",color:"rgba(0, 0, 0, 0.87)",border:"1px solid rgb(226, 232, 240)"}}}},83993:function(e,t,a){var r=a(85893),n=a(67294),o=a(9473),s=a(11163),i=a(60990),c=a(76592),l=a(19827),d=a(8863),u=a(25026),p=a(70360),h=a(46577),x=a(42823),f=a(57744),g=a(98813),b=a(25517),m=a(15440),S=a(32209),v=a(77457),y=a(31292);let w={updated_by:"-",date_created:"",monthLabels:[]};t.Z=function(e){let{withBorder:t=!1,weatherData:a=null,fsLoading:A=null}=e,[_,j]=(0,n.useState)(w),[E,Z]=(0,n.useState)(!1),R=(0,n.useRef)(!1),D=(0,s.useRouter)(),L=(0,o.I0)();(0,n.useEffect)(()=>(R.current=!0,()=>{R.current=!1}),[]);let{ids:C,status:O,entities:k}=(0,o.v9)(e=>e.seasonalweather),P=null!==a,T=P?A:O,I=P?a.map((e,t)=>t):C,N=P?a.reduce((e,t,a)=>({...e,[a]:t}),{}):k;(0,n.useEffect)(()=>{P?Z(!0):L((0,m.Y)()).unwrap().then(()=>{R.current&&Z(!0)})},[L,P]),(0,n.useEffect)(()=>{if(P?I.length>0&&E:T===b.G.FULLFILLED&&I.length>0&&E){let e=N[I[0]];R.current&&e&&j(t=>{var a,r;return{...t,updated_by:"/admin/weather"===D.pathname?e.updated_by:"an admin",update_method:e.update_method,date_created:e.date_created,monthLabels:(null===(a=e.months)||void 0===a?void 0:a.map(e=>"".concat(e.mo.charAt(0).toUpperCase()).concat(e.mo.slice(1)," ").concat(e.year)))||(null===(r=e.mos)||void 0===r?void 0:r.map((t,a)=>{var r;return"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)," ").concat((null===(r=e.years)||void 0===r?void 0:r[a])||"")}))||[]}})}},[N,T,I,D.pathname,E,P]);let F=e=>e===g.nQ?g.tN[g.DD]:"none";return(0,r.jsx)("div",{children:T===b.G.PENDING||!0===T?(0,r.jsx)(f.Z,{rows:7,cols:7}):I.length>0?(0,r.jsxs)(e=>{let{children:a}=e;return t?(0,r.jsx)(u.Z,{sx:y.Z.tablecontainer,children:a}):(0,r.jsx)(u.Z,{children:a})},{sx:{width:"650px"},children:[(0,r.jsxs)(c.Z,{"aria-label":"simple table",size:"small",sx:y.Z.table,children:[(0,r.jsxs)(p.Z,{children:[(0,r.jsxs)(h.Z,{sx:y.Z.tableRowHeader,children:[(0,r.jsx)(d.Z,{sx:{width:"15%"},rowSpan:2,children:"Province"}),_.monthLabels.map((e,t)=>(0,r.jsx)(d.Z,{sx:y.Z.headerMonths,colSpan:3,children:e},"".concat(e,"-").concat(t)))]}),(0,r.jsx)(h.Z,{sx:y.Z.tableRowHeader,children:[...Array(3*_.monthLabels.length)].fill("").map((e,t)=>{let a=t+1;return 1===a||a%3==1?(0,r.jsx)("td",{children:"Normal (mm)"},a):a%3==2?(0,r.jsx)("td",{children:"Forecast (mm)"},a):a%3==0?(0,r.jsx)("td",{children:"% of Normal"},a):void 0})})]}),(0,r.jsx)(l.Z,{children:Object.values(N).map(e=>(0,r.jsxs)(h.Z,{sx:y.Z.cellData,children:[(0,r.jsx)(d.Z,{children:e.name}),[...Array(3*_.monthLabels.length)].fill("").map((t,a)=>{let n=a+1;if(1===n)return(0,r.jsx)("td",{style:{backgroundColor:F(e.months[a].normal)},children:(0,v.aS)(e.months[0].normal)},a);if(n%3==1)return(0,r.jsx)("td",{style:{backgroundColor:F(e.months[a/3].normal)},children:(0,v.aS)(e.months[a/3].normal)},a);if(n%3==2){let t=(n+1)/3;return(0,r.jsx)("td",{style:{backgroundColor:F(e.months[t-1].mean)},children:(0,v.aS)(e.months[t-1].mean)},a)}if(n%3==0){let t=n/3-1;return(0,r.jsx)(d.Z,{sx:{backgroundColor:g.tN[e.months[t].con],textAlign:"center",color:["above_normal","wb_normal"].includes(e.months[t].con)?"#fff !important":"#000"},children:(0,v.aS)(e.months[t].val)},a)}})]},e.name))})]}),(0,r.jsxs)(i.Z,{sx:y.Z.legend,children:[_.update_method===g.o7.EXCEL?(0,r.jsxs)(S.Z,{children:["Updated via file upload of PAGASA's shared seasonal weather",(0,r.jsx)("br",{})," forecast excel file by ",_.updated_by," on \xa0",_.date_created,".",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Full reference is available on PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"Seasonal (Rainfall) Forecast"})," web page."]}):(0,r.jsxs)(S.Z,{children:["Encoded with reference from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"Seasonal (Rainfall) Forecast"})," web page ",(0,r.jsx)("br",{}),"by ",_.updated_by," on \xa0",_.date_created]}),(0,r.jsx)("ul",{children:Object.values(g.MW).map(e=>(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{style:{backgroundColor:g.tN[e.label]}}),e.sync," (",e.content,")"]},e.id))})]})]}):(0,r.jsx)(x.Z,{})})}},42823:function(e,t,a){a.d(t,{Z:function(){return d}});var r=a(85893),n=a(25675),o=a.n(n),s=a(60990),i=a(96788),c=a(71604),l={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},d=function(e){let{message:t="Failed to load data",style:a={}}=e;return(0,r.jsxs)(s.Z,{sx:l,style:a,children:[(0,r.jsx)(o(),{unoptimized:!0,src:(0,c.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:c.imageLoader,alt:"Empty data"}),(0,r.jsx)(i.Z,{variant:"subtitle1",children:t})]})}},57744:function(e,t,a){a.d(t,{Z:function(){return i}});var r=a(85893),n=a(60990),o=a(84324),s={minHeight:"200px",width:"100%",border:"2px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},i=function(e){let{rows:t=3,cols:a=3}=e;return(0,r.jsx)(n.Z,{sx:s,children:Array.from(Array(t).keys()).map((e,t)=>(0,r.jsx)("div",{style:{margin:"2px",display:"flex"},children:Array.from(Array(a).keys()).map((e,t)=>(0,r.jsx)(o.Z,{animation:"wave",variant:"rectangular",height:25,sx:{margin:"3px",width:"".concat(Math.round(100/a),"%")}},"col-".concat(t)))},"row-".concat(t)))})}},56112:function(e,t,a){var r=a(85893),n=a(93454);let o=(0,a(77527).ZP)(e=>(0,r.jsx)(n.Z,{...e}))(e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:t.spacing(1),boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}});t.Z=o},7520:function(e,t,a){var r=a(85893),n=a(93454);let o=(0,a(77527).ZP)(e=>(0,r.jsx)(n.Z,{...e}))(e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:t.spacing(1),backgroundColor:"#fff",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",border:"1px solid ".concat(t.palette.bacap.border)}});t.Z=o},38660:function(e,t,a){a.d(t,{Z:function(){return o}});var r=a(67294),n=a(98037);function o(e,t){let[a,o]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[c,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,n.yZ)();o(null!=e?e:[])}catch(a){var e,t;l(null!==(t=null==a?void 0:null===(e=a.response)||void 0===e?void 0:e.data)&&void 0!==t?t:a.message),i(!1)}})()},[e,t]),{services:a,loading:s,error:c}}},18938:function(e,t,a){a.d(t,{Kx:function(){return i},ky:function(){return s},m$:function(){return c},tl:function(){return l}});var r=a(67294),n=a(36100),o=a(20988);function s(e,t){let[a,s]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0),[l,d]=(0,r.useState)(""),u=(0,r.useRef)(!0);return(0,r.useEffect)(()=>((async()=>{try{let a=(0,n.JU)(o.db,e,t),r=await (0,n.QT)(a);u.current&&(r.exists()&&s(r.data()),c(!1))}catch(e){d(e.message),c(!1)}})(),()=>u.current=!1),[e,t]),[a,i,l]}function i(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,[i,c]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[u,p]=(0,r.useState)(""),h=(0,r.useRef)(!0);return(0,r.useEffect)(()=>((async()=>{try{let r=[(0,n.Xo)(t,"asc")];s>0&&r.push((0,n.b9)(s));let i=(0,n.hJ)(o.db,e),l=a||(0,n.IO)(i,...r),u=await (0,n.PL)(l);h.current&&(c(u.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,a,s]),{documents:i,loading:l,error:u}}function c(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",[i,c]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[u,p]=(0,r.useState)(""),h=(0,r.useRef)(!0);return(0,r.useEffect)(()=>((async()=>{try{let r=(0,n.IO)((0,n.hJ)(o.db,e,t,a),(0,n.Xo)(s)),i=await (0,n.PL)(r);h.current&&(c(i.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,a,s]),{documents:i,loading:l,error:u}}function l(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,[c,l]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[p,h]=(0,r.useState)(""),x=(0,r.useRef)(!0);return(0,r.useEffect)(()=>((async()=>{try{let r=(0,n.hJ)(o.db,e,t,a);""!==s&&(r=(0,n.IO)(r,(0,n.Xo)(s))),i&&(r=(0,n.IO)(r,(0,n.b9)(i)));let c=await (0,n.PL)(r);x.current&&(l(c.docs.map(e=>({...e.data()}))),u(!1))}catch(e){h(e.message),u(!1)}})(),()=>x.current=!1),[e,t,a,s,i]),{documents:c,loading:d,error:p}}},98037:function(e,t,a){a.d(t,{Wn:function(){return c},vo:function(){return d},yZ:function(){return i},Ef:function(){return l}});var r=a(96171),n=a(36100);class o extends r.Z{constructor(...e){super(...e),this.getSupportServices=async()=>{let e=this.collection(this.db,"support_services"),t=this.query(e,(0,n.Xo)("date","asc"));return(await this.getDocs(t)).docs.map(e=>({...e.data(),docId:e.id}))},this.addSupportService=async e=>{let{supportService:t}=e,a=this.collection(this.db,"support_services");await this.addDoc(a,{data:t,date:new Date})},this.updateSupportService=async e=>{let t=this.collection(this.db,"support_services"),a=this.doc(t,e.docId);delete e.docId,await this.updateDoc(a,e)},this.deleteSupportService=async e=>{let t=this.doc(this.db,"support_services",e);await this.deleteDoc(t)}}}let s=new o,i=s.getSupportServices.bind(s),c=s.addSupportService.bind(s),l=s.updateSupportService.bind(s),d=s.deleteSupportService.bind(s)},88002:function(e,t,a){a.d(t,{K:function(){return i},d:function(){return c}});var r=a(96171),n=a(20988),o=a(98813),s=a(84325);let i={MEDIA_ASSETS:"n_page_media",ASSETS:"n_page_assets",PAGE_SEARCH:"n_page_search",GLOBAL_COLLECTIONS:"w_services",TYPHOON_ADVISORY:"typhoon_advisory",CYCLONE_ADVISORY:"cyclone_advisory"};class c extends r.Z{constructor(...e){var t;super(...e),t=this,this.getPageAssetsDoc=async function(e,a){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];try{if(!(n=await t.getDocumentData(i.ASSETS,e)))return[];if(!a)return n;if(r)return n.data.filter(e=>e.page===a);return n.data.filter(e=>e.page===a).map(e=>e.url)}catch(e){throw console.error(e.message),Error(e.message)}},this.getTyphoonAdvisory=async()=>{let e=this.doc(this.db,i.GLOBAL_COLLECTIONS,i.TYPHOON_ADVISORY),t=await this.getDoc(e);return t.exists()?t.data():null},this.getWeatherForecast=async(e,t)=>await this.getNestedCollectionData(i.WEATHER_FORECASTS,e,t,"name"),this.getPdfDownloadURL=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.Ry.SEASONAL,a="";switch(t){case s.Ry.SEASONAL:a=o.Do.PDF_STORAGE_SEASONAL;break;case s.Ry.TEN_DAY:a=o.Do.PDF_STORAGE_TENDAY;break;case s.Ry.SPECIAL_WEATHER:a=o.Do.PDF_STORAGE_SPECIAL}try{let t="acap-mimaropa-d77f1.firebasestorage.app";if(t){let r=encodeURIComponent("".concat(a,"/").concat(e));return"https://firebasestorage.googleapis.com/v0/b/".concat(t,"/o/").concat(r,"?alt=media")}let r=(0,n.iH)(n.tO,"".concat(a,"/").concat(e));return await (0,n.Jt)(r)}catch(e){throw Error(e.message)}}}}},77457:function(e,t,a){a.d(t,{aS:function(){return o},fu:function(){return s}});var r=a(98813);let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(e).toFixed(t)},o=e=>e===r.nQ?r.DD:n(e),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Promise(t=>{if(void 0===e||"object"!=typeof e)t("Missing error response object");else if(e.response){if(e.response.data instanceof Blob){let a=new Blob([e.response.data],{type:"application/octet-stream"}),r=new FileReader;r.onload=()=>{t(r.result)},r.readAsText(a)}else t("Error reading data")}else e.request?t(e.request):t(e.message)})}}}]);