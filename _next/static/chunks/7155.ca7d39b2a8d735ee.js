(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7155],{97155:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return O}});var i=a(85893),r=a(9669),n=a.n(r),o=a(45243),s=a.n(o),l=a(67294),p=a(9473),c=a(444),h=a(61730),u=a(5715),d=a(19635),m=a(52013),g=a(84867),f=a(20577),v=a(64049),y=a(60990),x=a(13319),S=a(43235),b=a.n(S),M=function(e){let{record:t}=e,[a,r]=(0,l.useState)(null),[n,o]=(0,l.useState)(null);return(0,l.useEffect)(()=>{null!==t?r([t.lat,t.lon]):r(null),o(t)},[t]),null===a?null:(0,i.jsx)(f.J,{position:a,eventHandlers:{mouseover:()=>{r(null)},click:()=>{r(null)}},children:(0,i.jsx)(v.u,{className:b().tooltipCustom,permanent:!0,children:(0,i.jsx)("table",{style:{width:"100%"},children:(0,i.jsx)("tbody",{children:["Barangay","Municipality","Province","Association"].map((e,t)=>["lat","lon"].includes(e)?(0,i.jsx)("tr",{},t):(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)("b",{children:[e,":"]})}),(0,i.jsx)("td",{children:n[e.toLowerCase()]})]},t))})})})})},w=[{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",name:"Street Map",attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"},{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",name:"Topography Map",attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'},{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",name:"Light",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'},{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png",name:"Terrain Map",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg",name:"Watercolor",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",name:"Satellite Map",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",name:"Shaded Relief",attribution:"Tiles &copy; Esri &mdash; Source: Esri"},{url:"https://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}",name:"Ocean",attribution:"Tiles &copy; Esri &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}],j={width:"100vw",height:"100vh",maxWidth:"100vw",maxHeight:"100vh",margin:0,padding:0,boxSizing:"border-box",position:"absolute",top:0,left:0,overflow:"hidden","@media (min-width: 900px)":{height:"calc(100vh - 100px - 140px)",position:"relative",width:"100vw",overflow:"visible"}};let[C,_]=a(98813).XH.split(",").map(Number),E={lat:C,lng:_},A=["Barangay","Municipality","Province","Association"],T={Marinduque:"#4CAF50","Occidental Mindoro":"#2196F3","Oriental Mindoro":"#FF9800",Palawan:"#9C27B0",Romblon:"#F44336"};var O=function(e){let{data:t={villages:[]}}=e,[a,r]=(0,l.useState)(null),[o,S]=(0,l.useState)(null),C=(0,l.useRef)(null),_=(0,h.Z)(e=>e.breakpoints.down("md")),O=(0,l.useMemo)(()=>s().divIcon({className:b().pinWrapper,html:'\n      <div class="'.concat(b().pinHead,'">\n        <img class="').concat(b().pinLogo,'" src="/images/logos/amia-logo.png" alt="AMIA" />\n      </div>\n      <div class="').concat(b().pinTail,'"></div>\n    '),iconSize:[30,42],iconAnchor:[15,42],tooltipAnchor:[0,-36]}),[]),G=(0,p.v9)(e=>e.provinces.ids),I=(0,p.I0)(),N=(0,l.useRef)(!1);(0,l.useEffect)(()=>{N.current||0!==G.length||(N.current=!0,I((0,c.Q)()))},[I,G.length]);let z=(e,t)=>{C.current&&C.current.flyTo([e,t],10,{duration:2})};return(0,l.useEffect)(()=>{(async()=>{try{let e="default";e&&"default"!==e||(e="/images/regions/mimaropa-provinces-realistic.geojson"),(null==e?void 0:e.startsWith("/"))&&(e="https://acap-mimaropa.github.io"+e);let t=await n().get(e);r(t.data)}catch(e){r(null)}})()},[]),(0,i.jsxs)(y.Z,{sx:j,style:{minHeight:_?"100vh":"600px",overflow:"hidden"},children:[(0,i.jsxs)(u.h,{style:{height:"100%",width:"100%"},center:E,zoom:8,minZoom:7,whenCreated:e=>C.current=e,children:[(0,i.jsx)(d.et,{position:"topleft",children:w.map((e,t)=>(0,i.jsx)(d.et.BaseLayer,{name:e.name,checked:0===t,children:(0,i.jsx)(m.I,{attribution:e.attribution,url:e.url})},t))}),(null==a?void 0:a.features)&&(0,i.jsx)(g.Q,{data:a,style:e=>({fillColor:T[e.properties.province||e.properties.name]||"#999999",fillOpacity:.6,weight:2,color:"#ffffff",opacity:1})},"provinces-geojson"),t.villages.map((e,t)=>(0,i.jsx)(f.J,{position:[e.lat,e.lon],icon:O,children:(0,i.jsx)(v.u,{className:b().tooltipCustom,direction:"left",children:(0,i.jsx)("table",{children:(0,i.jsx)("tbody",{children:A.map(t=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)("b",{children:[t,":"]})}),(0,i.jsx)("td",{children:e[t.toLowerCase()]})]},t))})})})},t)),!_&&(0,i.jsx)(M,{record:o})]}),!_&&(0,i.jsx)(x.default,{record:o,isSmallScreen:_,onSelectMunicipality:(e,a)=>{if(!e||!a){S(null);return}let i=t.villages.find(t=>t.municipality===e&&t.province===a);i&&(S(i),z(i.lat,i.lon))}})]})}},43235:function(e){e.exports={tooltipCustom:"Map_tooltipCustom__CAcp1",pinWrapper:"Map_pinWrapper__fPhfd",pinHead:"Map_pinHead__JiO2c",pinLogo:"Map_pinLogo__0DpAx",pinTail:"Map_pinTail__uvEv7"}}}]);