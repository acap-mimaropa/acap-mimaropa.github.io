"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4381],{2052:function(e,t,i){var n=i(85893),o=i(93454);t.Z=function(e){return(0,n.jsx)(o.Z,{...e,elevation:15})}},42823:function(e,t,i){i.d(t,{Z:function(){return c}});var n=i(85893),o=i(25675),a=i.n(o),r=i(60990),l=i(96788),s=i(71604),d={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},c=function(e){let{message:t="Failed to load data",style:i={}}=e;return(0,n.jsxs)(r.Z,{sx:d,style:i,children:[(0,n.jsx)(a(),{unoptimized:!0,src:(0,s.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:s.imageLoader,alt:"Empty data"}),(0,n.jsx)(l.Z,{variant:"subtitle1",children:t})]})}},11859:function(e,t,i){var n=i(85893),o=i(60990),a=i(97182);t.Z=function(e){let{text:t="",size:i=24,children:r}=e;return(0,n.jsxs)(o.Z,{sx:{width:"100%",textAlign:"center",height:"20vh"},children:[(0,n.jsxs)(o.Z,{sx:{width:"100%",textAlign:"center",marginTop:e=>e.spacing(12),marginBottom:"32px",display:"flex",justifyContent:"center"},children:[(0,n.jsx)("span",{children:""!==t?t:"Loading..."})," \xa0",(0,n.jsx)(a.Z,{size:i})]}),r]})}},16729:function(e,t,i){i.d(t,{Z:function(){return b}});var n=i(85893),o=i(67294),a=i(45697),r=i.n(a),l=i(51015),s=i(2782),d=i(97182),c=i(33453),u=i(96727),p=i(92365),h=i(40110),g=i(52857),m={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"48px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:e=>e.palette.grey[500]}};function x(e){let[t,i]=o.useState({open:null}),{loading:a=!1,isOpen:r=!1,showButtons:x=!0,maxWidth:b="sm",IconSVG:v=null,modalButtonStyles:f={},modalExtraHandlerCB:y=null,modalCancelHandlerCB:C=null,modalConfirmHandlerCB:_=null,modalOpenHandlerCB:R=null,isDisabled:w=!1}=e,{openButtonText:Z="Click",title:S="Window Title",extraBtnText:j="",cancelBtnText:B="Cancel",confirmBtnText:T="Ok",contentText:k="",error:E="",colorTheme:F="primary"}=e;(0,o.useEffect)(()=>{i(e=>({...e,open:r}))},[r]);let L=()=>{i({...t,open:!1}),C&&C()};return(0,n.jsxs)("div",{children:[Z&&(0,n.jsxs)(l.Z,{disabled:w,disableElevation:!0,variant:"contained",color:F,onClick:()=>{i({...t,open:!0}),R&&R()},sx:{...m.button,...f},children:[v&&(0,n.jsx)(v,{sx:m.icon}),Z]}),(0,n.jsxs)(c.Z,{maxWidth:b,fullWidth:!0,open:t.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,n.jsxs)(p.Z,{children:[(0,n.jsx)("span",{children:S}),(0,n.jsx)(g.Z,{"aria-label":"close",sx:m.closeButton,onClick:L,disabled:a,children:(0,n.jsx)(s.Z,{})})]}),(0,n.jsxs)(h.Z,{sx:m.dialogContent,children:[""!==k&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:k}),(0,n.jsx)("div",{className:"error",children:E})]}),e.children]}),x&&(0,n.jsxs)(u.Z,{sx:m.dialogActions,children:[""!==j&&(0,n.jsx)(l.Z,{onClick:y||L,disabled:a,children:j}),(0,n.jsx)(l.Z,{onClick:C||L,disabled:a,children:B}),(0,n.jsxs)(l.Z,{variant:"contained",disabled:a,onClick:_||L,children:[(0,n.jsx)("span",{style:{display:a?"none":"block"},children:T}),(0,n.jsx)(d.Z,{size:24,color:"secondary",sx:{display:a?"block":"none"}})]})]})]})]})}x.propTypes={loading:r().bool,isOpen:r().bool,showButtons:r().bool,maxWidth:r().string,IconSVG:r().elementType,modalButtonStyles:r().object,modalCancelHandlerCB:r().func,modalConfirmHandlerCB:r().func,modalOpenHandlerCB:r().func,modalExtraHandlerCB:r().func,openButtonText:r().string,cancelBtnText:r().string,confirmBtnText:r().string,extraBtnText:r().string,title:r().string,contentText:r().string,children:r().node,error:r().string,isDisabled:r().bool,colorTheme:r().string};var b=x},57951:function(e,t,i){var n=i(85893),o=i(60990),a=i(51015),r=i(33453),l=i(96727),s=i(40110),d=i(92365),c=i(25675),u=i.n(c),p=i(71604),h=i(42823),g=i(11859);t.Z=function(e){let{open:t,pdfPreview:i,error:c="",loading:m=!1,toggleViewerOpen:x}=e;return(0,n.jsxs)(r.Z,{open:t,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"data-saved-success","aria-describedby":"alert-dialog-description",children:[(0,n.jsx)(d.Z,{id:"data-saved-success",children:i.filename?"Bulletin Preview - ".concat(i.filename):"Bulletin Preview"}),(0,n.jsx)(s.Z,{sx:{padding:0,overflow:"hidden"},children:(0,n.jsx)(o.Z,{id:"alert-dialog-description",children:m?(0,n.jsx)("div",{style:{width:"100%",height:"90vh",textAlign:"center"},children:(0,n.jsx)(g.Z,{text:"Loading Preview...",children:(0,n.jsx)(u(),{unoptimized:!0,src:(0,p.assetPrefixer)("images/icons/data-processing-128.png"),height:100,width:100,loader:p.imageLoader,alt:"Loading Preview"})})}):""!==c?(0,n.jsx)("div",{style:{width:"100%",height:"100vh"},children:(0,n.jsx)(h.Z,{message:c})}):(0,n.jsx)("embed",{src:i.url,style:{width:"100%",height:"70vh"}})})}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(a.Z,{variant:"contained",onClick:x,autoFocus:!0,children:"OK"})})]})}},71663:function(e,t){t.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},headerText:{marginBottom:"32px",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"top"},conditionLegend:{borderRadius:e=>e.spacing(1),width:"100%",padding:e=>e.spacing(1),border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:e=>e.spacing(1)},recSeasonal:{marginTop:e=>e.spacing(1),marginBottom:e=>e.spacing(5),"& p, ul, ol":{fontSize:"14px"}},recSeasonalStage:{marginTop:e=>e.spacing(5),marginBottom:e=>e.spacing(2),textDecoration:"underline"},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"48px"}},pdfcontent:{ul:{paddingLeft:3}}}},24006:function(e,t,i){i.d(t,{Z:function(){return v}});var n=i(85893),o=i(67294),a=i(45697),r=i.n(a),l=i(25675),s=i.n(l),d=i(60990),c=i(96788),u=i(71604),p={selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)}};let h=[{key:"sel_crop",label:"Crop"},{key:"sel_province",label:"Province"}],g=[{key:"sel_month",label:"Months"},{key:"climate_risk",label:"Climate Risk"},{key:"sel_stage",label:"Crop Stages"},{key:"sel_activity",label:"Activities"}],m=[{key:"sel_typhoon",label:"Typhoon Name"},{key:"sel_signal",label:"Wind Signal"}],x=()=>(0,n.jsx)(c.Z,{variant:"caption",color:"orange",children:(0,n.jsx)("strong",{children:"No data available."})});function b(e){let{cropstages:t,climateRisk:i,selecteditems:a,farmoperations:r,loading:l,reportType:b="seasonal"}=e,v=(0,o.useMemo)(()=>"special"===b?[...m,...h]:[...h,...g],[b]),f=(0,o.useMemo)(()=>"special"===b?(null==a?void 0:a.sel_signal)===null:(null==a?void 0:a.sel_province)===null,[b,a]);return(0,n.jsxs)(d.Z,{sx:p.selectionSummary,children:[(0,n.jsx)(c.Z,{variant:"h6",children:"Selection Summary"}),f?(0,n.jsxs)(d.Z,{sx:{...p.welcome,..."special"===b&&{minHeight:"184px"}},children:[(0,n.jsx)(s(),{unoptimized:!0,src:(0,u.assetPrefixer)("images/icons/finance.svg"),height:85,width:85,loader:u.imageLoader,alt:"Empty data"}),(0,n.jsxs)(d.Z,{sx:{marginTop:"16px"},children:[(0,n.jsx)(c.Z,{variant:"subtitle2",children:"Crop Recommendations PDF Bulletins Creator"}),(0,n.jsx)(c.Z,{variant:"subtitle2",children:"Please select a province to start."})]})]}):(0,n.jsx)(d.Z,{sx:{...p.summary,..."special"===b&&{minHeight:"184px"}},children:v.map((e,o)=>{let s="-";switch(e.key){case"sel_activity":s=null!==a.sel_crop?r||(0,n.jsx)(x,{}):"";break;case"sel_month":s=null!==a[e.key]?a[e.key].label:"-";break;case"climate_risk":s=i;break;case"sel_stage":s=null!==a.sel_crop?t||(0,n.jsx)(x,{}):"";break;case"sel_signal":var d;s=null!==a[e.key]?null===(d=a[e.key])||void 0===d?void 0:d.label:"";break;default:s=null!==a[e.key]?a[e.key]:""}let u=e.label;return"sel_month"===e.key&&"tenday"===b&&(u="Date"),(0,n.jsxs)("div",{children:[(0,n.jsxs)(c.Z,{variant:"subtitle2",style:{display:"inline-block"},children:[u,": \xa0"]}),(0,n.jsx)(c.Z,{variant:"body2",style:{display:"inline-block"},children:["sel_activity"].includes(e.key)&&l?(0,n.jsx)("span",{children:"loading..."}):s})]},"selected-".concat(o))})}),""!==a.error&&(0,n.jsx)(c.Z,{variant:"caption",sx:{color:"red"},children:a.error})]})}b.propTypes={selecteditems:r().object,farmoperations:r().string,loading:r().bool,reportType:r().string};var v=b},55292:function(e,t,i){var n=i(64836);t.Z=void 0;var o=n(i(33651)),a=i(85893);t.Z=(0,o.default)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},2782:function(e,t,i){var n=i(64836);t.Z=void 0;var o=n(i(33651)),a=i(85893);t.Z=(0,o.default)([(0,a.jsx)("path",{d:"M21 19.1H3V5h18zM21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},"0"),(0,a.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41z"},"1")],"CancelPresentation")},49986:function(e,t,i){i.d(t,{Z:function(){return _}});var n=i(63366),o=i(87462),a=i(67294),r=i(90512),l=i(94780),s=i(2101),d=i(66643),c=i(77527),u=i(44001),p=i(1588),h=i(34867);function g(e){return(0,h.ZP)("MuiButtonGroup",e)}let m=(0,p.Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]);var x=i(1058),b=i(41825),v=i(85893);let f=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],y=e=>{let{classes:t,color:i,disabled:n,disableElevation:o,fullWidth:a,orientation:r,variant:s}=e,c={root:["root",s,"vertical"===r&&"vertical",a&&"fullWidth",o&&"disableElevation"],grouped:["grouped","grouped".concat((0,d.Z)(r)),"grouped".concat((0,d.Z)(s)),"grouped".concat((0,d.Z)(s)).concat((0,d.Z)(r)),"grouped".concat((0,d.Z)(s)).concat((0,d.Z)(i)),n&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,l.Z)(c,g,t)},C=(0,c.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{["& .".concat(m.grouped)]:t.grouped},{["& .".concat(m.grouped)]:t["grouped".concat((0,d.Z)(i.orientation))]},{["& .".concat(m.grouped)]:t["grouped".concat((0,d.Z)(i.variant))]},{["& .".concat(m.grouped)]:t["grouped".concat((0,d.Z)(i.variant)).concat((0,d.Z)(i.orientation))]},{["& .".concat(m.grouped)]:t["grouped".concat((0,d.Z)(i.variant)).concat((0,d.Z)(i.color))]},{["& .".concat(m.firstButton)]:t.firstButton},{["& .".concat(m.lastButton)]:t.lastButton},{["& .".concat(m.middleButton)]:t.middleButton},t.root,t[i.variant],!0===i.disableElevation&&t.disableElevation,i.fullWidth&&t.fullWidth,"vertical"===i.orientation&&t.vertical]}})(e=>{let{theme:t,ownerState:i}=e;return(0,o.Z)({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},"contained"===i.variant&&{boxShadow:(t.vars||t).shadows[2]},i.disableElevation&&{boxShadow:"none"},i.fullWidth&&{width:"100%"},"vertical"===i.orientation&&{flexDirection:"column"},{["& .".concat(m.grouped)]:(0,o.Z)({minWidth:40,"&:hover":(0,o.Z)({},"contained"===i.variant&&{boxShadow:"none"})},"contained"===i.variant&&{boxShadow:"none"}),["& .".concat(m.firstButton,",& .").concat(m.middleButton)]:(0,o.Z)({},"horizontal"===i.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===i.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===i.variant&&"horizontal"===i.orientation&&{borderRight:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(m.disabled)]:{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"text"===i.variant&&"vertical"===i.orientation&&{borderBottom:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(m.disabled)]:{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"text"===i.variant&&"inherit"!==i.color&&{borderColor:t.vars?"rgba(".concat(t.vars.palette[i.color].mainChannel," / 0.5)"):(0,s.Fq)(t.palette[i.color].main,.5)},"outlined"===i.variant&&"horizontal"===i.orientation&&{borderRightColor:"transparent"},"outlined"===i.variant&&"vertical"===i.orientation&&{borderBottomColor:"transparent"},"contained"===i.variant&&"horizontal"===i.orientation&&{borderRight:"1px solid ".concat((t.vars||t).palette.grey[400]),["&.".concat(m.disabled)]:{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"contained"===i.variant&&"vertical"===i.orientation&&{borderBottom:"1px solid ".concat((t.vars||t).palette.grey[400]),["&.".concat(m.disabled)]:{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"contained"===i.variant&&"inherit"!==i.color&&{borderColor:(t.vars||t).palette[i.color].dark},{"&:hover":(0,o.Z)({},"outlined"===i.variant&&"horizontal"===i.orientation&&{borderRightColor:"currentColor"},"outlined"===i.variant&&"vertical"===i.orientation&&{borderBottomColor:"currentColor"})}),["& .".concat(m.lastButton,",& .").concat(m.middleButton)]:(0,o.Z)({},"horizontal"===i.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===i.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===i.variant&&"horizontal"===i.orientation&&{marginLeft:-1},"outlined"===i.variant&&"vertical"===i.orientation&&{marginTop:-1})})});var _=a.forwardRef(function(e,t){let i=(0,u.i)({props:e,name:"MuiButtonGroup"}),{children:l,className:s,color:d="primary",component:c="div",disabled:p=!1,disableElevation:h=!1,disableFocusRipple:g=!1,disableRipple:m=!1,fullWidth:_=!1,orientation:R="horizontal",size:w="medium",variant:Z="outlined"}=i,S=(0,n.Z)(i,f),j=(0,o.Z)({},i,{color:d,component:c,disabled:p,disableElevation:h,disableFocusRipple:g,disableRipple:m,fullWidth:_,orientation:R,size:w,variant:Z}),B=y(j),T=a.useMemo(()=>({className:B.grouped,color:d,disabled:p,disableElevation:h,disableFocusRipple:g,disableRipple:m,fullWidth:_,size:w,variant:Z}),[d,p,h,g,m,_,w,Z,B.grouped]),k=a.Children.toArray(l).filter(e=>a.isValidElement(e)),E=k.length,F=e=>{let t=0===e,i=e===E-1;return t&&i?"":t?B.firstButton:i?B.lastButton:B.middleButton};return(0,v.jsx)(C,(0,o.Z)({as:c,role:"group",className:(0,r.Z)(B.root,s),ref:t,ownerState:j},S,{children:(0,v.jsx)(x.Z.Provider,{value:T,children:k.map((e,t)=>(0,v.jsx)(b.Z.Provider,{value:F(t),children:e},t))})}))})},9704:function(e,t,i){i.d(t,{Z:function(){return a}});var n=i(67294),o=i(61061);function a(){let[e,t]=(0,n.useState)([]),[i,a]=(0,n.useState)(!1),[r,l]=(0,n.useState)("");return(0,n.useEffect)(()=>{(async()=>{var e,i,n;try{a(!0);let i=await (0,o.TQ)();t(null!==(e=null==i?void 0:i.list)&&void 0!==e?e:[]),a(!1),l("")}catch(e){l(null!==(n=null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.data)&&void 0!==n?n:e.message),a(!1),t([])}})()},[]),{cropList:e,loading:i,error:r}}},22088:function(e,t,i){i.d(t,{sT:function(){return p},$K:function(){return s},fI:function(){return c},O_:function(){return g},iR:function(){return u},Ee:function(){return d},vU:function(){return h}});var n=i(96171),o=i(78986);let a={CROP_REC_LIST_RECS_LITE:"n_list_crop_recommendations",CROP_REC_LIST_RECS_FORMATTED:"n_list_crop_recommendations_",CROP_REC_LIST:"n_crop_recommendations_",CROP_REC_SMS_LIST:"n_crop_recommendations_"};class r extends n.Z{constructor(...e){super(...e),this.getFormattedRecommendationsFromStages=async e=>{let t,{cropstages:i,forecast:n,type:r}=e;if(void 0===i||void 0===n)return;let l="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(r),s=this.collection(this.db,l);return t=r===o.q.SEASONAL?this.query(s,this.where("crop_stage","in",i),this.where("forecast","==",n)):this.query(s,this.where("crop_stage","in",i)),await this.getCollectionData(l,"",t)},this.getFormattedRecommendations=async e=>{let t,{cropstage:i,forecast:n,type:r}=e;if(void 0===i||void 0===n)return;let l="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(r),s=this.collection(this.db,l);return t=r===o.q.SEASONAL?this.query(s,this.where("crop_stage","==",i),this.where("forecast","==",n)):this.query(s,this.where("crop_stage","==",i)),await this.getCollectionData(l,"",t)},this.getCropRecommendationsLite=async e=>{let{type:t}=e;return await this.getDocumentData(a.CROP_REC_LIST_RECS_LITE,t)},this.getCropRecommendations=async e=>{let{crop:t,type:i}=e;if(!t||!i)return;let n="".concat(a.CROP_REC_LIST).concat(i),o=this.collection(this.db,n),r=this.query(o,this.where("crop","==",t));return await this.getCollectionDataWithID(n,"",r)},this.getRecommendations=async e=>{let t,{climateRisk:i,_cropStage:n,crop:o,type:r,multipleStages:l}=e;if(!i||!o)return;if(l){if(0===n.length)return}else if(!n)return;let s="".concat(a.CROP_REC_LIST).concat(r),d=this.collection(this.db,s);return t=l?this.query(d,this.where("climate_risk","==",i),this.where("crop_stage","in",n),this.where("crop","==",o)):this.query(d,this.where("climate_risk","==",i),this.where("crop_stage","==",n),this.where("crop","==",o)),await this.getCollectionData(s,"",t)},this.getSeasonalGeneralRecommendations=async e=>{let{climateRisk:t,crop:i}=e;if(!t||!i)return;let n="n_crop_recommendations_seasonal_general",o=this.collection(this.db,n),a=this.query(o,this.where("climate_risk","==",t),this.where("crop","==",i));return await this.getCollectionData(n,"",a)},this.getRecommendationsFlexible=async e=>{let{climateRisk:t,_cropStage:i,crop:n,type:o,multipleStages:r=!1}=e,l="".concat(a.CROP_REC_LIST).concat(o),s=this.collection(this.db,l);if(!n)return;let d=[this.where("crop","==",n)];t&&d.push(this.where("climate_risk","==",t)),i&&(r?d.push(this.where("crop_stage","in",i)):d.push(this.where("crop_stage","==",i)));let c=this.query(s,...d);return await this.getCollectionData(l,"",c)},this.getRecommendationsQuery=async e=>{let{type:t,queryFields:i=[]}=e;if(!t)throw Error("Missing parameter/s");let n="".concat(a.CROP_REC_LIST).concat(t),o=this.collection(this.db,n),r=i.map(e=>this.where(e.field,e.op,e.value)),l=this.query(o,...r);return await this.getCollectionData(n,"",l)},this.getRecommendationsSMS=async e=>{let{crop:t,climateRisk:i,type:n}=e;if(!t||!i||!n)return;let o="".concat(a.CROP_REC_SMS_LIST).concat(n),r=this.collection(this.db,o),l=this.query(r,this.where("crop","==",t),this.where("climate_risk","==",i));return await this.getCollectionData(o,"",l)},this.updateRecommendation=async e=>{let{type:t,newRecommendation:i}=e,n="".concat(a.CROP_REC_SMS_LIST).concat(t),o=this.collection(this.db,n),r=this.doc(o,i.docid);delete i.docid,await this.updateDoc(r,i)}}}let l=new r;l.getFormattedRecommendations.bind(l),l.getFormattedRecommendationsFromStages.bind(l),l.getCropRecommendationsLite.bind(l);let s=l.getRecommendations.bind(l),d=l.getSeasonalGeneralRecommendations.bind(l),c=l.getRecommendationsFlexible.bind(l),u=l.getRecommendationsSMS.bind(l),p=l.getCropRecommendations.bind(l),h=l.updateRecommendation.bind(l),g=l.getRecommendationsQuery.bind(l)},77457:function(e,t,i){i.d(t,{aS:function(){return a},fu:function(){return r}});var n=i(98813);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(e).toFixed(t)},a=e=>e===n.nQ?n.DD:o(e),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Promise(t=>{if(void 0===e||"object"!=typeof e)t("Missing error response object");else if(e.response){if(e.response.data instanceof Blob){let i=new Blob([e.response.data],{type:"application/octet-stream"}),n=new FileReader;n.onload=()=>{t(n.result)},n.readAsText(i)}else t("Error reading data")}else e.request?t(e.request):t(e.message)})}}}]);