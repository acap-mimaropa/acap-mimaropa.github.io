"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1211],{2052:function(e,t,i){var o=i(85893),n=i(93454);t.Z=function(e){return(0,o.jsx)(n.Z,{...e,elevation:15})}},42823:function(e,t,i){i.d(t,{Z:function(){return d}});var o=i(85893),n=i(25675),a=i.n(n),r=i(60990),l=i(96788),s=i(71604),c={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},d=function(e){let{message:t="Failed to load data",style:i={}}=e;return(0,o.jsxs)(r.Z,{sx:c,style:i,children:[(0,o.jsx)(a(),{unoptimized:!0,src:(0,s.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:s.imageLoader,alt:"Empty data"}),(0,o.jsx)(l.Z,{variant:"subtitle1",children:t})]})}},11859:function(e,t,i){var o=i(85893),n=i(60990),a=i(97182);t.Z=function(e){let{text:t="",size:i=24,children:r}=e;return(0,o.jsxs)(n.Z,{sx:{width:"100%",textAlign:"center",height:"20vh"},children:[(0,o.jsxs)(n.Z,{sx:{width:"100%",textAlign:"center",marginTop:e=>e.spacing(12),marginBottom:"32px",display:"flex",justifyContent:"center"},children:[(0,o.jsx)("span",{children:""!==t?t:"Loading..."})," \xa0",(0,o.jsx)(a.Z,{size:i})]}),r]})}},57951:function(e,t,i){var o=i(85893),n=i(60990),a=i(51015),r=i(33453),l=i(96727),s=i(40110),c=i(92365),d=i(25675),u=i.n(d),p=i(71604),h=i(42823),g=i(11859);t.Z=function(e){let{open:t,pdfPreview:i,error:d="",loading:m=!1,toggleViewerOpen:v}=e;return(0,o.jsxs)(r.Z,{open:t,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"data-saved-success","aria-describedby":"alert-dialog-description",children:[(0,o.jsx)(c.Z,{id:"data-saved-success",children:i.filename?"Bulletin Preview - ".concat(i.filename):"Bulletin Preview"}),(0,o.jsx)(s.Z,{sx:{padding:0,overflow:"hidden"},children:(0,o.jsx)(n.Z,{id:"alert-dialog-description",children:m?(0,o.jsx)("div",{style:{width:"100%",height:"90vh",textAlign:"center"},children:(0,o.jsx)(g.Z,{text:"Loading Preview...",children:(0,o.jsx)(u(),{unoptimized:!0,src:(0,p.assetPrefixer)("images/icons/data-processing-128.png"),height:100,width:100,loader:p.imageLoader,alt:"Loading Preview"})})}):""!==d?(0,o.jsx)("div",{style:{width:"100%",height:"100vh"},children:(0,o.jsx)(h.Z,{message:d})}):(0,o.jsx)("embed",{src:i.url,style:{width:"100%",height:"70vh"}})})}),(0,o.jsx)(l.Z,{children:(0,o.jsx)(a.Z,{variant:"contained",onClick:v,autoFocus:!0,children:"OK"})})]})}},71663:function(e,t){t.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},headerText:{marginBottom:"32px",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"top"},conditionLegend:{borderRadius:e=>e.spacing(1),width:"100%",padding:e=>e.spacing(1),border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:e=>e.spacing(1)},recSeasonal:{marginTop:e=>e.spacing(1),marginBottom:e=>e.spacing(5),"& p, ul, ol":{fontSize:"14px"}},recSeasonalStage:{marginTop:e=>e.spacing(5),marginBottom:e=>e.spacing(2),textDecoration:"underline"},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"48px"}},pdfcontent:{ul:{paddingLeft:3}}}},24006:function(e,t,i){i.d(t,{Z:function(){return x}});var o=i(85893),n=i(67294),a=i(45697),r=i.n(a),l=i(25675),s=i.n(l),c=i(60990),d=i(96788),u=i(71604),p={selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)}};let h=[{key:"sel_crop",label:"Crop"},{key:"sel_province",label:"Province"}],g=[{key:"sel_month",label:"Months"},{key:"climate_risk",label:"Climate Risk"},{key:"sel_stage",label:"Crop Stages"},{key:"sel_activity",label:"Activities"}],m=[{key:"sel_typhoon",label:"Typhoon Name"},{key:"sel_signal",label:"Wind Signal"}],v=()=>(0,o.jsx)(d.Z,{variant:"caption",color:"orange",children:(0,o.jsx)("strong",{children:"No data available."})});function b(e){let{cropstages:t,climateRisk:i,selecteditems:a,farmoperations:r,loading:l,reportType:b="seasonal"}=e,x=(0,n.useMemo)(()=>"special"===b?[...m,...h]:[...h,...g],[b]),f=(0,n.useMemo)(()=>"special"===b?(null==a?void 0:a.sel_signal)===null:(null==a?void 0:a.sel_province)===null,[b,a]);return(0,o.jsxs)(c.Z,{sx:p.selectionSummary,children:[(0,o.jsx)(d.Z,{variant:"h6",children:"Selection Summary"}),f?(0,o.jsxs)(c.Z,{sx:{...p.welcome,..."special"===b&&{minHeight:"184px"}},children:[(0,o.jsx)(s(),{unoptimized:!0,src:(0,u.assetPrefixer)("images/icons/finance.svg"),height:85,width:85,loader:u.imageLoader,alt:"Empty data"}),(0,o.jsxs)(c.Z,{sx:{marginTop:"16px"},children:[(0,o.jsx)(d.Z,{variant:"subtitle2",children:"Crop Recommendations PDF Bulletins Creator"}),(0,o.jsx)(d.Z,{variant:"subtitle2",children:"Please select a province to start."})]})]}):(0,o.jsx)(c.Z,{sx:{...p.summary,..."special"===b&&{minHeight:"184px"}},children:x.map((e,n)=>{let s="-";switch(e.key){case"sel_activity":s=null!==a.sel_crop?r||(0,o.jsx)(v,{}):"";break;case"sel_month":s=null!==a[e.key]?a[e.key].label:"-";break;case"climate_risk":s=i;break;case"sel_stage":s=null!==a.sel_crop?t||(0,o.jsx)(v,{}):"";break;case"sel_signal":var c;s=null!==a[e.key]?null===(c=a[e.key])||void 0===c?void 0:c.label:"";break;default:s=null!==a[e.key]?a[e.key]:""}let u=e.label;return"sel_month"===e.key&&"tenday"===b&&(u="Date"),(0,o.jsxs)("div",{children:[(0,o.jsxs)(d.Z,{variant:"subtitle2",style:{display:"inline-block"},children:[u,": \xa0"]}),(0,o.jsx)(d.Z,{variant:"body2",style:{display:"inline-block"},children:["sel_activity"].includes(e.key)&&l?(0,o.jsx)("span",{children:"loading..."}):s})]},"selected-".concat(n))})}),""!==a.error&&(0,o.jsx)(d.Z,{variant:"caption",sx:{color:"red"},children:a.error})]})}b.propTypes={selecteditems:r().object,farmoperations:r().string,loading:r().bool,reportType:r().string};var x=b},55292:function(e,t,i){var o=i(64836);t.Z=void 0;var n=o(i(33651)),a=i(85893);t.Z=(0,n.default)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},2782:function(e,t,i){var o=i(64836);t.Z=void 0;var n=o(i(33651)),a=i(85893);t.Z=(0,n.default)([(0,a.jsx)("path",{d:"M21 19.1H3V5h18zM21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},"0"),(0,a.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41z"},"1")],"CancelPresentation")},49986:function(e,t,i){i.d(t,{Z:function(){return R}});var o=i(63366),n=i(87462),a=i(67294),r=i(90512),l=i(94780),s=i(2101),c=i(66643),d=i(77527),u=i(44001),p=i(1588),h=i(34867);function g(e){return(0,h.ZP)("MuiButtonGroup",e)}let m=(0,p.Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]);var v=i(1058),b=i(41825),x=i(85893);let f=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],_=e=>{let{classes:t,color:i,disabled:o,disableElevation:n,fullWidth:a,orientation:r,variant:s}=e,d={root:["root",s,"vertical"===r&&"vertical",a&&"fullWidth",n&&"disableElevation"],grouped:["grouped","grouped".concat((0,c.Z)(r)),"grouped".concat((0,c.Z)(s)),"grouped".concat((0,c.Z)(s)).concat((0,c.Z)(r)),"grouped".concat((0,c.Z)(s)).concat((0,c.Z)(i)),o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,l.Z)(d,g,t)},y=(0,d.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{["& .".concat(m.grouped)]:t.grouped},{["& .".concat(m.grouped)]:t["grouped".concat((0,c.Z)(i.orientation))]},{["& .".concat(m.grouped)]:t["grouped".concat((0,c.Z)(i.variant))]},{["& .".concat(m.grouped)]:t["grouped".concat((0,c.Z)(i.variant)).concat((0,c.Z)(i.orientation))]},{["& .".concat(m.grouped)]:t["grouped".concat((0,c.Z)(i.variant)).concat((0,c.Z)(i.color))]},{["& .".concat(m.firstButton)]:t.firstButton},{["& .".concat(m.lastButton)]:t.lastButton},{["& .".concat(m.middleButton)]:t.middleButton},t.root,t[i.variant],!0===i.disableElevation&&t.disableElevation,i.fullWidth&&t.fullWidth,"vertical"===i.orientation&&t.vertical]}})(e=>{let{theme:t,ownerState:i}=e;return(0,n.Z)({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},"contained"===i.variant&&{boxShadow:(t.vars||t).shadows[2]},i.disableElevation&&{boxShadow:"none"},i.fullWidth&&{width:"100%"},"vertical"===i.orientation&&{flexDirection:"column"},{["& .".concat(m.grouped)]:(0,n.Z)({minWidth:40,"&:hover":(0,n.Z)({},"contained"===i.variant&&{boxShadow:"none"})},"contained"===i.variant&&{boxShadow:"none"}),["& .".concat(m.firstButton,",& .").concat(m.middleButton)]:(0,n.Z)({},"horizontal"===i.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===i.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===i.variant&&"horizontal"===i.orientation&&{borderRight:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(m.disabled)]:{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"text"===i.variant&&"vertical"===i.orientation&&{borderBottom:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(m.disabled)]:{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"text"===i.variant&&"inherit"!==i.color&&{borderColor:t.vars?"rgba(".concat(t.vars.palette[i.color].mainChannel," / 0.5)"):(0,s.Fq)(t.palette[i.color].main,.5)},"outlined"===i.variant&&"horizontal"===i.orientation&&{borderRightColor:"transparent"},"outlined"===i.variant&&"vertical"===i.orientation&&{borderBottomColor:"transparent"},"contained"===i.variant&&"horizontal"===i.orientation&&{borderRight:"1px solid ".concat((t.vars||t).palette.grey[400]),["&.".concat(m.disabled)]:{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"contained"===i.variant&&"vertical"===i.orientation&&{borderBottom:"1px solid ".concat((t.vars||t).palette.grey[400]),["&.".concat(m.disabled)]:{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"contained"===i.variant&&"inherit"!==i.color&&{borderColor:(t.vars||t).palette[i.color].dark},{"&:hover":(0,n.Z)({},"outlined"===i.variant&&"horizontal"===i.orientation&&{borderRightColor:"currentColor"},"outlined"===i.variant&&"vertical"===i.orientation&&{borderBottomColor:"currentColor"})}),["& .".concat(m.lastButton,",& .").concat(m.middleButton)]:(0,n.Z)({},"horizontal"===i.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===i.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===i.variant&&"horizontal"===i.orientation&&{marginLeft:-1},"outlined"===i.variant&&"vertical"===i.orientation&&{marginTop:-1})})});var R=a.forwardRef(function(e,t){let i=(0,u.i)({props:e,name:"MuiButtonGroup"}),{children:l,className:s,color:c="primary",component:d="div",disabled:p=!1,disableElevation:h=!1,disableFocusRipple:g=!1,disableRipple:m=!1,fullWidth:R=!1,orientation:C="horizontal",size:w="medium",variant:S="outlined"}=i,Z=(0,o.Z)(i,f),T=(0,n.Z)({},i,{color:c,component:d,disabled:p,disableElevation:h,disableFocusRipple:g,disableRipple:m,fullWidth:R,orientation:C,size:w,variant:S}),j=_(T),B=a.useMemo(()=>({className:j.grouped,color:c,disabled:p,disableElevation:h,disableFocusRipple:g,disableRipple:m,fullWidth:R,size:w,variant:S}),[c,p,h,g,m,R,w,S,j.grouped]),E=a.Children.toArray(l).filter(e=>a.isValidElement(e)),k=E.length,L=e=>{let t=0===e,i=e===k-1;return t&&i?"":t?j.firstButton:i?j.lastButton:j.middleButton};return(0,x.jsx)(y,(0,n.Z)({as:d,role:"group",className:(0,r.Z)(j.root,s),ref:t,ownerState:T},Z,{children:(0,x.jsx)(v.Z.Provider,{value:B,children:E.map((e,t)=>(0,x.jsx)(b.Z.Provider,{value:L(t),children:e},t))})}))})},9704:function(e,t,i){i.d(t,{Z:function(){return a}});var o=i(67294),n=i(61061);function a(){let[e,t]=(0,o.useState)([]),[i,a]=(0,o.useState)(!1),[r,l]=(0,o.useState)("");return(0,o.useEffect)(()=>{(async()=>{var e,i,o;try{a(!0);let i=await (0,n.TQ)();t(null!==(e=null==i?void 0:i.list)&&void 0!==e?e:[]),a(!1),l("")}catch(e){l(null!==(o=null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.data)&&void 0!==o?o:e.message),a(!1),t([])}})()},[]),{cropList:e,loading:i,error:r}}},22088:function(e,t,i){i.d(t,{fI:function(){return h},sT:function(){return p},$K:function(){return s},YH:function(){return d},O_:function(){return m},iR:function(){return u},Ee:function(){return c},vU:function(){return g}});var o=i(96171),n=i(78986);let a={CROP_REC_LIST_RECS_LITE:"n_list_crop_recommendations",CROP_REC_LIST_RECS_FORMATTED:"n_list_crop_recommendations_",CROP_REC_LIST:"n_crop_recommendations_",CROP_REC_SMS_LIST:"n_crop_recommendations_"};class r extends o.Z{constructor(...e){super(...e),this.getFormattedRecommendationsFromStages=async e=>{let t,{cropstages:i,forecast:o,type:r}=e;if(void 0===i||void 0===o)return;let l="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(r),s=this.collection(this.db,l);return t=r===n.q.SEASONAL?this.query(s,this.where("crop_stage","in",i),this.where("forecast","==",o)):this.query(s,this.where("crop_stage","in",i)),await this.getCollectionData(l,"",t)},this.getFormattedRecommendations=async e=>{let t,{cropstage:i,forecast:o,type:r}=e;if(void 0===i||void 0===o)return;let l="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(r),s=this.collection(this.db,l);return t=r===n.q.SEASONAL?this.query(s,this.where("crop_stage","==",i),this.where("forecast","==",o)):this.query(s,this.where("crop_stage","==",i)),await this.getCollectionData(l,"",t)},this.getCropRecommendationsLite=async e=>{let{type:t}=e;return await this.getDocumentData(a.CROP_REC_LIST_RECS_LITE,t)},this.getCropRecommendations=async e=>{let{crop:t,type:i}=e;if(!t||!i)return;let o="".concat(a.CROP_REC_LIST).concat(i),n=this.collection(this.db,o),r=this.query(n,this.where("crop","==",t));return await this.getCollectionDataWithID(o,"",r)},this.getRecommendations=async e=>{let t,{climateRisk:i,_cropStage:o,crop:n,type:r,multipleStages:l}=e;if(!i||!n)return;if(l){if(0===o.length)return}else if(!o)return;let s="".concat(a.CROP_REC_LIST).concat(r),c=this.collection(this.db,s);return t=l?this.query(c,this.where("climate_risk","==",i),this.where("crop_stage","in",o),this.where("crop","==",n)):this.query(c,this.where("climate_risk","==",i),this.where("crop_stage","==",o),this.where("crop","==",n)),await this.getCollectionData(s,"",t)},this.getSeasonalGeneralRecommendations=async e=>{let{climateRisk:t,crop:i}=e;if(!t||!i)return;let o="n_crop_recommendations_seasonal_general",n=this.collection(this.db,o),a=this.query(n,this.where("climate_risk","==",t),this.where("crop","==",i));return await this.getCollectionData(o,"",a)},this.getRecommendationsFlexible=async e=>{let{climateRisk:t,_cropStage:i,crop:o,type:n,multipleStages:r=!1}=e,l="".concat(a.CROP_REC_LIST).concat(n),s=this.collection(this.db,l);if(!o)return;let c=[this.where("crop","==",o)];t&&c.push(this.where("climate_risk","==",t)),i&&(r?c.push(this.where("crop_stage","in",i)):c.push(this.where("crop_stage","==",i)));let d=this.query(s,...c);return await this.getCollectionData(l,"",d)},this.getRecommendationsQuery=async e=>{let{type:t,queryFields:i=[]}=e;if(!t)throw Error("Missing parameter/s");let o="".concat(a.CROP_REC_LIST).concat(t),n=this.collection(this.db,o),r=i.map(e=>this.where(e.field,e.op,e.value)),l=this.query(n,...r);return await this.getCollectionData(o,"",l)},this.getRecommendationsSMS=async e=>{let{crop:t,climateRisk:i,type:o}=e;if(!t||!i||!o)return;let n="".concat(a.CROP_REC_SMS_LIST).concat(o),r=this.collection(this.db,n),l=this.query(r,this.where("crop","==",t),this.where("climate_risk","==",i));return await this.getCollectionData(n,"",l)},this.updateRecommendation=async e=>{let{type:t,newRecommendation:i}=e,o="".concat(a.CROP_REC_SMS_LIST).concat(t),n=this.collection(this.db,o),r=this.doc(n,i.docid);delete i.docid,await this.updateDoc(r,i)},this.createRecommendation=async e=>{let{type:t,recommendation:i}=e,o="".concat(a.CROP_REC_SMS_LIST).concat(t),n=this.collection(this.db,o);return await this.addDoc(n,i)}}}let l=new r;l.getFormattedRecommendations.bind(l),l.getFormattedRecommendationsFromStages.bind(l),l.getCropRecommendationsLite.bind(l);let s=l.getRecommendations.bind(l),c=l.getSeasonalGeneralRecommendations.bind(l),d=l.getRecommendationsFlexible.bind(l),u=l.getRecommendationsSMS.bind(l),p=l.getCropRecommendations.bind(l),h=l.createRecommendation.bind(l),g=l.updateRecommendation.bind(l),m=l.getRecommendationsQuery.bind(l)},77457:function(e,t,i){i.d(t,{aS:function(){return a},fu:function(){return r}});var o=i(98813);let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(e).toFixed(t)},a=e=>e===o.nQ?o.DD:n(e),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Promise(t=>{if(void 0===e||"object"!=typeof e)t("Missing error response object");else if(e.response){if(e.response.data instanceof Blob){let i=new Blob([e.response.data],{type:"application/octet-stream"}),o=new FileReader;o.onload=()=>{t(o.result)},o.readAsText(i)}else t("Error reading data")}else e.request?t(e.request):t(e.message)})}}}]);