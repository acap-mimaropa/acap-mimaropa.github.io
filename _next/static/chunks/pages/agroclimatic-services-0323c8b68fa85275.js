(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6603],{49361:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return n(3604)}])},48414:function(e,t,n){"use strict";var i=n(85893),a=n(9008),l=n.n(a),s=n(98813);t.Z=function(e){let{title:t,ogDescription:n,ogImageURL:a,ogImgAlt:o="Picture",ogSiteName:r="ACAP-".concat(s.Gt.toUpperCase()),ogURL:c,canonicalURL:d="http://localhost"}=e;return(0,i.jsxs)(l(),{children:[(0,i.jsx)("meta",{name:"description",content:n}),(0,i.jsx)("meta",{rel:"canonical",href:d}),(0,i.jsx)("meta",{name:"og:description",content:n}),(0,i.jsx)("meta",{property:"og:title",content:t}),(0,i.jsx)("meta",{property:"og:site_name",content:r}),(0,i.jsx)("meta",{property:"og:image",content:a}),(0,i.jsx)("meta",{property:"og:image:width",content:"600"}),(0,i.jsx)("meta",{property:"og:image:height",content:"315"}),(0,i.jsx)("meta",{property:"og:image:alt",content:o}),(0,i.jsx)("meta",{property:"og:url",content:c}),(0,i.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,i.jsx)("meta",{name:"twitter:title",content:t}),(0,i.jsx)("meta",{name:"twitter:image",content:a}),(0,i.jsx)("title",{children:t})]})}},2052:function(e,t,n){"use strict";var i=n(85893),a=n(93454);t.Z=function(e){return(0,i.jsx)(a.Z,{...e,elevation:15})}},42823:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(85893),a=n(25675),l=n.n(a),s=n(60990),o=n(96788),r=n(71604),c={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},d=function(e){let{message:t="Failed to load data",style:n={}}=e;return(0,i.jsxs)(s.Z,{sx:c,style:n,children:[(0,i.jsx)(l(),{unoptimized:!0,src:(0,r.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:r.imageLoader,alt:"Empty data"}),(0,i.jsx)(o.Z,{variant:"subtitle1",children:t})]})}},56112:function(e,t,n){"use strict";var i=n(85893),a=n(93454);let l=(0,n(77527).ZP)(e=>(0,i.jsx)(a.Z,{...e}))(e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:t.spacing(1),boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}});t.Z=l},3604:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return J},default:function(){return X}});var i=n(85893),a=n(67294),l=n(97416),s=n(56112),o=n(98813),r=n(96281),c=n(25675),d=n.n(c),u=n(45697),p=n.n(u),h=n(26541),m=n(25837),g=n(60990),x=n(51015),_=n(49986),v=n(56912),f=n(96788),y=n(68573),b=n(2052),j=n(84630),C={container:{display:"flex",flexDirection:"column"},cardContainer:{display:{xs:"none",md:"grid"},"& h6":{fontSize:"1.2rem",lineHeight:"1.6rem"},"& h6:nth-child(2)":{fontWeight:"bold"},placeContent:"center",width:"100%",maxWidth:"430px",minHeight:"85px",border:"2px solid #cc00cc",borderRadius:"40px",padding:e=>e.spacing(2),margin:"auto",marginBottom:"6px",marginTop:"6px",textAlign:"center",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px !important"},arrowIcon:{margin:"auto",color:"#cc00cc",display:{xs:"none",md:"block"}}},S=function(e){let{info:t,show:n=!0,borderColor:a="#cc00cc"}=e;return(0,i.jsxs)(g.Z,{sx:C.container,children:[(0,i.jsxs)(g.Z,{sx:C.cardContainer,style:{borderColor:a},children:[(0,i.jsx)(f.Z,{variant:"subtitle1",children:"You have selected ".concat("cropstage"===t.from?"crop stage":t.from)}),(0,i.jsx)(f.Z,{variant:"subtitle1",children:t.label})]}),n&&(0,i.jsx)(j.Z,{size:24,sx:C.arrowIcon,style:{color:a}})]})},Z=n(29455),R=n(71604),w=n(41664),E=n.n(w),O={container:{marginTop:e=>e.spacing(3),minHeight:"400px"},selectContainer:{borderRight:{sm:"none",md:"1px solid gray"}},recsContainer:{marginTop:"-24px",paddingLeft:{sm:"none",md:"54px !important"},"& .toggleButton":{float:"right",width:"80px"}},autocomplete:{maxWidth:{xs:"100%",md:"300px"},paddingTop:e=>e.spacing(2)},conditionLegend:{maxWidth:{sm:"100%"},margin:{md:"24px"},marginBottom:"32px",padding:e=>e.spacing(1),borderRadius:"4px",border:"1px solid grey",textAlign:"center"},welcome:{display:"grid",placeContent:"center",marginTop:e=>e.spacing(10),textAlign:"center","& h5":{marginTop:e=>e.spacing(2)}}};let P=["sel_province","sel_crop","sel_stage","sel_activity"];function T(e){var t,n,l,s;let[o,r]=(0,a.useState)(!1),{sel_options:c}=e,{climateRisk:u,seasonalMonths:p,optsprovinces:j,optscrops:C,optsmonths:w,optscropstages:T,optsactivities:L}=e,{onSelectItemChange:k,onResetClick:D}=e,{croppingCalendar:I,recommendations:A,loading:M}=e;(0,a.useEffect)(()=>{null===c.sel_activity&&!0===o&&0!==I.length&&r(!1)},[c.sel_activity,o,I]);let q=()=>{let e="Loading...";return j.length>0&&(e=null===c.sel_province?"Select a province":"Province"),e};return(0,i.jsxs)(g.Z,{sx:{minHeight:"75vh"},id:"contents-seasonal-recommendations",children:[(0,i.jsx)(f.Z,{variant:"h4",children:"Seasonal Recommendations"}),(0,i.jsx)(f.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,i.jsxs)(y.ZP,{container:!0,spacing:2,sx:O.container,children:[(0,i.jsxs)(y.ZP,{item:!0,xs:12,md:4,sx:O.selectContainer,children:[(0,i.jsxs)(g.Z,{sx:{paddingRight:e=>e.spacing(2),wdith:"100%"},children:[(0,i.jsx)(m.Z,{disablePortal:!0,id:"province",value:c.sel_province,disabled:0===j.length||M,options:j,sx:O.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,i.jsx)(h.Z,{...e,label:q()}),isOptionEqualToValue:(e,t)=>e.label===t,onChange:(e,t)=>k(e,{...t,from:"province"})}),c.sel_province&&(0,i.jsxs)(g.Z,{sx:{mt:2},children:[(0,i.jsx)(f.Z,{align:"center",variant:"body1",children:(0,i.jsx)("strong",{children:"Seasonal Forecast Duration:"})}),(0,i.jsxs)(f.Z,{align:"center",variant:"body1",children:[null===(t=p[0])||void 0===t?void 0:t.label," to ",null===(n=p[5])||void 0===n?void 0:n.label]})]}),(0,i.jsx)(m.Z,{disablePortal:!0,id:"crop",value:c.sel_crop,disabled:0===C.length||M||null===c.sel_province,options:C,sx:O.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,i.jsx)(h.Z,{...e,label:null===c.sel_crop?"Select a crop type":"Crop"}),isOptionEqualToValue:(e,t)=>e.label===t,getOptionDisabled:e=>e.disabled,onChange:(e,t)=>k(e,{...t,from:"crop"})}),0===T.length&&null!==c.sel_crop&&!M&&(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{variant:"caption",color:"orange",children:(0,i.jsxs)("strong",{children:["No crop stages for this seasonal range for"," ",c.sel_crop,"."]})}),(0,i.jsx)("br",{}),(0,i.jsxs)(f.Z,{variant:"caption",children:["See\xa0",(0,i.jsx)(E(),{href:"/cropping-calendar-v2",passHref:!0,legacyBehavior:!0,children:(0,i.jsx)("a",{style:{color:"orange",fontWeight:600},target:"_blank",children:"Cropping Calendar"})}),"\xa0for reference."]})]}),(0,i.jsx)(m.Z,{disablePortal:!0,id:"cropstage",value:c.sel_stage,disabled:0===T.length||M,options:T,sx:O.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,i.jsx)(h.Z,{...e,label:null===c.sel_stage?"Select a crop stage":"Crop Stage"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,onChange:(e,t)=>k(e,{...t,from:"cropstage"})}),(0,i.jsx)(m.Z,{disablePortal:!0,id:"activity",value:c.sel_activity,disabled:0===L.length||M,options:L,sx:O.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,i.jsx)(h.Z,{...e,label:null===c.sel_activity?"Select an activity":"Activity"}),isOptionEqualToValue:(e,t)=>e.label===t,onChange:(e,t)=>{k(e,{...t,from:"activity"}),r(!1)}}),(0,i.jsx)("div",{children:""!==c.error?(0,i.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:c.error}):(0,i.jsx)("div",{children:"\xa0"})}),(0,i.jsxs)(_.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,i.jsx)(x.Z,{size:"medium",disabled:M,onClick:D,children:"Clear"}),(0,i.jsx)(x.Z,{size:"medium",variant:"contained",onClick:()=>r(e=>!e),disabled:null===c.sel_activity&&!A.length||o,children:"Finish"})]})]}),(0,i.jsx)("br",{}),(0,i.jsx)(v.Z,{}),(0,i.jsx)("br",{}),""!==u&&w.length>0&&(0,i.jsxs)(g.Z,{sx:O.conditionLegend,children:[(0,i.jsxs)(f.Z,{variant:"body2",children:["Climate Risk for the season"," ",(0,i.jsx)("strong",{children:null===(l=w[0])||void 0===l?void 0:l.label})," to"," ",(0,i.jsx)("strong",{children:null===(s=w[5])||void 0===s?void 0:s.label}),":"]}),(0,i.jsx)("div",{children:u})]})]}),(0,i.jsx)(y.ZP,{item:!0,xs:12,md:8,sx:O.recsContainer,children:null!==c.sel_crop&&(null!==c.sel_activity||A.length)&&o?(0,i.jsx)(Z.Z,{impactOutlookOnly:!0,title:c.sel_crop,recommendations:A}):Object.values(c).filter(e=>e).length>1?(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:P.map((e,t)=>{var n,a;let l={from:e.slice(e.indexOf("_")+1),label:["sel_stage"].includes(e)?null!==(a=null===(n=c[e])||void 0===n?void 0:n.label)&&void 0!==a?a:"":c[e]};return null!==c[e]&&void 0!==c[e]?(0,i.jsx)(S,{info:l,show:t<P.length-1},"card-opt-".concat(t)):(0,i.jsx)("div",{},"card-opt-".concat(t))})}):(0,i.jsxs)(g.Z,{sx:O.welcome,children:[(0,i.jsx)(d(),{unoptimized:!0,src:(0,R.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:R.imageLoader,alt:"Empty data"}),(0,i.jsx)(f.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,i.jsx)(f.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}T.propTypes={sel_options:p().object,optsprovinces:p().array,optscrops:p().array,optsmonths:p().array,optscropstages:p().array,optsactivities:p().array,seasonalMonths:p().array,recommendations:p().array,loading:p().bool,onSelectItemChange:p().func,onResetClick:p().func};var L=n(26525),k=n(18752),D=n(9704),I=n(44858),A=n(18938),M=n(63431);let q={sel_province:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_condition:{id:0,from:"weather_condition",label:o.MW.WAY_BELOW_NORMAL.label},loading:!1,error:""};var F=function(e){var t,n;let{provinces:l=[]}=e,[s,c]=(0,a.useState)(q),[d,u]=(0,a.useState)([]),[p,h]=(0,a.useState)({}),[m,g]=(0,a.useState)([]),[x,_]=(0,a.useState)([]),[v,f]=(0,a.useState)([]),[y,b]=(0,a.useState)(!0),j=(0,a.useRef)(!1),{cropList:C}=(0,D.Z)(),S=C.map((e,t)=>({disabled:!1,label:e,id:t})),{documents:Z,loading:R}=(0,A.m$)(L.M.WEATHER_FORECASTS,"mimaropa",L.M.SUB_SEASONAL,"name"),{cropcalendar:w,cropStages:E,loading:O}=(0,k.Z)("seasonal",s.sel_province,s.sel_crop),{recommendations:P,farmoperations:F,loading:W}=(0,I.Z)(p.code,null!==(n=null===(t=s.sel_stage)||void 0===t?void 0:t.code)&&void 0!==n?n:null,s.sel_crop,"seasonal");return(0,a.useEffect)(()=>{if(0!==w.length&&!y&&0!==d.length){let e=[];d.forEach(t=>{if(0===w.length)return;let n=w.data1[0][t.id].split(",");"none"===n[0]||e.includes(n[0])||e.push(n[0]),"none"===n[1]||e.includes(n[1])||e.push(n[1]);let i=w.data2[0][t.id].split(",");"none"===i[0]||e.includes(i[0])||e.push(i[0]),"none"===i[1]||e.includes(i[1])||e.push(i[1])}),f(e.map((e,t)=>({id:t,label:E[e].label,code:e})))}},[w,y,s.sel_crop,d,E]),(0,a.useEffect)(()=>{0===w.length&&P.length&&g(P)},[w,P]),(0,a.useEffect)(()=>(j.current=!0,()=>{j.current=!1}),[]),(0,a.useEffect)(()=>{l.length>0&&Z.length>0&&!R&&(_((0,r.m)(l)),u(Z[0].mos.reduce((e,t)=>(e.push({id:o.re[t.toUpperCase()].code,label:o.re[t.toUpperCase()].format,disabled:!1}),e),[])))},[l,Z,R]),(0,a.useEffect)(()=>{b(R||W||O)},[R,W,O]),(0,i.jsx)(T,{croppingCalendar:w,climateRisk:p.label,optsprovinces:x,optscrops:S,optsmonths:d,optscropstages:v,optsactivities:F,sel_options:s,recommendations:m,loading:y,seasonalMonths:d,onSelectItemChange:(e,t)=>{let{from:n,label:i}=t;if(m.length>0&&g([]),Object.keys(t).includes("id"))switch(n){case"province":f([]);let a=Z.find(e=>e.name===i);h((0,M.Z)(a.months,"seasonal")),c({...q,sel_province:i});break;case"crop":c({...s,sel_crop:i,sel_stage:null,sel_activity:null});break;case"cropstage":c({...s,sel_stage:t,sel_activity:null});break;case"activity":g(P.filter(e=>e.crop_stage===s.sel_stage.code&&e.farming_activity===i)),c({...s,sel_activity:i})}else"province"===n?(c(q),f([])):"crop"===n?(c({...s,sel_crop:null,sel_stage:null,sel_activity:null}),f([])):"cropstage"===n?c({...s,sel_stage:null,sel_activity:null}):"activity"===n&&c({...s,sel_activity:null})},onResetClick:()=>{c(q),f([]),g([])}})};let W=["sel_province","sel_municipality","sel_day","sel_crop","sel_month","sel_stage","sel_activity"];function N(e){var t,n;let[l,s]=(0,a.useState)(!1),{sel_options:r,loading:c,recommendations:u,weathertoday:p,warning:j}=e,{climateRisk:C,optsprovinces:w,optsmunicipalities:P,optsdays:T,optscrops:L,optscropstages:k,optsactivities:D}=e,{onSelectItemChange:I,onResetClick:A}=e;(0,a.useEffect)(()=>{null===r.sel_activity&&!0===l&&s(!1)},[r.sel_activity,l]);let M=()=>{let e="Loading...";return w.length>0&&(e=null===r.sel_province?"Select a province":"Province"),e};return(0,i.jsxs)(g.Z,{sx:{minHeight:"75vh"},id:"contents-tenday-recommendations",children:[(0,i.jsx)(f.Z,{variant:"h4",children:"10-Day Farm Weather Outlook and Advisory Recommendations"}),(0,i.jsx)(f.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,i.jsxs)(y.ZP,{container:!0,spacing:2,sx:O.container,children:[(0,i.jsxs)(y.ZP,{item:!0,xs:12,md:4,sx:O.selectContainer,children:[(0,i.jsxs)(g.Z,{sx:{minWidth:"100%",paddingRight:e=>e.spacing(2)},children:[(0,i.jsx)(m.Z,{disablePortal:!0,id:"province",value:r.sel_province,disabled:0===w.length||c,options:w,sx:O.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,i.jsx)(h.Z,{...e,label:M()}),isOptionEqualToValue:(e,t)=>e.label===t,onChange:(e,t)=>I(e,{...t,from:"province"})}),(0,i.jsx)(m.Z,{disablePortal:!0,id:"municipality",value:r.sel_municipality,disabled:0===P.length||c,options:P,sx:O.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,i.jsx)(h.Z,{...e,label:null===r.sel_municipality?"Select a municipality":"Municipality"}),isOptionEqualToValue:(e,t)=>e.label===t,getOptionDisabled:e=>e.disabled||void 0!==e.iscalendar,onChange:(e,t)=>I(e,{...t,from:"municipality"})}),r.sel_municipality&&(0,i.jsxs)(g.Z,{sx:{mt:2},children:[(0,i.jsx)(f.Z,{align:"center",variant:"body1",children:(0,i.jsx)("strong",{children:"Forecast Duration:"})}),(0,i.jsxs)(f.Z,{align:"center",variant:"body1",children:[null===(t=T[0])||void 0===t?void 0:t.label," to ",null===(n=T[9])||void 0===n?void 0:n.label]})]}),(0,i.jsx)(m.Z,{disablePortal:!0,id:"crop",value:r.sel_crop,disabled:0===L.length||null===r.sel_municipality||c,options:L,sx:O.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,i.jsx)(h.Z,{...e,label:null===r.sel_crop?"Select a crop type":"Crop"}),isOptionEqualToValue:(e,t)=>e.label===t,getOptionDisabled:e=>e.disabled,onChange:(e,t)=>I(e,{...t,from:"crop"})}),(0,i.jsx)(m.Z,{disablePortal:!0,id:"cropstage",value:r.sel_stage,disabled:0===k.length||c,options:k,sx:O.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,i.jsx)(h.Z,{...e,label:null===r.sel_stage?"Select a crop stage":"Crop Stage"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,onChange:(e,t)=>I(e,{...t,from:"cropstage"})}),0===k.length&&null!==r.sel_crop&&(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{variant:"caption",color:"orange",children:(0,i.jsxs)("strong",{children:["No crop stages for this ten day range for ",r.sel_crop,"."]})}),(0,i.jsx)("br",{}),(0,i.jsxs)(f.Z,{variant:"caption",children:["See\xa0",(0,i.jsx)(E(),{href:"/cropping-calendar-v2",passHref:!0,legacyBehavior:!0,children:(0,i.jsx)("a",{style:{color:"orange",fontWeight:600},target:"_blank",children:"Cropping Calendar"})}),"\xa0for reference."]})]}),(0,i.jsx)(m.Z,{disablePortal:!0,id:"activity",value:r.sel_activity,disabled:0===D.length||c,options:D,sx:O.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,i.jsx)(h.Z,{...e,label:null===r.sel_activity?"Select an activity":"Activity"}),isOptionEqualToValue:(e,t)=>e.label===t,onChange:(e,t)=>{I(e,{...t,from:"activity"}),s(!1)}}),(0,i.jsx)("div",{children:""!==r.error||""!==j?(0,i.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:r.error||j}):(0,i.jsx)("div",{children:"\xa0"})}),(0,i.jsxs)(_.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,i.jsx)(x.Z,{size:"medium",onClick:A,children:"Clear"}),(0,i.jsx)(x.Z,{size:"medium",variant:"contained",onClick:()=>s(e=>!e),disabled:null===r.sel_activity||l,children:"Finish"})]})]}),(0,i.jsx)("br",{}),(0,i.jsx)(v.Z,{}),(0,i.jsx)("br",{}),null!==p&&(0,i.jsxs)(g.Z,{sx:O.conditionLegend,style:{backgroundColor:o.tN[p.code],color:[o.MW.ABOVE_NORMAL.label,o.MW.WAY_BELOW_NORMAL.label].includes(p.code)?"#fff":"#000"},children:[(0,i.jsx)(f.Z,{variant:"subtitle2",children:"Rainfall Intensity for the Day"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:p.label_full}),(0,i.jsx)("br",{}),(0,i.jsx)("span",{children:p.rainfall})]})]}),""!==C&&(0,i.jsxs)(g.Z,{sx:O.conditionLegend,children:[(0,i.jsx)(f.Z,{variant:"subtitle2",children:"Climate Risk:"}),(0,i.jsx)("div",{children:C})]})]}),(0,i.jsx)(y.ZP,{item:!0,xs:12,md:8,sx:O.recsContainer,children:null!==r.sel_crop&&null!==r.sel_activity&&l?(0,i.jsx)(Z.Z,{impactOutlookOnly:!0,title:r.sel_crop,recommendations:u}):Object.values(r).filter(e=>e).length>1?(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:W.map((e,t)=>{var n,a;let l={from:e.slice(e.indexOf("_")+1),label:["sel_day","sel_stage"].includes(e)?null!==(a=null===(n=r[e])||void 0===n?void 0:n.label)&&void 0!==a?a:"":r[e]};return null!==r[e]&&void 0!==r[e]?(0,i.jsx)(S,{info:l,show:t<W.length-1,borderColor:"blue"},"card-opt-".concat(t)):(0,i.jsx)("div",{},"card-opt-".concat(t))})}):(0,i.jsxs)(g.Z,{sx:O.welcome,children:[(0,i.jsx)(d(),{unoptimized:!0,src:(0,R.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:R.imageLoader,alt:"Empty data"}),(0,i.jsx)(f.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,i.jsx)(f.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}N.propTypes={sel_options:p().object,optsprovinces:p().array,optsmunicipalities:p().array,optscrops:p().array,optsdays:p().array,optscropstages:p().array,optsactivities:p().array,recommendations:p().array,weathertoday:p().object,onSelectItemChange:p().func,onClickDateSelector:p().func,onResetClick:p().func};var z=n(63867),U=n(83074),H=n(92246);let V={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_day:null,sel_condition:{id:0,from:"weather_condition",label:null,date:new Date().toDateString()},loading:!1,error:"",warning:""};var B=function(e){var t,n;let{provinces:l=[]}=e,[s,o]=(0,a.useState)(V),[c,d]=(0,a.useState)({}),[u,p]=(0,a.useState)([]),[h,m]=(0,a.useState)(null),[g,x]=(0,a.useState)([]),[_,v]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),b=(0,a.useRef)(!1),{cropList:j}=(0,D.Z)(),C=j.map((e,t)=>({disabled:!1,label:e,id:t})),S=(0,z.Z)(s.sel_province,l),{recommendations:Z,farmoperations:R,loading:w}=(0,I.Z)(c.code,null!==(n=null===(t=s.sel_stage)||void 0===t?void 0:t.code)&&void 0!==n?n:null,s.sel_crop,"tenday"),{cropcalendar:E,cropStages:O,loading:P}=(0,k.Z)("10-day",s.sel_province,s.sel_crop),{days:T,loading:L,warning:A}=(0,U.Z)(s.sel_province,s.sel_municipality);(0,a.useEffect)(()=>{T.length>0&&d((0,M.Z)(T,"tenday"))},[T]),(0,a.useEffect)(()=>{if(T.length>0&&!P&&!w){let e=new Date(T[0].label_full),t=(0,H.Mn)(e);if(0!==E.length){let e=E.data1.find(e=>e.municipality===s.sel_municipality&&e.crop===s.sel_crop),n=E.data2.find(e=>e.municipality===s.sel_municipality&&e.crop===s.sel_crop),i=[];e&&n&&Object.keys(O).length>0&&(Object.keys(t).forEach(a=>{let l=e[a].split(",");t[a].forEach(e=>{"1st_half"===e&&"none"!==l[0]?i.includes(l[0])||i.push(l[0]):"2nd_half"!==e||"none"===l[1]||i.includes(l[1])||i.push(l[1])});let s=n[a].split(",");t[a].forEach(e=>{"1st_half"===e&&"none"!==s[0]?i.includes(s[0])||i.push(s[0]):"2nd_half"!==e||"none"===s[1]||i.includes(s[1])||i.push(s[1])})}),v(i.map((e,t)=>({id:t,label:O[e].label,code:e}))))}}},[O,E.length,E.data1,E.data2,T,s.sel_municipality,s.sel_crop,P,w]),(0,a.useEffect)(()=>(b.current=!0,()=>{b.current=!1}),[]),(0,a.useEffect)(()=>{l.length>0&&x((0,r.m)(l))},[l]),(0,a.useEffect)(()=>{y(L||w||P)},[L,w,P]);let q=(e,t)=>{let{from:n,label:i}=t;if(u.length>0&&p([]),Object.keys(t).includes("id"))switch(n){case"province":v([]),m(null),o({...V,sel_province:i});break;case"municipality":v([]),o({...s,sel_municipality:i,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null});break;case"day":v([]),m(T.find(e=>e.label===i)),o({...s,sel_day:t,sel_month:null,sel_crop:null,sel_stage:null,sel_activity:null});break;case"crop":v([]),o({...s,sel_crop:i,sel_month:null,sel_stage:null,sel_activity:null});break;case"cropstage":o({...s,sel_stage:t,sel_activity:null});break;case"activity":p(Z.filter(e=>e.crop_stage===s.sel_stage.code&&e.farming_activity===i)),o({...s,sel_activity:i})}else"province"===n?(o(V),v([])):"municipality"===n?(o({...s,sel_municipality:null,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null}),v([])):"day"===n?(o({...s,sel_day:null,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null}),v([])):"crop"===n?(o({...s,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null}),v([])):"cropstage"===n?o({...s,sel_stage:null,sel_activity:null}):"activity"===n&&o({...s,sel_activity:null})};return(0,i.jsx)(N,{climateRisk:c.label,optsprovinces:g,optsmunicipalities:S,optscrops:C,optsdays:T,optscropstages:_,optsactivities:R,sel_options:s,recommendations:u,weathertoday:h,loading:f,warning:A,onSelectItemChange:q,onClickDateSelector:e=>{let t=new Date(e).toDateString();q(null,{id:t=t.substring(0,t.length-5),label:t,full:new Date(e),from:"day"})},onResetClick:()=>{o(V),v([]),p([])}})},G=function(e){let{provinces:t=[]}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{sx:{boxShadow:"none"}}),(0,i.jsx)("div",{id:"seasonal-recommendations"}),(0,i.jsx)(s.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,i.jsx)(F,{provinces:t})}),(0,i.jsx)("div",{id:"resilient-practices"}),(0,i.jsx)(s.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,i.jsx)(B,{provinces:t})})]})},Y=n(48414),J=!0,X=function(e){let{media:t}=e,[n,s]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,l.$m)();s(e.data)}catch(e){}})()},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)(Y.Z,{title:"Agro-Climatic Advisory Portal - ".concat(o.Gt," (ACAP-").concat(o.Gt.toUpperCase(),") Crop Recommendations"),ogDescription:t.description,ogImageURL:t.url,ogURL:t.path,canonicalURL:t.path}),(0,i.jsx)(G,{provinces:n})]})}},9704:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(67294),a=n(61061);function l(){let[e,t]=(0,i.useState)([]),[n,l]=(0,i.useState)(!1),[s,o]=(0,i.useState)("");return(0,i.useEffect)(()=>{(async()=>{var e,n,i;try{l(!0);let n=await (0,a.TQ)();t(null!==(e=null==n?void 0:n.list)&&void 0!==e?e:[]),l(!1),o("")}catch(e){o(null!==(i=null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)&&void 0!==i?i:e.message),l(!1),t([])}})()},[]),{cropList:e,loading:n,error:s}}},63867:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(67294);function a(e,t){let[n,a]=(0,i.useState)([]);return(0,i.useEffect)(()=>{var n,i;a(e&&t&&null!==(i=null===(n=t.find(t=>t.label===e))||void 0===n?void 0:n.municipalities)&&void 0!==i?i:[])},[e,t]),n}},18938:function(e,t,n){"use strict";n.d(t,{Kx:function(){return o},ky:function(){return s},m$:function(){return r},tl:function(){return c}});var i=n(67294),a=n(36100),l=n(56871);function s(e,t){let[n,s]=(0,i.useState)(null),[o,r]=(0,i.useState)(!0),[c,d]=(0,i.useState)(""),u=(0,i.useRef)(!0);return(0,i.useEffect)(()=>((async()=>{try{let n=(0,a.JU)(l.db,e,t),i=await (0,a.QT)(n);u.current&&(i.exists()&&s(i.data()),r(!1))}catch(e){d(e.message),r(!1)}})(),()=>u.current=!1),[e,t]),[n,o,c]}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,[o,r]=(0,i.useState)([]),[c,d]=(0,i.useState)(!0),[u,p]=(0,i.useState)(""),h=(0,i.useRef)(!0);return(0,i.useEffect)(()=>((async()=>{try{let i=[(0,a.Xo)(t,"asc")];s>0&&i.push((0,a.b9)(s));let o=(0,a.hJ)(l.db,e),c=n||(0,a.IO)(o,...i),u=await (0,a.PL)(c);h.current&&(r(u.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,n,s]),{documents:o,loading:c,error:u}}function r(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",[o,r]=(0,i.useState)([]),[c,d]=(0,i.useState)(!0),[u,p]=(0,i.useState)(""),h=(0,i.useRef)(!0);return(0,i.useEffect)(()=>((async()=>{try{let i=(0,a.IO)((0,a.hJ)(l.db,e,t,n),(0,a.Xo)(s)),o=await (0,a.PL)(i);h.current&&(r(o.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,n,s]),{documents:o,loading:c,error:u}}function c(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4?arguments[4]:void 0,[r,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(!0),[p,h]=(0,i.useState)(""),m=(0,i.useRef)(!0);return(0,i.useEffect)(()=>((async()=>{try{let i=(0,a.hJ)(l.db,e,t,n);""!==s&&(i=(0,a.IO)(i,(0,a.Xo)(s))),o&&(i=(0,a.IO)(i,(0,a.b9)(o)));let r=await (0,a.PL)(i);m.current&&(c(r.docs.map(e=>({...e.data()}))),u(!1))}catch(e){h(e.message),u(!1)}})(),()=>m.current=!1),[e,t,n,s,o]),{documents:r,loading:d,error:p}}},83074:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(67294),a=n(9473),l=n(98813),s=n(61984),o=n(92246),r=n(25517);function c(e,t){let[n,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(null),[p,h]=(0,i.useState)(""),[m,g]=(0,i.useState)(""),[x,_]=(0,i.useState)(!1),v=(0,a.I0)(),{ids:f,status:y,entities:b,error:j}=(0,a.v9)(e=>e.tendayweather);return(0,i.useEffect)(()=>{null!==e&&(h(""),g(""),v((0,s.R)(e)))},[e,v]),(0,i.useEffect)(()=>{h(j)},[j]),(0,i.useEffect)(()=>{_(y===r.G.PENDING)},[y]),(0,i.useEffect)(()=>{if(h(""),g(""),y===r.G.FULLFILLED&&f.length>0&&""===j&&null!==t){let e=Object.values(b).find(e=>e.municipality===t);if(void 0!==e){let t=JSON.parse(e.data),n=Object.values(l.MW);c(t.reduce((e,i,a)=>{var l,s,r,c,d;return[...e,{id:a,label:i.day_format,label_full:null===(l=(0,o.Ay)(i.day_format,t[9].day_format))||void 0===l?void 0:l.toDateString(),rainfall:i.rainfall,forecast:null!==(c=null===(s=n.find(e=>e.tenday===i.rainfall))||void 0===s?void 0:s.sync)&&void 0!==c?c:"-",code:null!==(d=null===(r=n.find(e=>e.tenday===i.rainfall))||void 0===r?void 0:r.label)&&void 0!==d?d:"-"}]},[]));let i=new Date(1e3*t[0].date_start.seconds),a=(0,o.Mn)(i);i.getFullYear()!==new Date().getFullYear()&&h("Invalid year detected in the 10-day validity date range: ".concat(t[0].date_range)),u({months:a,date_start:i,date_range:t[0].date_range})}else{let e=j||"Weather data for the municipality is not available at the moment, however, you can continue viewing recommendations. Please verify that the municipality name is present in the 10-Day weather forecast.";j?(c([]),u(null),h(e)):g(e)}}},[t,b,f,y,j]),{days:n,summary:d,loading:x,error:p,warning:m}}},22088:function(e,t,n){"use strict";n.d(t,{fI:function(){return h},sT:function(){return p},$K:function(){return r},YH:function(){return d},O_:function(){return g},iR:function(){return u},Ee:function(){return c},vU:function(){return m}});var i=n(96171),a=n(78986);let l={CROP_REC_LIST_RECS_LITE:"n_list_crop_recommendations",CROP_REC_LIST_RECS_FORMATTED:"n_list_crop_recommendations_",CROP_REC_LIST:"n_crop_recommendations_",CROP_REC_SMS_LIST:"n_crop_recommendations_"};class s extends i.Z{constructor(...e){super(...e),this.getFormattedRecommendationsFromStages=async e=>{let t,{cropstages:n,forecast:i,type:s}=e;if(void 0===n||void 0===i)return;let o="".concat(l.CROP_REC_LIST_RECS_FORMATTED).concat(s),r=this.collection(this.db,o);return t=s===a.q.SEASONAL?this.query(r,this.where("crop_stage","in",n),this.where("forecast","==",i)):this.query(r,this.where("crop_stage","in",n)),await this.getCollectionData(o,"",t)},this.getFormattedRecommendations=async e=>{let t,{cropstage:n,forecast:i,type:s}=e;if(void 0===n||void 0===i)return;let o="".concat(l.CROP_REC_LIST_RECS_FORMATTED).concat(s),r=this.collection(this.db,o);return t=s===a.q.SEASONAL?this.query(r,this.where("crop_stage","==",n),this.where("forecast","==",i)):this.query(r,this.where("crop_stage","==",n)),await this.getCollectionData(o,"",t)},this.getCropRecommendationsLite=async e=>{let{type:t}=e;return await this.getDocumentData(l.CROP_REC_LIST_RECS_LITE,t)},this.getCropRecommendations=async e=>{let{crop:t,type:n}=e;if(!t||!n)return;let i="".concat(l.CROP_REC_LIST).concat(n),a=this.collection(this.db,i),s=this.query(a,this.where("crop","==",t));return await this.getCollectionDataWithID(i,"",s)},this.getRecommendations=async e=>{let t,{climateRisk:n,_cropStage:i,crop:a,type:s,multipleStages:o}=e;if(!n||!a)return;if(o){if(0===i.length)return}else if(!i)return;let r="".concat(l.CROP_REC_LIST).concat(s),c=this.collection(this.db,r);return t=o?this.query(c,this.where("climate_risk","==",n),this.where("crop_stage","in",i),this.where("crop","==",a)):this.query(c,this.where("climate_risk","==",n),this.where("crop_stage","==",i),this.where("crop","==",a)),await this.getCollectionData(r,"",t)},this.getSeasonalGeneralRecommendations=async e=>{let{climateRisk:t,crop:n}=e;if(!t||!n)return;let i="n_crop_recommendations_seasonal_general",a=this.collection(this.db,i),l=this.query(a,this.where("climate_risk","==",t),this.where("crop","==",n));return await this.getCollectionData(i,"",l)},this.getRecommendationsFlexible=async e=>{let{climateRisk:t,_cropStage:n,crop:i,type:a,multipleStages:s=!1}=e,o="".concat(l.CROP_REC_LIST).concat(a),r=this.collection(this.db,o);if(!i)return;let c=[this.where("crop","==",i)];t&&c.push(this.where("climate_risk","==",t)),n&&(s?c.push(this.where("crop_stage","in",n)):c.push(this.where("crop_stage","==",n)));let d=this.query(r,...c);return await this.getCollectionData(o,"",d)},this.getRecommendationsQuery=async e=>{let{type:t,queryFields:n=[]}=e;if(!t)throw Error("Missing parameter/s");let i="".concat(l.CROP_REC_LIST).concat(t),a=this.collection(this.db,i),s=n.map(e=>this.where(e.field,e.op,e.value)),o=this.query(a,...s);return await this.getCollectionData(i,"",o)},this.getRecommendationsSMS=async e=>{let{crop:t,climateRisk:n,type:i}=e;if(!t||!n||!i)return;let a="".concat(l.CROP_REC_SMS_LIST).concat(i),s=this.collection(this.db,a),o=this.query(s,this.where("crop","==",t),this.where("climate_risk","==",n));return await this.getCollectionData(a,"",o)},this.updateRecommendation=async e=>{let{type:t,newRecommendation:n}=e,i="".concat(l.CROP_REC_SMS_LIST).concat(t),a=this.collection(this.db,i),s=this.doc(a,n.docid);delete n.docid,await this.updateDoc(s,n)},this.createRecommendation=async e=>{let{type:t,recommendation:n}=e,i="".concat(l.CROP_REC_SMS_LIST).concat(t),a=this.collection(this.db,i);return await this.addDoc(a,n)}}}let o=new s;o.getFormattedRecommendations.bind(o),o.getFormattedRecommendationsFromStages.bind(o),o.getCropRecommendationsLite.bind(o);let r=o.getRecommendations.bind(o),c=o.getSeasonalGeneralRecommendations.bind(o),d=o.getRecommendationsFlexible.bind(o),u=o.getRecommendationsSMS.bind(o),p=o.getCropRecommendations.bind(o),h=o.createRecommendation.bind(o),m=o.updateRecommendation.bind(o),g=o.getRecommendationsQuery.bind(o)}},function(e){e.O(0,[3153,7023,3745,1664,6541,5837,1953,9031,2888,9774,179],function(){return e(e.s=49361)}),_N_E=e.O()}]);