(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3448],{27088:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test-location",function(){return r(59957)}])},39736:function(n,e,r){"use strict";r.d(e,{Z:function(){return s}});var t=r(34051),i=r.n(t),o=r(85893),a=r(67294);function l(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function u(n,e,r,t,i,o,a){try{var l=n[o](a),u=l.value}catch(c){return void r(c)}l.done?e(u):Promise.resolve(u).then(t,i)}function c(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var t,i,o=[],a=!0,l=!1;try{for(r=r.call(n);!(a=(t=r.next()).done)&&(o.push(t.value),!e||o.length!==e);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return l(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(n){var e,r,t=n.value,l=n.onChange,s=n.className,d=n.showLabels,f=void 0===d||d,v=n.placesURL,p=void 0===v?"/config/places.mimaropa.json":v,m=c(a.useState([]),2),h=m[0],y=m[1],b=c(a.useState(!0),2),x=b[0],g=b[1],j=c(a.useState(""),2),w=j[0],S=j[1],k=c(a.useState((null===t||void 0===t?void 0:t.province)||""),2),A=k[0],N=k[1],E=c(a.useState((null===t||void 0===t?void 0:t.municipality)||""),2),_=E[0],C=E[1];a.useEffect((function(){var n,e=!0;return(n=i().mark((function n(){var r,o,a,u,c,s,d,f,v;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,g(!0),S(""),n.next=6,fetch(p,{cache:"no-store"});case 6:if((o=n.sent).ok){n.next=9;break}throw new Error("HTTP ".concat(o.status));case 9:return n.next=11,o.json();case 11:if(a=n.sent,c=null!==(u=null===a||void 0===a?void 0:a.by_province)&&void 0!==u?u:[],Array.isArray(c)&&0!==c.length){n.next=16;break}throw new Error("Empty or invalid places data");case 16:if(e){n.next=18;break}return n.abrupt("return");case 18:y(c),s=(null===t||void 0===t?void 0:t.province)||c[0].name,f=null!==(d=null===(r=c.find((function(n){return n.name===s})))||void 0===r?void 0:r.municipalities)&&void 0!==d?d:[],v=(null===t||void 0===t?void 0:t.municipality)||f[0]||"",N(s),C(v),null===l||void 0===l||l({province:s,municipality:v}),n.next=33;break;case 28:if(n.prev=28,n.t0=n.catch(0),e){n.next=32;break}return n.abrupt("return");case 32:S("Failed to load places: ".concat(n.t0.message));case 33:return n.prev=33,e&&g(!1),n.finish(33);case 36:case"end":return n.stop()}}),n,null,[[0,28,33,36]])})),function(){var e=this,r=arguments;return new Promise((function(t,i){var o=n.apply(e,r);function a(n){u(o,t,i,a,l,"next",n)}function l(n){u(o,t,i,a,l,"throw",n)}a(void 0)}))})(),function(){e=!1}}),[p]);var T=null!==(r=null===(e=h.find((function(n){return n.name===A})))||void 0===e?void 0:e.municipalities)&&void 0!==r?r:[];return a.useEffect((function(){if(A&&0!==T.length)if(T.includes(_))null===l||void 0===l||l({province:A,municipality:_});else{var n=T[0];C(n),null===l||void 0===l||l({province:A,municipality:n})}}),[A,T.join("|")]),a.useEffect((function(){A&&_&&(null===l||void 0===l||l({province:A,municipality:_}))}),[_]),x?(0,o.jsx)("div",{className:s,children:"Loading locations\u2026"}):w?(0,o.jsx)("div",{className:s,style:{color:"red"},children:w}):(0,o.jsxs)("div",{className:s,children:[f&&(0,o.jsx)("label",{className:"block text-sm mb-1",children:"Province"}),(0,o.jsx)("select",{className:"w-full border rounded p-2 mb-3",value:A,onChange:function(n){return N(n.target.value)},children:h.map((function(n){return(0,o.jsx)("option",{value:n.name,children:n.name},n.name)}))}),f&&(0,o.jsx)("label",{className:"block text-sm mb-1",children:"Municipality/City"}),(0,o.jsx)("select",{className:"w-full border rounded p-2",value:_,onChange:function(n){return C(n.target.value)},children:T.map((function(n){return(0,o.jsx)("option",{value:n,children:n.replace(/\s*\(.*\)$/,"")},n)}))})]})}},59957:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return u}});var t=r(85893),i=r(67294),o=r(39736);function a(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function l(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var t,i,o=[],a=!0,l=!1;try{for(r=r.call(n);!(a=(t=r.next()).done)&&(o.push(t.value),!e||o.length!==e);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return a(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){var n=l(i.useState({}),2),e=n[0],r=n[1];return(0,t.jsxs)("div",{style:{padding:24,maxWidth:520},children:[(0,t.jsx)("h1",{style:{fontSize:20,marginBottom:12},children:"Test: LocationSelect"}),(0,t.jsx)(o.Z,{onChange:r}),(0,t.jsxs)("div",{style:{marginTop:16},children:[(0,t.jsxs)("div",{children:["Province: ",(0,t.jsx)("b",{children:e.province||"-"})]}),(0,t.jsxs)("div",{children:["Municipality: ",(0,t.jsx)("b",{children:e.municipality||"-"})]})]}),(0,t.jsx)("button",{style:{marginTop:20,padding:"8px 12px",border:"1px solid #ddd",borderRadius:6},onClick:function(){return alert(JSON.stringify(e,null,2))},children:"Submit (demo)"})]})}}},function(n){n.O(0,[9774,2888,179],(function(){return e=27088,n(n.s=e);var e}));var e=n.O();_N_E=e}]);