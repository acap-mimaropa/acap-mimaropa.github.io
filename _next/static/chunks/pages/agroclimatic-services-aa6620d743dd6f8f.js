(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6603],{49361:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return l(3604)}])},48414:function(e,t,l){"use strict";var n=l(85893),i=l(9008),a=l.n(i),o=l(98813);t.Z=function(e){let{title:t,ogDescription:l,ogImageURL:i,ogImgAlt:s="Picture",ogSiteName:r="ACAP-".concat(o.Gt.toUpperCase()),ogURL:c,canonicalURL:d="http://localhost"}=e;return(0,n.jsxs)(a(),{children:[(0,n.jsx)("meta",{name:"description",content:l}),(0,n.jsx)("meta",{rel:"canonical",href:d}),(0,n.jsx)("meta",{name:"og:description",content:l}),(0,n.jsx)("meta",{property:"og:title",content:t}),(0,n.jsx)("meta",{property:"og:site_name",content:r}),(0,n.jsx)("meta",{property:"og:image",content:i}),(0,n.jsx)("meta",{property:"og:image:width",content:"600"}),(0,n.jsx)("meta",{property:"og:image:height",content:"315"}),(0,n.jsx)("meta",{property:"og:image:alt",content:s}),(0,n.jsx)("meta",{property:"og:url",content:c}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{name:"twitter:title",content:t}),(0,n.jsx)("meta",{name:"twitter:image",content:i}),(0,n.jsx)("title",{children:t})]})}},2052:function(e,t,l){"use strict";var n=l(85893),i=l(93454);t.Z=function(e){return(0,n.jsx)(i.Z,{...e,elevation:15})}},42823:function(e,t,l){"use strict";l.d(t,{Z:function(){return d}});var n=l(85893),i=l(25675),a=l.n(i),o=l(60990),s=l(96788),r=l(71604),c={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},d=function(e){let{message:t="Failed to load data",style:l={}}=e;return(0,n.jsxs)(o.Z,{sx:c,style:l,children:[(0,n.jsx)(a(),{unoptimized:!0,src:(0,r.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:r.imageLoader,alt:"Empty data"}),(0,n.jsx)(s.Z,{variant:"subtitle1",children:t})]})}},56112:function(e,t,l){"use strict";var n=l(85893),i=l(93454);let a=(0,l(77527).ZP)(e=>(0,n.jsx)(i.Z,{...e}))(e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:t.spacing(1),boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}});t.Z=a},3604:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSG:function(){return en},default:function(){return ei}});var n=l(85893),i=l(67294),a=l(97416),o=l(56112),s=l(98813),r=l(25675),c=l.n(r),d=l(45697),u=l.n(d),p=l(26541),h=l(25837),g=l(60990),m=l(51015),v=l(49986),f=l(56912),_=l(96788),x=l(68573),b=l(2052),y=l(84630),j={container:{display:"flex",flexDirection:"column"},cardContainer:{display:{xs:"none",md:"grid"},"& h6":{fontSize:"1.2rem",lineHeight:"1.6rem"},"& h6:nth-of-type(2)":{fontWeight:"bold"},placeContent:"center",width:"100%",maxWidth:"430px",minHeight:"85px",border:"2px solid #cc00cc",borderRadius:"40px",padding:e=>e.spacing(2),margin:"auto",marginBottom:"6px",marginTop:"6px",textAlign:"center",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px !important"},arrowIcon:{margin:"auto",color:"#cc00cc",display:{xs:"none",md:"block"}}},S=function(e){let{info:t,show:l=!0,borderColor:i="#cc00cc"}=e;return(0,n.jsxs)(g.Z,{sx:j.container,children:[(0,n.jsxs)(g.Z,{sx:j.cardContainer,style:{borderColor:i},children:[(0,n.jsx)(_.Z,{variant:"subtitle1",children:"You have selected ".concat("cropstage"===t.from?"crop stage":t.from)}),(0,n.jsx)(_.Z,{variant:"subtitle1",children:t.label})]}),l&&(0,n.jsx)(y.Z,{size:24,sx:j.arrowIcon,style:{color:i}})]})},C=l(29455),Z=l(71604),w=l(41664),R=l.n(w),E={container:{marginTop:e=>e.spacing(3),minHeight:"400px"},selectContainer:{borderRight:{sm:"none",md:"1px solid gray"}},recsContainer:{marginTop:"-24px",paddingLeft:{sm:"none",md:"54px !important"},"& .toggleButton":{float:"right",width:"80px"}},autocomplete:{maxWidth:{xs:"100%",md:"300px"},paddingTop:e=>e.spacing(2)},conditionLegend:{maxWidth:{sm:"100%"},margin:{md:"24px"},marginBottom:"32px",padding:e=>e.spacing(1),borderRadius:"4px",border:"1px solid grey",textAlign:"center"},welcome:{display:"grid",placeContent:"center",marginTop:e=>e.spacing(10),textAlign:"center","& h5":{marginTop:e=>e.spacing(2)}}},O=l(13311);function L(e){return"object"==typeof e&&null!==e?e.label:e}let P=["sel_province","sel_crop","sel_stage","sel_activity"];function T(e){var t,l,a,o;let[s,r]=(0,i.useState)(!1),{sel_options:d}=e,{climateRisk:u,seasonalMonths:y,optsprovinces:j,optscrops:w,optsmonths:T,optscropstages:k,optsactivities:D}=e,{onSelectItemChange:I,onResetClick:A}=e,{croppingCalendar:F,recommendations:M,loading:q}=e;(0,i.useEffect)(()=>{null===d.sel_activity&&!0===s&&0!==F.length&&r(!1)},[d.sel_activity,s,F]);let N=()=>{let e="Loading...";return j.length>0&&(e=null===d.sel_province?"Select a province":"Province"),e};return(0,n.jsxs)(g.Z,{sx:{minHeight:"75vh"},id:"contents-seasonal-recommendations",children:[(0,n.jsx)(_.Z,{variant:"h4",children:"Seasonal Recommendations"}),(0,n.jsx)(_.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,n.jsxs)(x.ZP,{container:!0,spacing:2,sx:E.container,children:[(0,n.jsxs)(x.ZP,{item:!0,xs:12,md:4,sx:E.selectContainer,children:[(0,n.jsxs)(g.Z,{sx:{paddingRight:e=>e.spacing(2),wdith:"100%"},children:[(0,n.jsx)(h.Z,{disablePortal:!0,id:"seasonal-province",value:d.sel_province?{...d.sel_province,label:(0,O.c)(d.sel_province.label)}:null,disabled:0===j.length,options:j.map(e=>({...e,label:(0,O.c)(e.label)})),sx:E.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,n.jsx)(p.Z,{...e,label:N()}),getOptionLabel:e=>{var t,l;return null!==(l=null!==(t=null==e?void 0:e.label)&&void 0!==t?t:e)&&void 0!==l?l:""},isOptionEqualToValue:(e,t)=>e.id===(null==t?void 0:t.id)&&e.label===(null==t?void 0:t.label),onChange:(e,t)=>{t?I(e,{id:t.id,label:t.label,from:"province"}):I(e,{from:"province"})}}),d.sel_province&&(0,n.jsxs)(g.Z,{sx:{mt:2},children:[(0,n.jsx)(_.Z,{align:"center",variant:"body1",children:(0,n.jsx)("strong",{children:"Seasonal Forecast Duration:"})}),(0,n.jsxs)(_.Z,{align:"center",variant:"body1",children:[null===(t=y[0])||void 0===t?void 0:t.label," to ",null===(l=y[5])||void 0===l?void 0:l.label]})]}),(0,n.jsx)(h.Z,{disablePortal:!0,id:"seasonal-crop",value:d.sel_crop,disabled:0===w.length||q||null===d.sel_province,options:w,sx:E.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,n.jsx)(p.Z,{...e,label:null===d.sel_crop?"Select a crop type":"Crop"}),getOptionLabel:e=>{var t,l;return null!==(l=null!==(t=null==e?void 0:e.label)&&void 0!==t?t:e)&&void 0!==l?l:""},isOptionEqualToValue:(e,t)=>e.label===(null==t?void 0:t.label),getOptionDisabled:e=>e.disabled,onChange:(e,t)=>{t?I(e,{id:t.id,label:t.label,from:"crop"}):I(e,{from:"crop"})}}),0===k.length&&null!==d.sel_crop&&!q&&(0,n.jsxs)("div",{children:[(0,n.jsx)(_.Z,{variant:"caption",color:"orange",children:(0,n.jsxs)("strong",{children:["No crop stages for this seasonal range for"," ",L(d.sel_crop),"."]})}),(0,n.jsx)("br",{}),(0,n.jsxs)(_.Z,{variant:"caption",children:["See\xa0",(0,n.jsx)(R(),{href:"/cropping-calendar-v2",passHref:!0,legacyBehavior:!0,children:(0,n.jsx)("a",{style:{color:"orange",fontWeight:600},target:"_blank",children:"Cropping Calendar"})}),"\xa0for reference."]})]}),(0,n.jsx)(h.Z,{disablePortal:!0,id:"seasonal-cropstage",value:d.sel_stage,disabled:0===k.length||q,options:k,sx:E.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,n.jsx)(p.Z,{...e,label:null===d.sel_stage?"Select a crop stage":"Crop Stage"}),getOptionLabel:e=>{var t,l;return null!==(l=null!==(t=null==e?void 0:e.label)&&void 0!==t?t:e)&&void 0!==l?l:""},isOptionEqualToValue:(e,t)=>e.label===(null==t?void 0:t.label),getOptionDisabled:e=>e.disabled,onChange:(e,t)=>{t?I(e,{id:t.id,label:t.label,from:"cropstage"}):I(e,{from:"cropstage"})}}),(0,n.jsx)(h.Z,{disablePortal:!0,id:"seasonal-activity",value:d.sel_activity,disabled:null===d.sel_stage||q,options:D,sx:E.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,n.jsx)(p.Z,{...e,label:null===d.sel_activity?"Select an activity":"Activity"}),getOptionLabel:e=>{var t,l;return null!==(l=null!==(t=null==e?void 0:e.label)&&void 0!==t?t:e)&&void 0!==l?l:""},isOptionEqualToValue:(e,t)=>e.label===(null==t?void 0:t.label),onChange:(e,t)=>{t?I(e,{id:t.id,label:t.label,from:"activity"}):I(e,{from:"activity"}),r(!1)}}),(0,n.jsx)("div",{children:""!==d.error?(0,n.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:d.error}):(0,n.jsx)("div",{children:"\xa0"})}),(0,n.jsxs)(v.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,n.jsx)(m.Z,{size:"medium",disabled:q,onClick:A,children:"Clear"}),(0,n.jsx)(m.Z,{size:"medium",variant:"contained",onClick:()=>r(e=>!e),disabled:null===d.sel_activity&&!M.length||s,children:"Finish"})]})]}),(0,n.jsx)("br",{}),(0,n.jsx)(f.Z,{}),(0,n.jsx)("br",{}),""!==u&&T.length>0&&(0,n.jsxs)(g.Z,{sx:E.conditionLegend,children:[(0,n.jsxs)(_.Z,{variant:"body2",children:["Climate Risk for the season"," ",(0,n.jsx)("strong",{children:null===(a=T[0])||void 0===a?void 0:a.label})," to"," ",(0,n.jsx)("strong",{children:null===(o=T[5])||void 0===o?void 0:o.label}),":"]}),(0,n.jsx)("div",{children:u})]})]}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:8,sx:E.recsContainer,children:null!==d.sel_crop&&(null!==d.sel_activity||M.length)&&s?(0,n.jsx)(C.Z,{impactOutlookOnly:!0,title:L(d.sel_crop),recommendations:M}):Object.values(d).filter(e=>e).length>1?(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:P.map((e,t)=>{let l={from:e.slice(e.indexOf("_")+1),label:L(d[e])};return null!==d[e]&&void 0!==d[e]?(0,n.jsx)(S,{info:l,show:t<P.length-1},"card-opt-".concat(t)):(0,n.jsx)("div",{},"card-opt-".concat(t))})}):(0,n.jsxs)(g.Z,{sx:E.welcome,children:[(0,n.jsx)(c(),{unoptimized:!0,src:(0,Z.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:Z.imageLoader,alt:"Empty data"}),(0,n.jsx)(_.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,n.jsx)(_.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}T.propTypes={sel_options:u().object,optsprovinces:u().array,optscrops:u().array,optsmonths:u().array,optscropstages:u().array,optsactivities:u().array,seasonalMonths:u().array,recommendations:u().array,loading:u().bool,onSelectItemChange:u().func,onResetClick:u().func};var k=l(26525),D=l(18752),I=l(9704),A=l(44858),F=l(18938),M=l(63431);let q={sel_province:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_condition:{id:0,from:"weather_condition",label:s.MW.WAY_BELOW_NORMAL.label},loading:!1,error:""},N=e=>String(null!=e?e:"").toLowerCase().replace(/[^a-z0-9]+/g,""),W=(e,t)=>{let l=String(null!=e?e:"").split(/[,/|]/).map(e=>N(e)).filter(Boolean),n=[null==t?void 0:t.code,null==t?void 0:t.label].map(e=>N(e)).filter(Boolean);return l.some(e=>n.some(t=>e===t||e.includes(t)||t.includes(e)))},z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Set,l=e=>String(null!=e?e:"").replace(/<[^>]*>/g," ").replace(/&nbsp;/gi," ").replace(/\s+/g," ").trim().toLowerCase();return e.filter(e=>{let n=[l(e.management_recommendations_english),l(e.management_recommendations_tagalog)].join("||");return!t.has(n)&&(t.add(n),!0)})};var B=function(e){var t,l,a,o;let{provinces:r=[]}=e,[c,d]=(0,i.useState)(q),[u,p]=(0,i.useState)([]),[h,g]=(0,i.useState)({}),[m,v]=(0,i.useState)([]),[f,_]=(0,i.useState)([]),[x,b]=(0,i.useState)([]),[y,j]=(0,i.useState)(!0),S=(0,i.useRef)(!1),{cropList:C}=(0,I.Z)(),Z=C.map((e,t)=>({disabled:!1,label:e,id:t})),{documents:w,loading:R}=(0,F.m$)(k.M.WEATHER_FORECASTS,"mimaropa",k.M.SUB_SEASONAL,"name"),{cropcalendar:E,cropStages:L,loading:P}=(0,D.Z)("seasonal",(null===(t=c.sel_province)||void 0===t?void 0:t.label)?(0,O.c)(c.sel_province.label):null,(null===(l=c.sel_crop)||void 0===l?void 0:l.label)?(0,O.c)(c.sel_crop.label):null),{recommendations:N,farmoperations:B,loading:U}=(0,A.Z)(h.code,null!==(o=c.sel_stage)&&void 0!==o?o:null,(null===(a=c.sel_crop)||void 0===a?void 0:a.label)?(0,O.c)(c.sel_crop.label):null,"seasonal");return(0,i.useEffect)(()=>{if(E&&(Array.isArray(E)?0!==E.length:Object.keys(E).length>0)&&!y){var e,t;let l=u.length>0?u:Object.values(s.re).map(e=>({id:e.code,label:e.format})),n=E.data1||[],i=E.data2||[],a=null===(e=c.sel_province)||void 0===e?void 0:e.label,o=null===(t=c.sel_crop)||void 0===t?void 0:t.label,r=n.find(e=>e&&(0,O.c)(e.province)===(0,O.c)(a)&&(0,O.c)(e.crop)===(0,O.c)(o)),d=i.find(e=>e&&(0,O.c)(e.province)===(0,O.c)(a)&&(0,O.c)(e.crop)===(0,O.c)(o));if(!r&&!d){b([]);return}let p=[];l.forEach(e=>{try{var t,l,n,i;if(r){let n=null!==(l=null===(t=r[e.id])||void 0===t?void 0:t.split(","))&&void 0!==l?l:[];n[0]&&"none"!==n[0]&&!p.includes(n[0])&&p.push(n[0]),n[1]&&"none"!==n[1]&&!p.includes(n[1])&&p.push(n[1])}if(d){let t=null!==(i=null===(n=d[e.id])||void 0===n?void 0:n.split(","))&&void 0!==i?i:[];t[0]&&"none"!==t[0]&&!p.includes(t[0])&&p.push(t[0]),t[1]&&"none"!==t[1]&&!p.includes(t[1])&&p.push(t[1])}}catch(t){console.error("Error processing seasonal crop stage data for month",e.id,t,{data:E})}}),p.length>0&&L&&Object.keys(L).length>0?b(p.map((e,t)=>{var l,n;return{id:t,label:null!==(n=null===(l=L[e])||void 0===l?void 0:l.label)&&void 0!==n?n:e,code:e}})):b([])}},[E,y,c.sel_crop,u,L]),(0,i.useEffect)(()=>{0===E.length&&N.length&&v(N)},[E,N]),(0,i.useEffect)(()=>(S.current=!0,()=>{S.current=!1}),[]),(0,i.useEffect)(()=>{r.length>0&&_(r),w.length>0&&!R&&p(w[0].mos.reduce((e,t)=>(e.push({id:s.re[t.toUpperCase()].code,label:s.re[t.toUpperCase()].format,disabled:!1}),e),[]))},[r,w,R]),(0,i.useEffect)(()=>{j(U||P)},[U,P]),(0,n.jsx)(T,{croppingCalendar:E,climateRisk:h.label,optsprovinces:f,optscrops:Z,optsmonths:u,optscropstages:x,optsactivities:B,sel_options:c,recommendations:m,loading:y,seasonalMonths:u,onSelectItemChange:(e,t)=>{let{from:l,label:n}=t;if(m.length>0&&v([]),Object.keys(t).includes("id"))switch(l){case"province":b([]);let i=w.find(e=>(0,O.c)(e.name)===(0,O.c)(n));i&&i.months&&g((0,M.Z)(i.months,"seasonal")),d({...q,sel_province:t});break;case"crop":d({...c,sel_crop:t,sel_stage:null,sel_activity:null});break;case"cropstage":d({...c,sel_stage:t,sel_activity:null});break;case"activity":let a=N.filter(e=>W(e.crop_stage,c.sel_stage)&&e.farming_activity===n),o=N.filter(e=>e.farming_activity===n&&(!(null==h?void 0:h.code)||e.climate_risk===h.code));v(z(a.length>0?a:o)),d({...c,sel_activity:t})}else"province"===l?(d(q),b([])):"crop"===l?(d({...c,sel_crop:null,sel_stage:null,sel_activity:null}),b([])):"cropstage"===l?d({...c,sel_stage:null,sel_activity:null}):"activity"===l&&d({...c,sel_activity:null})},onResetClick:()=>{d(q),b([]),v([])}})};function U(e){return"object"==typeof e&&null!==e?e.label:e}let H=["sel_province","sel_municipality","sel_day","sel_crop","sel_month","sel_stage","sel_activity"];function V(e){var t,l;let{sel_options:a,loading:o,recommendations:r,weathertoday:d,warning:u,climateRisk:y,optsprovinces:j,optsmunicipalities:w,optsdays:L,optscrops:P,optscropstages:T,optsactivities:k,onSelectItemChange:D,onResetClick:I}=e,[A,F]=(0,i.useState)(!1),M=!o&&0===j.length;(0,i.useEffect)(()=>{null===a.sel_activity&&!0===A&&F(!1)},[a.sel_activity,A]);let q=()=>{let e="Loading...";return j.length>0&&(e=null===a.sel_province?"Select a province":"Province"),e};return(0,n.jsxs)(g.Z,{sx:{minHeight:"75vh"},id:"contents-tenday-recommendations",children:[(0,n.jsx)(_.Z,{variant:"h4",children:"10-Day Farm Weather Outlook and Advisory Recommendations"}),(0,n.jsx)(_.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,n.jsxs)(x.ZP,{container:!0,spacing:2,sx:E.container,children:[M&&(0,n.jsx)(g.Z,{sx:{color:"red",mb:2},children:(0,n.jsx)(_.Z,{variant:"body2",children:"Error: No provinces found. Please check your Firestore data or network connection."})}),(0,n.jsxs)(x.ZP,{item:!0,xs:12,md:4,sx:E.selectContainer,children:[(0,n.jsxs)(g.Z,{sx:{minWidth:"100%",paddingRight:e=>e.spacing(2)},children:[(0,n.jsx)(h.Z,{disablePortal:!0,id:"tenday-province",value:a.sel_province||null,disabled:0===j.length,options:j,sx:E.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,n.jsx)(p.Z,{...e,label:q()}),getOptionLabel:e=>e&&e.label?(0,O.c)(e.label):"",isOptionEqualToValue:(e,t)=>e&&t&&e.id===t.id,onChange:(e,t)=>{t?D(e,{id:t.id,label:t.label,from:"province"}):D(e,{from:"province"})}}),(0,n.jsx)(h.Z,{disablePortal:!0,id:"tenday-municipality",value:a.sel_municipality||null,disabled:0===w.length||o,options:w,sx:E.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,n.jsx)(p.Z,{...e,label:null===a.sel_municipality?"Select a municipality":"Municipality"}),getOptionLabel:e=>e&&e.label?(0,O.c)(e.label):"",isOptionEqualToValue:(e,t)=>e&&t&&e.id===t.id,getOptionDisabled:e=>e.disabled||void 0!==e.iscalendar,onChange:(e,t)=>{t?D(e,{id:t.id,label:t.label,from:"municipality"}):D(e,{from:"municipality"})}}),a.sel_municipality&&(0,n.jsxs)(g.Z,{sx:{mt:2},children:[(0,n.jsx)(_.Z,{align:"center",variant:"body1",children:(0,n.jsx)("strong",{children:"Forecast Duration:"})}),(0,n.jsxs)(_.Z,{align:"center",variant:"body1",children:[null===(t=L[0])||void 0===t?void 0:t.label," to ",null===(l=L[9])||void 0===l?void 0:l.label]})]}),(0,n.jsx)(h.Z,{disablePortal:!0,id:"tenday-crop",value:a.sel_crop,disabled:0===P.length||null===a.sel_municipality||o,options:P,sx:E.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,n.jsx)(p.Z,{...e,label:null===a.sel_crop?"Select a crop type":"Crop"}),getOptionLabel:e=>{var t,l;return null!==(l=null!==(t=null==e?void 0:e.label)&&void 0!==t?t:e)&&void 0!==l?l:""},isOptionEqualToValue:(e,t)=>e.label===(null==t?void 0:t.label),getOptionDisabled:e=>e.disabled,onChange:(e,t)=>{t?D(e,{id:t.id,label:t.label,from:"crop"}):D(e,{from:"crop"})}}),(0,n.jsx)(h.Z,{disablePortal:!0,id:"tenday-cropstage",value:a.sel_stage,disabled:0===T.length||o,options:T,sx:E.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,n.jsx)(p.Z,{...e,label:null===a.sel_stage?"Select a crop stage":"Crop Stage"}),getOptionLabel:e=>{var t,l;return null!==(l=null!==(t=null==e?void 0:e.label)&&void 0!==t?t:e)&&void 0!==l?l:""},isOptionEqualToValue:(e,t)=>e.label===(null==t?void 0:t.label),getOptionDisabled:e=>e.disabled,onChange:(e,t)=>{t?D(e,{id:t.id,label:t.label,from:"cropstage"}):D(e,{from:"cropstage"})}}),0===T.length&&null!==a.sel_crop&&!o&&(0,n.jsxs)("div",{children:[(0,n.jsx)(_.Z,{variant:"caption",color:"orange",children:(0,n.jsxs)("strong",{children:["No crop stages for this ten day range for ",U(a.sel_crop),"."]})}),(0,n.jsx)("br",{}),(0,n.jsxs)(_.Z,{variant:"caption",children:["See\xa0",(0,n.jsx)(R(),{href:"/cropping-calendar-v2",passHref:!0,legacyBehavior:!0,children:(0,n.jsx)("a",{style:{color:"orange",fontWeight:600},target:"_blank",children:"Cropping Calendar"})}),"\xa0for reference."]})]}),(0,n.jsx)(h.Z,{disablePortal:!0,id:"tenday-activity",value:a.sel_activity,disabled:null===a.sel_stage||o,options:k,sx:E.autocomplete,PaperComponent:b.Z,renderInput:e=>(0,n.jsx)(p.Z,{...e,label:null===a.sel_activity?"Select an activity":"Activity"}),getOptionLabel:e=>{var t,l;return null!==(l=null!==(t=null==e?void 0:e.label)&&void 0!==t?t:e)&&void 0!==l?l:""},isOptionEqualToValue:(e,t)=>e.label===(null==t?void 0:t.label),onChange:(e,t)=>{t?D(e,{id:t.id,label:t.label,from:"activity"}):D(e,{from:"activity"}),F(!1)}}),(0,n.jsx)("div",{children:""!==a.error||""!==u?(0,n.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:a.error||u}):(0,n.jsx)("div",{children:"\xa0"})}),(0,n.jsxs)(v.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,n.jsx)(m.Z,{size:"medium",onClick:I,children:"Clear"}),(0,n.jsx)(m.Z,{size:"medium",variant:"contained",onClick:()=>F(e=>!e),disabled:null===a.sel_activity||A,children:"Finish"})]})]}),(0,n.jsx)("br",{}),(0,n.jsx)(f.Z,{}),(0,n.jsx)("br",{}),null!==d&&(0,n.jsxs)(g.Z,{sx:E.conditionLegend,style:{backgroundColor:s.tN[d.code],color:[s.MW.ABOVE_NORMAL.label,s.MW.WAY_BELOW_NORMAL.label].includes(d.code)?"#fff":"#000"},children:[(0,n.jsx)(_.Z,{variant:"subtitle2",children:"Rainfall Intensity for the Day"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:d.label_full}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:d.rainfall})]})]}),""!==y&&(0,n.jsxs)(g.Z,{sx:E.conditionLegend,children:[(0,n.jsx)(_.Z,{variant:"subtitle2",children:"Climate Risk:"}),(0,n.jsx)("div",{children:y})]})]}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:8,sx:E.recsContainer,children:null!==a.sel_crop&&null!==a.sel_activity&&A?(0,n.jsx)(C.Z,{impactOutlookOnly:!0,title:U(a.sel_crop),recommendations:r}):Object.values(a).filter(e=>e).length>1?(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:H.map((e,t)=>{let l={from:e.slice(e.indexOf("_")+1),label:U(a[e])};return null!==a[e]&&void 0!==a[e]?(0,n.jsx)(S,{info:l,show:t<H.length-1,borderColor:"blue"},"card-opt-".concat(t)):(0,n.jsx)("div",{},"card-opt-".concat(t))})}):(0,n.jsxs)(g.Z,{sx:E.welcome,children:[(0,n.jsx)(c(),{unoptimized:!0,src:(0,Z.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:Z.imageLoader,alt:"Empty data"}),(0,n.jsx)(_.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,n.jsx)(_.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}V.propTypes={sel_options:u().object,optsprovinces:u().array,optsmunicipalities:u().array,optscrops:u().array,optsdays:u().array,optscropstages:u().array,optsactivities:u().array,recommendations:u().array,weathertoday:u().object,onSelectItemChange:u().func,onClickDateSelector:u().func,onResetClick:u().func};var G=l(63867),J=l(83074),Y=l(92246);let X={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_day:null,sel_condition:{id:0,from:"weather_condition",label:null,date:new Date().toDateString()},loading:!1,error:"",warning:""},Q=e=>String(null!=e?e:"").toLowerCase().replace(/[^a-z0-9]+/g,""),$=(e,t)=>{let l=String(null!=e?e:"").split(/[,/|]/).map(e=>Q(e)).filter(Boolean),n=[null==t?void 0:t.code,null==t?void 0:t.label].map(e=>Q(e)).filter(Boolean);return l.some(e=>n.some(t=>e===t||e.includes(t)||t.includes(e)))},K=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Set,l=e=>String(null!=e?e:"").replace(/<[^>]*>/g," ").replace(/&nbsp;/gi," ").replace(/\s+/g," ").trim().toLowerCase();return e.filter(e=>{let n=[l(e.management_recommendations_english),l(e.management_recommendations_tagalog)].join("||");return!t.has(n)&&(t.add(n),!0)})};var ee=function(e){var t,l,a,o,s,r;let{provinces:c=[]}=e,[d,u]=(0,i.useState)(X);(0,i.useEffect)(()=>{},[c]),(0,i.useEffect)(()=>{},[d.sel_province]);let[p,h]=(0,i.useState)({}),[g,m]=(0,i.useState)([]),[v,f]=(0,i.useState)(null),[_,x]=(0,i.useState)([]),[b,y]=(0,i.useState)([]),[j,S]=(0,i.useState)(!0),C=(0,i.useRef)(!1),{cropList:Z}=(0,I.Z)(),w=Z.map((e,t)=>({disabled:!1,label:e,id:t})),R=(0,G.Z)(d.sel_province,c),{recommendations:E,farmoperations:L,loading:P}=(0,A.Z)(p.code,null!==(r=d.sel_stage)&&void 0!==r?r:null,(null===(t=d.sel_crop)||void 0===t?void 0:t.label)?(0,O.c)(d.sel_crop.label):null,"tenday"),{cropcalendar:T,cropStages:k,loading:F}=(0,D.Z)("10-day",(null===(l=d.sel_province)||void 0===l?void 0:l.label)?(0,O.c)(d.sel_province.label):null,(null===(a=d.sel_crop)||void 0===a?void 0:a.label)?(0,O.c)(d.sel_crop.label):null),{days:q,loading:N,warning:W}=(0,J.Z)((null===(o=d.sel_province)||void 0===o?void 0:o.label)?(0,O.c)(d.sel_province.label):null,(null===(s=d.sel_municipality)||void 0===s?void 0:s.label)?(0,O.c)(d.sel_municipality.label):null);(0,i.useEffect)(()=>{q.length>0&&h((0,M.Z)(q,"tenday"))},[q]),(0,i.useEffect)(()=>{if(q.length>0&&!F&&!P){let l=new Date(q[0].label_full),n=(0,Y.Mn)(l);if(T&&(Array.isArray(T)?0!==T.length:Object.keys(T).length>0)){var e,t;let l=null===(e=d.sel_municipality)||void 0===e?void 0:e.label,i=null===(t=d.sel_crop)||void 0===t?void 0:t.label;console.log("calendarData2 structure:",{calendarData2:T,municipalityName:l,cropName:i,hasData1:!!T.data1,hasData2:!!T.data2}),console.log("Looking for: municipality =",l,", crop =",i);let a=T.data1||[],o=T.data2||[];console.log("data1 records:",a.length),a.length>0&&console.log("First data1 record:",JSON.stringify(a[0],null,2)),console.log("data2 records:",o.length),o.length>0&&console.log("First data2 record:",JSON.stringify(o[0],null,2));let s=a.find(e=>e&&(0,O.c)(e.municipality)===(0,O.c)(l)&&(0,O.c)(e.crop)===(0,O.c)(i)),r=o.find(e=>e&&(0,O.c)(e.municipality)===(0,O.c)(l)&&(0,O.c)(e.crop)===(0,O.c)(i));console.log("Search results:",{found1:!!s,found2:!!r,searchingFor:{municipality:(0,O.c)(l),crop:(0,O.c)(i)},sample1:a[0]?{municipality:a[0].municipality,crop:a[0].crop}:null,sample2:o[0]?{municipality:o[0].municipality,crop:o[0].crop}:null});let c=[];if(s&&r&&Object.keys(k).length>0)try{if(Object.keys(n).forEach(e=>{var t,l,i,a;let o=null!==(i=null===(t=s[e])||void 0===t?void 0:t.split(","))&&void 0!==i?i:[];n[e].forEach(e=>{"1st_half"===e&&o[0]&&"none"!==o[0]?c.includes(o[0])||c.push(o[0]):"2nd_half"===e&&o[1]&&"none"!==o[1]&&!c.includes(o[1])&&c.push(o[1])});let d=null!==(a=null===(l=r[e])||void 0===l?void 0:l.split(","))&&void 0!==a?a:[];n[e].forEach(e=>{"1st_half"===e&&d[0]&&"none"!==d[0]?c.includes(d[0])||c.push(d[0]):"2nd_half"===e&&d[1]&&"none"!==d[1]&&!c.includes(d[1])&&c.push(d[1])})}),c.length>0){let e=c.map((e,t)=>{var l,n;return{id:t,label:null!==(n=null===(l=k[e])||void 0===l?void 0:l.label)&&void 0!==n?n:e,code:e}});y(e)}else console.warn("No crop stages found for month range"),y([])}catch(e){console.error("Error processing tenday crop stages",e),y([])}else s&&r||console.warn("Municipality calendar data not found",{municipalCalendar1:s,municipalCalendar2:r,municipalityName:l,cropName:i}),y([])}}},[k,T.length,T.data1,T.data2,q,d.sel_municipality,d.sel_crop,F,P]),(0,i.useEffect)(()=>(C.current=!0,()=>{C.current=!1}),[]),(0,i.useEffect)(()=>{c.length>0&&x(c)},[c]),(0,i.useEffect)(()=>{S(P||F)},[P,F]);let z=(e,t)=>{let{from:l}=t;if(g.length>0&&m([]),Object.keys(t).includes("id"))switch(l){case"province":y([]),f(null),u({...X,sel_province:t});break;case"municipality":y([]),u({...d,sel_municipality:t,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null});break;case"day":y([]),f(q.find(e=>e.label===t.label)),u({...d,sel_day:t,sel_month:null,sel_crop:null,sel_stage:null,sel_activity:null});break;case"crop":y([]),u({...d,sel_crop:t,sel_month:null,sel_stage:null,sel_activity:null});break;case"cropstage":u({...d,sel_stage:t,sel_activity:null});break;case"activity":let n=E.filter(e=>$(e.crop_stage,d.sel_stage)&&e.farming_activity===t.label),i=E.filter(e=>e.farming_activity===t.label&&(!(null==p?void 0:p.code)||e.climate_risk===p.code));m(K(n.length>0?n:i)),u({...d,sel_activity:t})}else"province"===l?(u(X),y([])):"municipality"===l?(u({...d,sel_municipality:null,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null}),y([])):"day"===l?(u({...d,sel_day:null,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null}),y([])):"crop"===l?(u({...d,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null}),y([])):"cropstage"===l?u({...d,sel_stage:null,sel_activity:null}):"activity"===l&&u({...d,sel_activity:null})};return(0,n.jsx)(V,{climateRisk:p.label,optsprovinces:_,optsmunicipalities:R,optscrops:w,optsdays:q,optscropstages:b,optsactivities:L,sel_options:d,recommendations:g,weathertoday:v,loading:j,warning:W,onSelectItemChange:z,onClickDateSelector:e=>{let t=new Date(e).toDateString();z(null,{id:t=t.substring(0,t.length-5),label:t,full:new Date(e),from:"day"})},onResetClick:()=>{u(X),y([]),m([])}})},et=function(e){let{provinces:t=[]}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Z,{sx:{boxShadow:"none"}}),(0,n.jsx)("div",{id:"seasonal-recommendations"}),(0,n.jsx)(o.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,n.jsx)(B,{provinces:t})}),(0,n.jsx)("div",{id:"resilient-practices"}),(0,n.jsx)(o.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,n.jsx)(ee,{provinces:t})})]})},el=l(48414),en=!0,ei=function(e){let{media:t}=e,[l,o]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{try{let e=await (0,a.$m)();o(e.data)}catch(e){}})()},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)(el.Z,{title:"Agro-Climatic Advisory Portal - ".concat(s.Gt," (ACAP-").concat(s.Gt.toUpperCase(),") Crop Recommendations"),ogDescription:t.description,ogImageURL:t.url,ogURL:t.path,canonicalURL:t.path}),(0,n.jsx)(et,{provinces:l})]})}},9704:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});var n=l(67294),i=l(61061);function a(){let[e,t]=(0,n.useState)([]),[l,a]=(0,n.useState)(!1),[o,s]=(0,n.useState)("");return(0,n.useEffect)(()=>{(async()=>{var e,l,n;try{a(!0);let l=await (0,i.TQ)();t(null!==(e=null==l?void 0:l.list)&&void 0!==e?e:[]),a(!1),s("")}catch(e){s(null!==(n=null==e?void 0:null===(l=e.response)||void 0===l?void 0:l.data)&&void 0!==n?n:e.message),a(!1),t([])}})()},[]),{cropList:e,loading:l,error:o}}},63867:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var n=l(67294);function i(e,t){let[l,i]=(0,n.useState)([]);return(0,n.useEffect)(()=>{var l,n;i(e&&t&&null!==(n=null===(l=t.find(t=>t.id===e.id))||void 0===l?void 0:l.municipalities)&&void 0!==n?n:[])},[e,t]),l}},18938:function(e,t,l){"use strict";l.d(t,{Kx:function(){return s},ky:function(){return o},m$:function(){return r},tl:function(){return c}});var n=l(67294),i=l(36100),a=l(56871);function o(e,t){let[l,o]=(0,n.useState)(null),[s,r]=(0,n.useState)(!0),[c,d]=(0,n.useState)(""),u=(0,n.useRef)(!0);return(0,n.useEffect)(()=>((async()=>{try{let l=(0,i.JU)(a.db,e,t),n=await (0,i.QT)(l);u.current&&(n.exists()&&o(n.data()),r(!1))}catch(e){d(e.message),r(!1)}})(),()=>u.current=!1),[e,t]),[l,s,c]}function s(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,[s,r]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,p]=(0,n.useState)(""),h=(0,n.useRef)(!0);return(0,n.useEffect)(()=>((async()=>{try{let n=[(0,i.Xo)(t,"asc")];o>0&&n.push((0,i.b9)(o));let s=(0,i.hJ)(a.db,e),c=l||(0,i.IO)(s,...n),u=await (0,i.PL)(c);h.current&&(r(u.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,l,o]),{documents:s,loading:c,error:u}}function r(e,t,l){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",[s,r]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,p]=(0,n.useState)(""),h=(0,n.useRef)(!0);return(0,n.useEffect)(()=>((async()=>{try{let n=(0,i.IO)((0,i.hJ)(a.db,e,t,l),(0,i.Xo)(o)),s=await (0,i.PL)(n);h.current&&(r(s.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,l,o]),{documents:s,loading:c,error:u}}function c(e,t,l){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0,[r,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[p,h]=(0,n.useState)(""),g=(0,n.useRef)(!0);return(0,n.useEffect)(()=>((async()=>{try{let n=(0,i.hJ)(a.db,e,t,l);""!==o&&(n=(0,i.IO)(n,(0,i.Xo)(o))),s&&(n=(0,i.IO)(n,(0,i.b9)(s)));let r=await (0,i.PL)(n);g.current&&(c(r.docs.map(e=>({...e.data()}))),u(!1))}catch(e){h(e.message),u(!1)}})(),()=>g.current=!1),[e,t,l,o,s]),{documents:r,loading:d,error:p}}},83074:function(e,t,l){"use strict";l.d(t,{Z:function(){return c}});var n=l(67294),i=l(9473),a=l(98813),o=l(61984),s=l(92246),r=l(25517);function c(e,t){let[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(null),[p,h]=(0,n.useState)(""),[g,m]=(0,n.useState)(""),[v,f]=(0,n.useState)(!1),_=(0,i.I0)(),{ids:x,status:b,entities:y,error:j}=(0,i.v9)(e=>e.tendayweather);return(0,n.useEffect)(()=>{null!==e&&(h(""),m(""),_((0,o.R)(e)))},[e,_]),(0,n.useEffect)(()=>{h(j)},[j]),(0,n.useEffect)(()=>{f(b===r.G.PENDING)},[b]),(0,n.useEffect)(()=>{if(h(""),m(""),b===r.G.FULLFILLED&&x.length>0&&""===j&&null!==t){let e=Object.values(y).find(e=>e.municipality===t);if(void 0!==e){let t=JSON.parse(e.data),l=Object.values(a.MW);c(t.reduce((e,n,i)=>{var a,o,r,c,d;return[...e,{id:i,label:n.day_format,label_full:null===(a=(0,s.Ay)(n.day_format,t[9].day_format))||void 0===a?void 0:a.toDateString(),rainfall:n.rainfall,forecast:null!==(c=null===(o=l.find(e=>e.tenday===n.rainfall))||void 0===o?void 0:o.sync)&&void 0!==c?c:"-",code:null!==(d=null===(r=l.find(e=>e.tenday===n.rainfall))||void 0===r?void 0:r.label)&&void 0!==d?d:"-"}]},[]));let n=new Date(1e3*t[0].date_start.seconds),i=(0,s.Mn)(n);n.getFullYear()!==new Date().getFullYear()&&h("Invalid year detected in the 10-day validity date range: ".concat(t[0].date_range)),u({months:i,date_start:n,date_range:t[0].date_range})}else{let e=j||"Weather data for the municipality is not available at the moment, however, you can continue viewing recommendations. Please verify that the municipality name is present in the 10-Day weather forecast.";j?(c([]),u(null),h(e)):m(e)}}},[t,y,x,b,j]),{days:l,summary:d,loading:v,error:p,warning:g}}},22088:function(e,t,l){"use strict";l.d(t,{fI:function(){return h},sT:function(){return p},$K:function(){return r},YH:function(){return d},O_:function(){return m},iR:function(){return u},Ee:function(){return c},vU:function(){return g}});var n=l(96171),i=l(78986);let a={CROP_REC_LIST_RECS_LITE:"n_list_crop_recommendations",CROP_REC_LIST_RECS_FORMATTED:"n_list_crop_recommendations_",CROP_REC_LIST:"n_crop_recommendations_",CROP_REC_SMS_LIST:"n_crop_recommendations_"};class o extends n.Z{constructor(...e){super(...e),this.getFormattedRecommendationsFromStages=async e=>{let t,{cropstages:l,forecast:n,type:o}=e;if(void 0===l||void 0===n)return;let s="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(o),r=this.collection(this.db,s);return t=o===i.q.SEASONAL?this.query(r,this.where("crop_stage","in",l),this.where("forecast","==",n)):this.query(r,this.where("crop_stage","in",l)),await this.getCollectionData(s,"",t)},this.getFormattedRecommendations=async e=>{let t,{cropstage:l,forecast:n,type:o}=e;if(void 0===l||void 0===n)return;let s="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(o),r=this.collection(this.db,s);return t=o===i.q.SEASONAL?this.query(r,this.where("crop_stage","==",l),this.where("forecast","==",n)):this.query(r,this.where("crop_stage","==",l)),await this.getCollectionData(s,"",t)},this.getCropRecommendationsLite=async e=>{let{type:t}=e;return await this.getDocumentData(a.CROP_REC_LIST_RECS_LITE,t)},this.getCropRecommendations=async e=>{let{crop:t,type:l}=e;if(!t||!l)return;let n="".concat(a.CROP_REC_LIST).concat(l),i=this.collection(this.db,n),o=this.query(i,this.where("crop","==",t));return await this.getCollectionDataWithID(n,"",o)},this.getRecommendations=async e=>{let t,{climateRisk:l,_cropStage:n,crop:i,type:o,multipleStages:s}=e;if(!l||!i)return;if(s){if(0===n.length)return}else if(!n)return;let r="".concat(a.CROP_REC_LIST).concat(o),c=this.collection(this.db,r);return t=s?this.query(c,this.where("climate_risk","==",l),this.where("crop_stage","in",n),this.where("crop","==",i)):this.query(c,this.where("climate_risk","==",l),this.where("crop_stage","==",n),this.where("crop","==",i)),await this.getCollectionData(r,"",t)},this.getSeasonalGeneralRecommendations=async e=>{let{climateRisk:t,crop:l}=e;if(!t||!l)return;let n="n_crop_recommendations_seasonal_general",i=this.collection(this.db,n),a=this.query(i,this.where("climate_risk","==",t),this.where("crop","==",l));return await this.getCollectionData(n,"",a)},this.getRecommendationsFlexible=async e=>{let{climateRisk:t,_cropStage:l,crop:n,type:i,multipleStages:o=!1}=e,s="".concat(a.CROP_REC_LIST).concat(i),r=this.collection(this.db,s);if(!n)return;let c=[this.where("crop","==",n)];t&&c.push(this.where("climate_risk","==",t)),l&&(o?c.push(this.where("crop_stage","in",l)):c.push(this.where("crop_stage","==",l)));let d=this.query(r,...c);return await this.getCollectionData(s,"",d)},this.getRecommendationsQuery=async e=>{let{type:t,queryFields:l=[]}=e;if(!t)throw Error("Missing parameter/s");let n="".concat(a.CROP_REC_LIST).concat(t),i=this.collection(this.db,n),o=l.map(e=>this.where(e.field,e.op,e.value)),s=this.query(i,...o);return await this.getCollectionData(n,"",s)},this.getRecommendationsSMS=async e=>{let{crop:t,climateRisk:l,type:n}=e;if(!t||!l||!n)return;let i="".concat(a.CROP_REC_SMS_LIST).concat(n),o=this.collection(this.db,i),s=this.query(o,this.where("crop","==",t),this.where("climate_risk","==",l));return await this.getCollectionData(i,"",s)},this.updateRecommendation=async e=>{let{type:t,newRecommendation:l}=e,n="".concat(a.CROP_REC_SMS_LIST).concat(t),i=this.collection(this.db,n),o=this.doc(i,l.docid);delete l.docid,await this.updateDoc(o,l)},this.createRecommendation=async e=>{let{type:t,recommendation:l}=e,n="".concat(a.CROP_REC_SMS_LIST).concat(t),i=this.collection(this.db,n);return await this.addDoc(i,l)}}}let s=new o;s.getFormattedRecommendations.bind(s),s.getFormattedRecommendationsFromStages.bind(s),s.getCropRecommendationsLite.bind(s);let r=s.getRecommendations.bind(s),c=s.getSeasonalGeneralRecommendations.bind(s),d=s.getRecommendationsFlexible.bind(s),u=s.getRecommendationsSMS.bind(s),p=s.getCropRecommendations.bind(s),h=s.createRecommendation.bind(s),g=s.updateRecommendation.bind(s),m=s.getRecommendationsQuery.bind(s)},13311:function(e,t,l){"use strict";function n(e){if(!e)return"";try{return decodeURIComponent(escape(e))}catch(t){return e.replace(/Ã±/g,"\xf1").replace(/Ã‘/g,"\xd1").replace(/Ã¡/g,"\xe1").replace(/Ã©/g,"\xe9").replace(/Ã³/g,"\xf3").replace(/Ã­/g,"\xed").replace(/Ã¼/g,"\xfc").replace(/Ã/g,"\xed")}}l.d(t,{c:function(){return n}})}},function(e){e.O(0,[3153,7023,3745,1664,6541,5837,5117,6902,2888,9774,179],function(){return e(e.s=49361)}),_N_E=e.O()}]);