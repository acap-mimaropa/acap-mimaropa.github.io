(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{42176:function(e,t,r){"use strict";r.d(t,{D:function(){return f}});var n=r(87462),i=r(63366),l=r(67294),o=r(28714),s=r(77527),a=r(94780),c=r(73490),u=r(48836),d=r(85893);let p=["className","children"],h=e=>{let{classes:t}=e;return(0,a.Z)({root:["toolbarContainer"]},c.d,t)},x=(0,s.ZP)("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(e,t)=>t.toolbarContainer})(({theme:e})=>({display:"flex",alignItems:"center",flexWrap:"wrap",padding:e.spacing(.5,.5,0)})),f=l.forwardRef(function(e,t){let{className:r,children:l}=e,s=(0,i.Z)(e,p),a=(0,u.B)(),c=h(a);return l?(0,d.jsx)(x,(0,n.Z)({ref:t,className:(0,o.Z)(r,c.root),ownerState:a},s,{children:l})):null})},6132:function(e,t,r){"use strict";r.d(t,{S:function(){return h}});var n=r(87462),i=r(63366),l=r(67294),o=r(14696),s=r(10269),a=r(27476),c=r(49630),u=r(48836),d=r(85893);let p=["onClick"],h=l.forwardRef(function(e,t){var r;let{onClick:l}=e,h=(0,i.Z)(e,p),x=(0,c.l)(),f=(0,u.B)(),{open:m,openedPanelValue:v}=(0,o.P)(x,s.e);return f.disableColumnSelector?null:(0,d.jsx)(f.components.BaseButton,(0,n.Z)({ref:t,size:"small","aria-label":x.current.getLocaleText("toolbarColumnsLabel"),startIcon:(0,d.jsx)(f.components.ColumnSelectorIcon,{})},h,{onClick:e=>{m&&v===a.y.columns?x.current.hidePreferences():x.current.showPreferences(a.y.columns),null==l||l(e)}},null==(r=f.componentsProps)?void 0:r.baseButton,{children:x.current.getLocaleText("toolbarColumns")}))})},50853:function(e,t,r){"use strict";r.d(t,{M:function(){return Z}});var n=r(87462),i=r(63366),l=r(67294),o=r(77527),s=r(94780),a=r(79533),c=r(66643),u=r(90198),d=r(14696),p=r(61207),h=r(10269),x=r(27476),f=r(49630),m=r(48836),v=r(73490),g=r(85893);let b=["componentsProps"],y=e=>{let{classes:t}=e;return(0,s.Z)({root:["toolbarFilterList"]},v.d,t)},j=(0,o.ZP)("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(e,t)=>t.toolbarFilterList})(({theme:e})=>({margin:e.spacing(1,1,.5),padding:e.spacing(0,1)})),Z=l.forwardRef(function(e,t){var r,o;let{componentsProps:s={}}=e,v=(0,i.Z)(e,b),Z=s.button||{},C=(0,f.l)(),w=(0,m.B)(),S=(0,d.P)(C,p.DY),T=(0,d.P)(C,u.WH),H=(0,d.P)(C,h.e),z=y(w),B=l.useMemo(()=>{if(H.open)return C.current.getLocaleText("toolbarFiltersTooltipHide");if(0===S.length)return C.current.getLocaleText("toolbarFiltersTooltipShow");let e=e=>T[e.columnField].filterOperators.find(t=>t.value===e.operatorValue).label||C.current.getLocaleText(`filterOperator${(0,c.Z)(e.operatorValue)}`).toString(),t=e=>{let{getValueAsString:t}=T[e.columnField].filterOperators.find(t=>t.value===e.operatorValue);return t?t(e.value):e.value};return(0,g.jsxs)("div",{children:[C.current.getLocaleText("toolbarFiltersTooltipActive")(S.length),(0,g.jsx)(j,{className:z.root,ownerState:w,children:S.map((r,i)=>(0,n.Z)({},T[r.columnField]&&(0,g.jsx)("li",{children:`${T[r.columnField].headerName||r.columnField}
                  ${e(r)}
                  ${r.value?t(r):""}`},i)))})]})},[C,w,H.open,S,T,z]);return w.disableColumnFilter?null:(0,g.jsx)(w.components.BaseTooltip,(0,n.Z)({title:B,enterDelay:1e3},v,null==(r=w.componentsProps)?void 0:r.baseTooltip,{children:(0,g.jsx)(w.components.BaseButton,(0,n.Z)({ref:t,size:"small","aria-label":C.current.getLocaleText("toolbarFiltersLabel"),startIcon:(0,g.jsx)(a.Z,{badgeContent:S.length,color:"primary",children:(0,g.jsx)(w.components.OpenFilterButtonIcon,{})})},Z,{onClick:e=>{var t;let{open:r,openedPanelValue:n}=H;r&&n===x.y.filters?C.current.hideFilterPanel():C.current.showFilterPanel(),null==(t=Z.onClick)||t.call(Z,e)}},null==(o=w.componentsProps)?void 0:o.baseButton,{children:C.current.getLocaleText("toolbarFilters")}))}))})},45039:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops",function(){return r(46424)}])},7520:function(e,t,r){"use strict";var n=r(85893),i=r(93454);let l=(0,r(77527).ZP)(e=>(0,n.jsx)(i.Z,{...e}))(e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:t.spacing(1),backgroundColor:"#fff",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",border:"1px solid ".concat(t.palette.bacap.border)}});t.Z=l},17553:function(e,t,r){"use strict";var n=r(85893),i=r(67294),l=r(45697),o=r.n(l),s=r(70760),a=r(44723);let c=i.forwardRef(function(e,t){return(0,n.jsx)(a.Z,{elevation:6,ref:t,variant:"filled",...e})});function u(e){let{openSnackbar:t,message:r,severity:l="info",closeHandlerCB:o=()=>{}}=e,[a,u]=(0,i.useState)(t);(0,i.useEffect)(()=>{u(t)},[t]);let d=()=>{u(!1),o()},p=function(e){if(null==e)return"";if("string"==typeof e)return e;if(e instanceof Error)return e.message||e.toString();if("object"==typeof e&&"string"==typeof e.message)return e.message;try{return JSON.stringify(e)}catch(t){return String(e)}}(r);return(0,n.jsx)(s.Z,{open:a,autoHideDuration:3e3,onClose:d,children:(0,n.jsx)(c,{onClose:d,severity:l,sx:{width:"100%"},children:p})})}u.propTypes={openSnackbar:o().bool,message:o().any,severity:o().string,closeHandlerCB:o().func},t.Z=u},93428:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var i=n(r(33651)),l=r(85893);t.Z=(0,i.default)([(0,l.jsx)("path",{d:"M5 5v14h14V5zm9 12H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z",opacity:".3"},"0"),(0,l.jsx)("path",{d:"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64S3 4.72 3 5v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75M19 19H5V5h14z"},"1")],"AssignmentTwoTone")},2782:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var i=n(r(33651)),l=r(85893);t.Z=(0,i.default)([(0,l.jsx)("path",{d:"M21 19.1H3V5h18zM21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},"0"),(0,l.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41z"},"1")],"CancelPresentation")},22209:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var i=n(r(33651)),l=r(85893);t.Z=(0,i.default)((0,l.jsx)("path",{d:"M14.5 2.5c0 1.5-1.5 6-1.5 6h-2S9.5 4 9.5 2.5C9.5 1.12 10.62 0 12 0s2.5 1.12 2.5 2.5M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m4.08-4.89c.18-.75.33-1.47.39-2.06C19.75 4.69 22 8.08 22 12c0 5.52-4.48 10-10 10S2 17.52 2 12c0-3.92 2.25-7.31 5.53-8.95.07.59.21 1.32.39 2.06C5.58 6.51 4 9.07 4 12c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.93-1.58-5.49-3.92-6.89M18 12c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2 .98-3.77 2.48-4.86.23.81.65 2.07.65 2.07C8.43 9.93 8 10.92 8 12c0 2.21 1.79 4 4 4s4-1.79 4-4c0-1.08-.43-2.07-1.13-2.79 0 0 .41-1.22.65-2.07C17.02 8.23 18 10 18 12"}),"CrisisAlert")},28817:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var i=n(r(33651)),l=r(85893);t.Z=(0,i.default)([(0,l.jsx)("path",{d:"M13 4H6v16h12V9h-5zm3 14H8v-2h8zm0-6v2H8v-2z",opacity:".3"},"0"),(0,l.jsx)("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5z"},"1")],"DescriptionTwoTone")},91194:function(e,t,r){"use strict";r(67294);var n=r(13077),i=r(85893);t.Z=(0,n.Z)((0,i.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},59367:function(e,t,r){"use strict";r(67294);var n=r(13077),i=r(85893);t.Z=(0,n.Z)((0,i.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},46424:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A}});var n=r(85893),i=r(67294),l=r(9473),o=r(65328),s=r(11163),a=r(60990),c=r(41664),u=r.n(c),d=r(68573),p=r(96788),h=r(77527),x=r(41796);let f=(0,h.ZP)(e=>(0,n.jsx)(d.ZP,{...e}))(e=>{let{theme:t}=e;return{textAlign:"center",cursor:"pointer",borderRadius:t.spacing(1),padding:t.spacing(2),"& a":{color:"rgba(0, 0, 0, 0.87)",textDecoration:"none"},"& a:visited":{color:"rgba(0, 0, 0, 0.87)"},"& h6":{lineHeight:t.spacing(3)},"& svg":{color:t.palette.secondary.main},"&:hover, &:focus":{backgroundColor:(0,x.Fq)(t.palette.secondary.light,.3)}}});var m=r(16729),v=r(93428),g=r(28817),b=r(22209),y=function(){return(0,n.jsx)("div",{children:(0,n.jsx)(m.Z,{maxWidth:"sm",openButtonText:"Generate Bulletin",title:"Select a Crop Bulletin Type",showButtons:!1,colorTheme:"secondary",children:(0,n.jsxs)(d.ZP,{container:!0,children:[(0,n.jsx)(f,{item:!0,xs:12,sm:4,children:(0,n.jsx)(u(),{href:"/admin/bulletins/crops/seasonal/create",passHref:!0,legacyBehavior:!0,children:(0,n.jsxs)("a",{children:[(0,n.jsx)(v.Z,{sx:{fontSize:"90px"}}),(0,n.jsx)(p.Z,{variant:"subtitle1",children:"Seasonal Climate"}),(0,n.jsx)(p.Z,{variant:"subtitle1",children:"Outlook and Advisory"})]})})}),(0,n.jsx)(f,{item:!0,xs:12,sm:4,children:(0,n.jsx)(u(),{href:"/admin/bulletins/crops/tenday/create",passHref:!0,legacyBehavior:!0,children:(0,n.jsxs)("a",{children:[(0,n.jsx)(g.Z,{sx:{fontSize:"90px"}}),(0,n.jsx)(p.Z,{variant:"subtitle1",children:"10-Day Farm Weather Outlook"}),(0,n.jsx)(p.Z,{variant:"subtitle1",children:"and Advisory"})]})})}),(0,n.jsx)(f,{item:!0,xs:12,sm:4,children:(0,n.jsx)(u(),{href:"/admin/bulletins/crops/tenday/batch",passHref:!0,legacyBehavior:!0,children:(0,n.jsxs)("a",{children:[(0,n.jsx)(g.Z,{sx:{fontSize:"90px"}}),(0,n.jsx)(p.Z,{variant:"subtitle1",children:"10-Day Batch Generate"}),(0,n.jsx)(p.Z,{variant:"subtitle1",children:"All Municipalities"})]})})}),(0,n.jsx)(f,{item:!0,xs:12,sm:4,children:(0,n.jsx)(u(),{href:"/admin/bulletins/crops/special/create",passHref:!0,legacyBehavior:!0,children:(0,n.jsxs)("a",{children:[(0,n.jsx)(b.Z,{sx:{fontSize:"90px"}}),(0,n.jsx)(p.Z,{variant:"subtitle1",children:"Special Weather Advisory"})]})})})]})})})},j=r(6897),Z=r(94143),C=r(15972),w=r(7520),S=r(29346),T=r(17553),H=r(84325),z=r(42176),B=r(6132),L=r(50853),P=r(64740),M=r(25517);function R(e){return(0,n.jsx)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,n.jsxs)(z.D,{...e,children:[(0,n.jsx)(B.S,{}),(0,n.jsx)(L.M,{})]})})}var _=function(e){let{rows:t,columns:r,message:o,resetMessage:c,handleTypeChange:u}=e,[d,h]=(0,i.useState)(H.Ry.SEASONAL),x=(0,l.v9)(e=>e.reports.status),f=(0,l.v9)(e=>e.dashboard.reportType),m=(0,s.useRouter)();return(0,i.useEffect)(()=>{h(f)},[f]),(0,n.jsxs)("div",{children:[(0,n.jsx)(T.Z,{openSnackbar:""!==o,message:o,severity:"info",closeHandlerCB:c}),(0,n.jsx)(p.Z,{variant:"h5",children:"Generate Bulletin"}),(0,n.jsxs)("p",{children:["Create and preview ",(0,n.jsx)("strong",{children:"10-Day"})," and ",(0,n.jsx)("strong",{children:"Seasonal"})," crop bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]}),(0,n.jsxs)(w.Z,{sx:{display:"flex",flexDirection:{sm:"column",md:"row"},justifyContent:"space-between",alignItems:"center",padding:"8px 16px 8px 24px"},children:[(0,n.jsx)(y,{}),(0,n.jsxs)(j.Z,{sx:{m:1,width:{xs:"100%",sm:"100%",md:300}},size:"small",children:[(0,n.jsx)(Z.Z,{id:"report-type",children:"Bulletin Type"}),(0,n.jsxs)(S.Z,{labelId:"report-type",id:"report-type",value:d,label:"Bulletin Type",onChange:u,children:[(0,n.jsx)(C.Z,{value:H.Ry.SEASONAL,children:"Seasonal Crop Recommendations"}),(0,n.jsx)(C.Z,{value:H.Ry.TEN_DAY,children:"10-Day Crop Recommendations"}),(0,n.jsx)(C.Z,{value:H.Ry.SPECIAL_WEATHER,children:"Special Weather Recommendations"})]})]})]}),(0,n.jsx)(a.Z,{style:{height:678,width:"100%",textAlign:"left"},children:(0,n.jsx)(w.Z,{sx:{height:"inherit",marginTop:"16px"},children:(0,n.jsx)(P._,{rows:t,columns:r,disableDensitySelector:!0,pageSize:10,rowsPerPageOptions:[10],components:{Toolbar:R},loading:x===M.G.PENDING,rowHeight:48,initialState:{columns:{columnVisibilityModel:{rowId:!1}}},onRowClick:e=>{m.push({pathname:"/admin/bulletins/crops/report/view",query:{docId:e.row.docId}})}})})})]})},D=r(45773),E=r(75941),F=r(46560),N=r(98813),A=(0,o.Z)(function(e){let[t,r]=(0,i.useState)([]),[o,s]=(0,i.useState)([]),[a,c]=(0,i.useState)(""),u=(0,l.v9)(e=>e.dashboard.reportType),d=(0,i.useRef)(!1),p=(0,i.useRef)(!1),h=(0,l.I0)(),{ids:x,entities:f,status:m}=(0,l.v9)(e=>e.reports);return(0,i.useEffect)(()=>(d.current=!0,()=>{d.current=!1}),[]),(0,i.useEffect)(()=>{null===e.user||e.loading||0!==x.length||p.current||(p.current=!0,h((0,E.RC)({uid:e.user.uid,type:u})))},[e.user,e.loading,x,u,h]),(0,i.useEffect)(()=>{if([M.G.FULLFILLED,M.G.IDLE].includes(m)&&x.length>0){let e={crop:"Crop",province:"Province",municipality:"Municipality",type:"Bulletin Type",updated_by:"Updated by",date_created:"Date Created"},t={province:180,municipality:180,type:110,date_created:200},n=[];["crop","province","municipality","type","updated_by","date_created"].forEach(r=>{n.push({field:r,headerName:e[r],minWidth:t[r],flex:void 0===t[r]?1:0,editable:!1,sortable:!1,disableColumnMenu:!0})});let i=x.map((e,t)=>({id:t,docId:f[e].id,crop:f[e].crop,province:f[e].province,municipality:f[e].municipality,type:f[e].type,updated_by:f[e].updated_by,date_created:f[e].date_created}));d.current&&(r(i),s(n))}},[m,x,f]),(0,n.jsx)(D.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:N.DW.ADMIN,children:(0,n.jsx)(_,{rows:t,columns:o,loadingReports:m===M.G.PENDING,message:a,resetMessage:()=>c(""),handleTypeChange:t=>{let{value:r}=t.target;h((0,E.RC)({uid:e.user.uid,type:r})).unwrap().then(e=>{e.length>0&&h((0,F.uq)(r))}).catch(()=>{c("No ".concat(r," reports are available."))})}})})})}},function(e){e.O(0,[3153,7023,3745,1664,6541,955,7958,4073,4959,5837,6080,4723,760,20,4740,4588,2888,9774,179],function(){return e(e.s=45039)}),_N_E=e.O()}]);