(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{45039:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops",function(){return i(46424)}])},7520:function(e,t,i){"use strict";var s=i(85893),n=i(93454);let r=(0,i(77527).ZP)(e=>(0,s.jsx)(n.Z,{...e}))(e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:t.spacing(1),backgroundColor:"#fff",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",border:"1px solid ".concat(t.palette.bacap.border)}});t.Z=r},93428:function(e,t,i){"use strict";var s=i(64836);t.Z=void 0;var n=s(i(33651)),r=i(85893);t.Z=(0,n.default)([(0,r.jsx)("path",{d:"M5 5v14h14V5zm9 12H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z",opacity:".3"},"0"),(0,r.jsx)("path",{d:"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64S3 4.72 3 5v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75M19 19H5V5h14z"},"1")],"AssignmentTwoTone")},22209:function(e,t,i){"use strict";var s=i(64836);t.Z=void 0;var n=s(i(33651)),r=i(85893);t.Z=(0,n.default)((0,r.jsx)("path",{d:"M14.5 2.5c0 1.5-1.5 6-1.5 6h-2S9.5 4 9.5 2.5C9.5 1.12 10.62 0 12 0s2.5 1.12 2.5 2.5M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m4.08-4.89c.18-.75.33-1.47.39-2.06C19.75 4.69 22 8.08 22 12c0 5.52-4.48 10-10 10S2 17.52 2 12c0-3.92 2.25-7.31 5.53-8.95.07.59.21 1.32.39 2.06C5.58 6.51 4 9.07 4 12c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.93-1.58-5.49-3.92-6.89M18 12c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2 .98-3.77 2.48-4.86.23.81.65 2.07.65 2.07C8.43 9.93 8 10.92 8 12c0 2.21 1.79 4 4 4s4-1.79 4-4c0-1.08-.43-2.07-1.13-2.79 0 0 .41-1.22.65-2.07C17.02 8.23 18 10 18 12"}),"CrisisAlert")},28817:function(e,t,i){"use strict";var s=i(64836);t.Z=void 0;var n=s(i(33651)),r=i(85893);t.Z=(0,n.default)([(0,r.jsx)("path",{d:"M13 4H6v16h12V9h-5zm3 14H8v-2h8zm0-6v2H8v-2z",opacity:".3"},"0"),(0,r.jsx)("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5z"},"1")],"DescriptionTwoTone")},46424:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return P}});var s=i(85893),n=i(67294),r=i(9473),a=i(65328),l=i(11163),c=i(60990),o=i(41664),d=i.n(o),u=i(68573),p=i(96788),h=i(77527),x=i(41796);let m=(0,h.ZP)(e=>(0,s.jsx)(u.ZP,{...e}))(e=>{let{theme:t}=e;return{textAlign:"center",cursor:"pointer",borderRadius:t.spacing(1),padding:t.spacing(2),"& a":{color:"rgba(0, 0, 0, 0.87)",textDecoration:"none"},"& a:visited":{color:"rgba(0, 0, 0, 0.87)"},"& h6":{lineHeight:t.spacing(3)},"& svg":{color:t.palette.secondary.main},"&:hover, &:focus":{backgroundColor:(0,x.Fq)(t.palette.secondary.light,.3)}}});var v=i(16729),y=i(93428),f=i(28817),j=i(22209),b=function(){return(0,s.jsx)("div",{children:(0,s.jsx)(v.Z,{maxWidth:"sm",openButtonText:"Generate Bulletin",title:"Select a Crop Bulletin Type",showButtons:!1,colorTheme:"secondary",children:(0,s.jsxs)(u.ZP,{container:!0,children:[(0,s.jsx)(m,{item:!0,xs:12,sm:4,children:(0,s.jsx)(d(),{href:"/admin/bulletins/crops/seasonal/create",passHref:!0,legacyBehavior:!0,children:(0,s.jsxs)("a",{children:[(0,s.jsx)(y.Z,{sx:{fontSize:"90px"}}),(0,s.jsx)(p.Z,{variant:"subtitle1",children:"Seasonal Climate"}),(0,s.jsx)(p.Z,{variant:"subtitle1",children:"Outlook and Advisory"})]})})}),(0,s.jsx)(m,{item:!0,xs:12,sm:4,children:(0,s.jsx)(d(),{href:"/admin/bulletins/crops/tenday/create",passHref:!0,legacyBehavior:!0,children:(0,s.jsxs)("a",{children:[(0,s.jsx)(f.Z,{sx:{fontSize:"90px"}}),(0,s.jsx)(p.Z,{variant:"subtitle1",children:"10-Day Farm Weather Outlook"}),(0,s.jsx)(p.Z,{variant:"subtitle1",children:"and Advisory"})]})})}),(0,s.jsx)(m,{item:!0,xs:12,sm:4,children:(0,s.jsx)(d(),{href:"/admin/bulletins/crops/tenday/batch",passHref:!0,legacyBehavior:!0,children:(0,s.jsxs)("a",{children:[(0,s.jsx)(f.Z,{sx:{fontSize:"90px"}}),(0,s.jsx)(p.Z,{variant:"subtitle1",children:"10-Day Batch Generate"}),(0,s.jsx)(p.Z,{variant:"subtitle1",children:"All Municipalities"})]})})}),(0,s.jsx)(m,{item:!0,xs:12,sm:4,children:(0,s.jsx)(d(),{href:"/admin/bulletins/crops/special/create",passHref:!0,legacyBehavior:!0,children:(0,s.jsxs)("a",{children:[(0,s.jsx)(j.Z,{sx:{fontSize:"90px"}}),(0,s.jsx)(p.Z,{variant:"subtitle1",children:"Special Weather Advisory"})]})})})]})})})},g=i(6897),Z=i(94143),C=i(15972),S=i(7520),w=i(29346),H=i(17553),_=i(84325),z=i(42176),E=i(6132),T=i(50853),D=i(64740),R=i(25517);function A(e){return(0,s.jsx)(c.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,s.jsxs)(z.D,{...e,children:[(0,s.jsx)(E.S,{}),(0,s.jsx)(T.M,{})]})})}var B=function(e){let{rows:t,columns:i,message:a,resetMessage:o,handleTypeChange:d}=e,[u,h]=(0,n.useState)(_.Ry.SEASONAL),x=(0,r.v9)(e=>e.reports.status),m=(0,r.v9)(e=>e.dashboard.reportType),v=(0,l.useRouter)();return(0,n.useEffect)(()=>{h(m)},[m]),(0,s.jsxs)("div",{children:[(0,s.jsx)(H.Z,{openSnackbar:""!==a,message:a,severity:"info",closeHandlerCB:o}),(0,s.jsx)(p.Z,{variant:"h5",children:"Generate Bulletin"}),(0,s.jsxs)("p",{children:["Create and preview ",(0,s.jsx)("strong",{children:"10-Day"})," and ",(0,s.jsx)("strong",{children:"Seasonal"})," crop bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]}),(0,s.jsxs)(S.Z,{sx:{display:"flex",flexDirection:{sm:"column",md:"row"},justifyContent:"space-between",alignItems:"center",padding:"8px 16px 8px 24px"},children:[(0,s.jsx)(b,{}),(0,s.jsxs)(g.Z,{sx:{m:1,width:{xs:"100%",sm:"100%",md:300}},size:"small",children:[(0,s.jsx)(Z.Z,{id:"report-type",children:"Bulletin Type"}),(0,s.jsxs)(w.Z,{labelId:"report-type",id:"report-type",value:u,label:"Bulletin Type",onChange:d,children:[(0,s.jsx)(C.Z,{value:_.Ry.SEASONAL,children:"Seasonal Crop Recommendations"}),(0,s.jsx)(C.Z,{value:_.Ry.TEN_DAY,children:"10-Day Crop Recommendations"}),(0,s.jsx)(C.Z,{value:_.Ry.SPECIAL_WEATHER,children:"Special Weather Recommendations"})]})]})]}),(0,s.jsx)(c.Z,{style:{height:678,width:"100%",textAlign:"left"},children:(0,s.jsx)(S.Z,{sx:{height:"inherit",marginTop:"16px"},children:(0,s.jsx)(D._,{rows:t,columns:i,disableDensitySelector:!0,pageSize:10,rowsPerPageOptions:[10],components:{Toolbar:A},loading:x===R.G.PENDING,rowHeight:48,initialState:{columns:{columnVisibilityModel:{rowId:!1}}},onRowClick:e=>{v.push({pathname:"/admin/bulletins/crops/report/view",query:{docId:e.row.docId}})}})})})]})},M=i(45773),N=i(75941),I=i(46560),k=i(98813),P=(0,a.Z)(function(e){let[t,i]=(0,n.useState)([]),[a,l]=(0,n.useState)([]),[c,o]=(0,n.useState)(""),d=(0,r.v9)(e=>e.dashboard.reportType),u=(0,n.useRef)(!1),p=(0,n.useRef)(!1),h=(0,r.I0)(),{ids:x,entities:m,status:v}=(0,r.v9)(e=>e.reports);return(0,n.useEffect)(()=>(u.current=!0,()=>{u.current=!1}),[]),(0,n.useEffect)(()=>{null===e.user||e.loading||0!==x.length||p.current||(p.current=!0,h((0,N.RC)({uid:e.user.uid,type:d})))},[e.user,e.loading,x,d,h]),(0,n.useEffect)(()=>{if([R.G.FULLFILLED,R.G.IDLE].includes(v)&&x.length>0){let e={crop:"Crop",province:"Province",municipality:"Municipality",type:"Bulletin Type",updated_by:"Updated by",date_created:"Date Created"},t={province:180,municipality:180,type:110,date_created:200},s=[];["crop","province","municipality","type","updated_by","date_created"].forEach(i=>{s.push({field:i,headerName:e[i],minWidth:t[i],flex:void 0===t[i]?1:0,editable:!1,sortable:!1,disableColumnMenu:!0})});let n=x.map((e,t)=>({id:t,docId:m[e].id,crop:m[e].crop,province:m[e].province,municipality:m[e].municipality,type:m[e].type,updated_by:m[e].updated_by,date_created:m[e].date_created}));u.current&&(i(n),l(s))}},[v,x,m]),(0,s.jsx)(M.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:k.DW.ADMIN,children:(0,s.jsx)(B,{rows:t,columns:a,loadingReports:v===R.G.PENDING,message:c,resetMessage:()=>o(""),handleTypeChange:t=>{let{value:i}=t.target;h((0,N.RC)({uid:e.user.uid,type:i})).unwrap().then(e=>{e.length>0&&h((0,I.uq)(i))}).catch(()=>{o("No ".concat(i," reports are available."))})}})})})}},function(e){e.O(0,[3153,6856,190,8583,1664,6541,955,4073,6455,5837,6080,4723,760,20,4740,8591,4313,2888,9774,179],function(){return e(e.s=45039)}),_N_E=e.O()}]);