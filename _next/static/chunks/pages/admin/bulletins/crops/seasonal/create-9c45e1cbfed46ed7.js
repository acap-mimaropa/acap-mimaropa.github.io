(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7970],{82825:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/seasonal/create",function(){return l(38558)}])},38558:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return en}});var n=l(85893),s=l(67294),a=l(9473),i=l(97416),o=l(26525),r=l(31695),c=l(18938),u=l(46560),d=l(88925),p=l(75941),m=l(96281),g=l(77457),h=l(63431),v=l(18752),f=l(9704),x=l(44858),b=l(38508),S=l(6506),_=l(98813);let j={forecast:"",label:"",value:0};var Z=l(6903),y=l(38660),w=l(25517),E=l(84325),O=l(65328),C=l(11163),k=l(45697),R=l.n(k),T=l(55292),I=l(52857),P=l(41664),B=l.n(P),L=l(25837),D=l(60990),A=l(97182),F=l(51015),N=l(49986),z=l(81873),M=l(56912),U=l(68573),W=l(26541),q=l(96788),G=l(88607),X=l(28907),H=l(2052),V=l(16729),J=l(57951),$=l(29455),K=l(24006),Q=l(71663);function Y(e){var t;let[l,i]=(0,s.useState)(!1),o=(0,s.useRef)(!0),r=(0,C.useRouter)(),c=(0,a.I0)(),[u,p]=(0,s.useState)(0),{sel_options:m}=e,{recommendations:g,recommendationsImpacts:h}=e,{climateRisk:v,optsprovinces:f,optsactivities:x,optscrops:b,optscropstages:S,monthForecast:j,open:Z,isTagalog:y,loading:w,isloadingreport:E,message:O,smstext:k}=e,{pdfPreview:P,handleSave:Y,handlePreview:ee,togglePrompt:et,toggleViewerOpen:el,toggleGlobalLanguage:en,onSelectItemChange:es,resetSelections:ea}=e;(0,s.useEffect)(()=>(o.current=!0,()=>{o.current=!1}),[]),(0,s.useEffect)(()=>{null===m.sel_month&&!0===l&&i(!1)},[m.sel_month,l]);let ei=()=>{c((0,d.s_)()),r.push("/admin/bulletins/crops/report/view/?docId=".concat(O.docId))},eo=()=>{let e="Loading...";return f.length>0&&(e=null===m.sel_province?"Select a province":"Province"),e};function er(e){let{children:t,value:l,index:s,...a}=e;return(0,n.jsx)("div",{role:"tabpanel",hidden:l!==s,id:"simple-tabpanel-".concat(s),"aria-labelledby":"simple-tab-".concat(s),...a,children:l===s&&(0,n.jsx)(D.Z,{sx:{p:3},children:t})})}function ec(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}return er.propTypes={children:R().node,index:R().number.isRequired,value:R().number.isRequired},(0,n.jsxs)("div",{children:[(0,n.jsx)(V.Z,{isOpen:O.isOpen,maxWidth:"xs",openButtonText:null,title:O.title,contentText:O.msg,loading:O.loading,modalCancelHandlerCB:()=>{O.savesuccess?ei():et()},modalConfirmHandlerCB:()=>{O.savesuccess?ei():Y()}}),(0,n.jsx)(J.Z,{open:Z,pdfPreview:P,error:m.error,loading:m.loading,toggleViewerOpen:el}),(0,n.jsxs)(U.ZP,{container:!0,sx:Q.Z.container,children:[(0,n.jsxs)(D.Z,{sx:Q.Z.headerText,children:[(0,n.jsxs)(D.Z,{children:[(0,n.jsx)(q.Z,{variant:"h5",children:"Regional Seasonal Climate Outlook and Advisory Crop Recommendations Bulletin"}),(0,n.jsxs)("p",{children:["Create ",(0,n.jsx)("strong",{children:"Seasonal"})," crop recommendations bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]})]}),(0,n.jsx)(D.Z,{children:(0,n.jsx)(B(),{href:"/admin/bulletins/crops",passHref:!0,legacyBehavior:!0,children:(0,n.jsx)(I.Z,{"aria-label":"exit",size:"medium",children:(0,n.jsx)(T.Z,{fontSize:"inherit"})})})})]}),(0,n.jsxs)(U.ZP,{item:!0,sx:Q.Z.item,xs:12,lg:4,children:[(0,n.jsx)(q.Z,{variant:"h6",children:"Selection Options"}),(0,n.jsx)(L.Z,{disablePortal:!0,id:"province",size:"small",value:m.sel_province,disabled:0===f.length||w,options:f,sx:Q.Z.autocomplete,PaperComponent:H.Z,renderInput:e=>(0,n.jsx)(W.Z,{...e,label:eo()}),isOptionEqualToValue:(e,t)=>e.label===t,onChange:(e,t)=>es(e,{...t,from:"province"})}),(0,n.jsx)(L.Z,{disablePortal:!0,id:"crop",size:"small",value:m.sel_crop,disabled:0===b.length||null===m.sel_municipality||w,options:b,sx:Q.Z.autocomplete,PaperComponent:H.Z,renderInput:e=>(0,n.jsx)(W.Z,{...e,label:null===m.sel_crop?"Select a crop type":"Crop"}),isOptionEqualToValue:(e,t)=>e.label===t,getOptionDisabled:e=>e.disabled,onChange:(e,t)=>es(e,{...t,from:"crop"})}),null!==m.sel_crop&&(0,n.jsxs)("div",{style:{marginTop:"16px",float:"left",textAlign:"center",border:"1px solid #DCEDC8",padding:"5px 10px",borderRadius:"5px"},children:[(0,n.jsx)(q.Z,{variant:"subtitle1",children:(0,n.jsx)("strong",{children:"Climate Risk:"})}),v]}),(0,n.jsxs)(N.Z,{disableElevation:!0,size:"small","aria-label":"outlined button controls group",disabled:E||null===m.sel_crop||null===m.sel_month,sx:{marginTop:"16px",float:"right"},children:[(0,n.jsx)(F.Z,{variant:"outlined",disabled:w||E,onClick:ea,children:"Reset"}),(0,n.jsx)(F.Z,{variant:"contained",onClick:()=>i(e=>!e),disabled:w||null===m.sel_month||l||null===g,children:"Generate"})]})]}),(0,n.jsx)(U.ZP,{item:!0,sx:Q.Z.item,xs:12,lg:8,children:(0,n.jsx)(K.Z,{climateRisk:v,selecteditems:m,cropstages:null==S?void 0:S.map(e=>e.label).toString().split(",").join(", "),farmoperations:x.map(e=>e.label).toString().split(",").join(", "),loading:w})})]}),(0,n.jsxs)(U.ZP,{container:!0,sx:Q.Z.container,gap:3,style:{marginTop:"24px",padding:w?"16px":"24px"},children:[(0,n.jsxs)(U.ZP,{item:!0,sx:Q.Z.item,xs:12,lg:12,children:[(0,n.jsx)(D.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,n.jsx)(A.Z,{size:16,color:"primary",sx:{display:w?"block":"none"}})}),null!==m.sel_crop&&null!==m.sel_month&&l&&(0,n.jsx)(D.Z,{children:j.forecast!==_.DD&&(0,n.jsxs)(D.Z,{sx:{width:"100%",marginTop:{xs:"85px",lg:"0px"},"& hr":{marginBottom:"32px"}},children:[(0,n.jsx)(D.Z,{sx:{borderBottom:1,borderColor:"divider","& hr":{color:"red"}},children:(0,n.jsxs)(G.Z,{value:u,onChange:(e,t)=>{p(t)},"aria-label":"basic tabs example",children:[(0,n.jsx)(X.Z,{label:"PDF FORM",...ec(0)}),(0,n.jsx)(X.Z,{label:"SMS FORM",...ec(1)})]})}),(0,n.jsxs)(er,{value:u,index:0,children:[(0,n.jsxs)(D.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,n.jsx)(q.Z,{variant:"h4",children:"Impact Outlooks"}),(0,n.jsx)(z.Z,{size:"medium",variant:"outlined",label:y?"English":"Tagalog",onClick:()=>en(),sx:{width:"90px"}})]}),(0,n.jsx)(D.Z,{sx:Q.Z.recSeasonal,children:(0,n.jsx)($.Z,{impactOutlookOnly:!0,isShowImpactOutlookSubtitle:!1,recommendations:h,impactOutlookEng:"impact",impactOutlookTag:"impact_tagalog",title:m.sel_crop,isTagalog:y,isShowTitle:!1})}),(0,n.jsx)("hr",{}),(0,n.jsx)(q.Z,{variant:"h4",children:"Recommendations"}),g&&S?null===(t=Object.keys(g))||void 0===t?void 0:t.map((e,t)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)(q.Z,{variant:"h5",sx:Q.Z.recSeasonalStage,children:e}),Object.keys(g[e]).map((t,l)=>(0,n.jsxs)(D.Z,{sx:{...Q.Z.recSeasonal,marginBottom:"24px","& h6":{color:"rgba(0, 0, 0, 0.67)"}},children:[(0,n.jsx)(q.Z,{variant:"h6",children:t}),(0,n.jsx)($.Z,{recommendations:g[e][t],isTagalog:y,isShowTitle:!1})]},"rec-".concat(l)))]},t)):(0,n.jsx)($.Z,{recommendations:g,isTagalog:y,isShowTitle:!1})]}),(0,n.jsx)(er,{value:u,index:1,children:k})]})})]}),(0,n.jsxs)(D.Z,{sx:{marginBottom:"16px",width:"100%",display:l?"block":"none"},children:[(0,n.jsx)("br",{}),(0,n.jsx)(M.Z,{}),(0,n.jsx)("br",{}),""!==m.error&&(0,n.jsxs)(q.Z,{variant:"caption",sx:{color:"red"},children:["Error: ",m.error]}),(0,n.jsxs)(N.Z,{size:"large","aria-label":"large button group",disabled:E||j.forecast===_.DD,sx:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:[(0,n.jsx)(B(),{href:"/admin/bulletins/crops",passHref:!0,legacyBehavior:!0,children:(0,n.jsx)(F.Z,{disabled:m.loading,children:"Cancel"})}),(0,n.jsxs)(F.Z,{disabled:m.loading,onClick:ee,children:[(0,n.jsx)("span",{style:{display:E?"none":"block"},children:"Preview"})," ","\xa0",(0,n.jsx)(A.Z,{size:24,color:"secondary",sx:{display:E?"block":"none"}})]}),(0,n.jsx)(F.Z,{variant:"contained",onClick:et,disableElevation:!0,disabled:m.loading,children:"Save"})]})]})]})]})}Y.propTypes={optsprovinces:R().array,optscrops:R().array,optsmonths:R().array,optsactivities:R().array,sel_options:R().object,monthForecast:R().object,recommendationsImpacts:R().array,loading:R().bool,isloadingreport:R().bool,open:R().bool,isTagalog:R().bool,message:R().object,smstext:R().string,pdfPreview:R().object,onSelectItemChange:R().func,handlePreview:R().func,handleSave:R().func,toggleViewerOpen:R().func,toggleGlobalLanguage:R().func,resetSelections:R().func,togglePrompt:R().func};var ee=l(45773);let et={sel_province:null,sel_crop:null,sel_stage:null,sel_activity:[],sel_month:null,sel_condition:{id:0,from:"weather_condition",label:_.MW.WAY_BELOW_NORMAL.label},loading:!1,error:"",success:""},el={url:"",filename:""};var en=(0,O.Z)(function(e){let{user:t,onBtnLogoutClick:l,loading:O}=e,[C,k]=(0,s.useState)(et),[R,T]=(0,s.useState)({}),[I,P]=(0,s.useState)({}),[B,L]=(0,s.useState)([]),[D,A]=(0,s.useState)([]),[F,N]=(0,s.useState)([]),[z,M]=(0,s.useState)([]),[U,W]=(0,s.useState)(null),[q,G]=(0,s.useState)(!0),[X,H]=(0,s.useState)(!1),V=(0,s.useRef)(!1),{documents:J,loading:$}=(0,c.m$)(o.M.WEATHER_FORECASTS,"mimaropa",o.M.SUB_SEASONAL,"name"),{forecast:K}=function(e,t){let[l,n]=(0,s.useState)(j);return(0,s.useEffect)(()=>{if(void 0!==e.months&&t){var l,s,a,i;let o=e.months.find(e=>e.mo===t.id),r=Object.values(_.MW).find(e=>e.label===(null==o?void 0:o.con));n({forecast:null!==(l=null==o?void 0:o.con)&&void 0!==l?l:"",value:null!==(s=null==o?void 0:o.val)&&void 0!==s?s:0,label:null!==(a=null==r?void 0:r.sync)&&void 0!==a?a:"-",code:null!==(i=null==r?void 0:r.label)&&void 0!==i?i:"-"})}},[e,t]),{forecast:l}}(I,C.sel_month),{cropcalendar:Q,cropStages:en,loading:es}=(0,v.Z)("seasonal",C.sel_province,C.sel_crop),{recommendationsSMS:ea,loading:ei}=(0,b.Z)(C.sel_crop,R.code,"seasonal_sms");(0,s.useEffect)(()=>{if((null==ea?void 0:ea.length)!==0){var e;eZ(ea[0].sms.replace("{{seasonal_range_identifier}}",null==C?void 0:null===(e=C.sel_month)||void 0===e?void 0:e.label))}},[ea,C.sel_month]),(0,s.useEffect)(()=>{if(0!==Q.length&&!q&&0!==B.length&&C.sel_crop===Q.data1[0].crop){let e=[];B.forEach(t=>{var l,n;if(0===Q.length)return;let s=null===(l=Q.data1[0][t.id])||void 0===l?void 0:l.split(",");s&&(null==s?void 0:s.length)===2&&("none"===s[0]||e.includes(s[0])||e.push(s[0]),"none"===s[1]||e.includes(s[1])||e.push(s[1]));let a=null===(n=Q.data2[0][t.id])||void 0===n?void 0:n.split(",");a&&(null==a?void 0:a.length)===2&&("none"===a[0]||e.includes(a[0])||e.push(a[0]),"none"===a[1]||e.includes(a[1])||e.push(a[1]))}),W(e.map((e,t)=>({id:t,label:en[e].label,code:e})))}},[Q,q,C.sel_crop,B,en]);let{cropList:eo}=(0,f.Z)(),er=eo.map((e,t)=>({disabled:!1,label:e,id:t})),{recommendations:ec,farmoperations:eu,loading:ed}=(0,x.Z)(R.code,U,C.sel_crop,"seasonal",!0),{group:ep}=(0,Z.Z)(ec,en,U),{group:em}=(0,S.Z)(ec,eu),{services:eg,loading:eh}=(0,y.Z)(void 0,void 0),[ev,ef]=(0,s.useState)(el),[ex,eb]=(0,s.useState)(!1),[eS,e_]=(0,s.useState)(E.BF),[ej,eZ]=(0,s.useState)(""),ey=(0,a.v9)(e=>e.dashboard.reportType),ew=(0,a.I0)(),{report:eE,status:eO}=(0,a.v9)(e=>e.reports);(0,s.useEffect)(()=>{var e;if((null==I?void 0:null===(e=I.months)||void 0===e?void 0:e.length)>0&&null!==C.sel_crop){T((0,h.Z)(I.months,"seasonal"));let e="".concat(_.re[I.mos[0].toUpperCase()].format," - ").concat(_.re[I.mos[5].toUpperCase()].format);k(t=>({...t,sel_month:{label:e}}))}},[I,C.sel_crop]),(0,s.useEffect)(()=>(V.current=!0,(async()=>{try{let e=await (0,i.$m)();V&&M(e.data)}catch(e){}})(),()=>{V.current=!1}),[]),(0,s.useEffect)(()=>{ew((0,d.s_)())},[ew]),(0,s.useEffect)(()=>{!(z.length>0)||$||O||(N((0,m.m)(z)),L(J[0].mos.reduce((e,t)=>[...e,{id:_.re[t.toUpperCase()].code,label:_.re[t.toUpperCase()].format,disabled:!1}],[])))},[z,J,$,O]),(0,s.useEffect)(()=>{G(O||$||ed||es||ei||eh)},[O,$,ed,es,ei,eh]),(0,s.useEffect)(()=>{eO===w.G.FULLFILLED&&null!==eE&&V.current&&e_(e=>({...e,msg:"Success! Bulletin report created.",loading:!1,savesuccess:!0,docId:eE.id}))},[eO,eE]);let eC=async()=>{e_({...eS,loading:!0,msg:"Saving report..."});try{let e={region:"mimaropa",province:C.sel_province,crop:C.sel_crop,climateRisk:R,cropping_calendar:Q,stages:U,activities:eu.map(e=>e.label),recommendations:ec,services:eg.map(e=>e.data),operation:"create",language:X?"tag":"en",isFull:!0};ew((0,p.Br)(e)).unwrap().then(()=>{ey!==E.Ry.SEASONAL&&(ew((0,u.uq)(E.Ry.SEASONAL)),ew((0,p.RC)({uid:t.uid,type:E.Ry.SEASONAL})))}).catch(e=>{V.current&&e_(t=>({...t,msg:e.message,loading:!1,savesuccess:!1,docId:null}))})}catch(t){let e="";void 0!==t.response&&(e=void 0!==t.response.data&&"[object Blob]"==typeof t.response.data?t.response.data:""),""===e&&(e=t.message)}},ek=async()=>{if(""!==ev.url){eb(!0);return}k(e=>({...e,loading:!0,error:"",success:""}));try{let e={region:"mimaropa",province:C.sel_province,crop:C.sel_crop,operation:"preview",climateRisk:R,cropping_calendar:Q,stages:null!=U?U:[],activities:eu.map(e=>e.label),recommendations:ec,services:eg.map(e=>e.data),language:X?"tag":"en",isFull:!0};eb(!0),k(e=>({...e,loading:!0,error:""}));let t=await (0,r.pl)(e),l=new Blob([t],{type:"application/pdf"}),n={};n.href=URL.createObjectURL(l),n.download="".concat(C.sel_province,"-").concat(C.sel_crop,".pdf"),ef(e=>({...e,url:n.href,filename:n.download})),k(e=>({...e,loading:!1,success:"Bulletin preview created."}))}catch(t){let e=await (0,g.fu)(t);k(t=>({...t,loading:!1,error:e}))}};return(0,n.jsx)(ee.Z,{loading:O,user:t,onBtnLogoutClick:l,accLevel:_.DW.ADMIN,children:(0,n.jsx)(Y,{climateRisk:R.label,optsprovinces:F,optscrops:er,optsmonths:B,optscropstages:U,optsactivities:eu,sel_options:C,monthForecast:K,recommendations:ep,recommendationsImpacts:em,loading:q,isloadingreport:eO===w.G.PENDING,open:ex,isTagalog:X,message:eS,smstext:ej,pdfPreview:ev,onSelectItemChange:(e,t)=>{let{from:l,label:n}=t;if(ef(el),D.length>0&&A([]),Object.keys(t).includes("id"))switch(l){case"province":W(null),P(J.find(e=>e.name===n)),k({...et,sel_province:n});break;case"crop":k({...C,sel_crop:n,sel_month:null,sel_stage:null,sel_activity:null}),W(null),A([])}else"province"===l?(k(et),W(null)):"crop"===l?(k({...C,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null}),W(null)):"month"===l&&(k({...C,sel_month:null,sel_stage:null,sel_activity:null}),W(null))},handlePreview:ek,handleSave:eC,toggleViewerOpen:()=>{eb(e=>!e)},toggleGlobalLanguage:()=>{H(e=>!e),ef(el)},resetSelections:()=>{k(et),W(null),A([])},togglePrompt:()=>{e_(e=>({...E.BF,isOpen:!e.isOpen}))}})})})},6506:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});var n=l(67294);function s(e){let[t,l]=(0,n.useState)([]),[s,a]=(0,n.useState)("");(0,n.useEffect)(()=>{if(a(""),(null==e?void 0:e.length)>0)try{let t=e.map(e=>({impact:e.impact_outlook_english,impact_tagalog:e.impact_outlook_tagalog})).filter(e=>""!==e.impact_outlook_english&&""!==e.impact_outlook_tagalog);t=o(t),l([{impact:i(t.impact),impact_tagalog:i(t.impact_tagalog)}]);return}catch(e){var t,n,s;a(null!==(s=null!==(n=null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data)&&void 0!==n?n:e.message)&&void 0!==s?s:String(e))}else l([])},[e]);let i=e=>{let t="-",l=e.reduce((e,l)=>(l.includes("<p>")?("list"===t&&(e+="</ul>"),e+=l,t="p"):(["-","p"].includes(t)&&(e+="<ul>"),e+=l,t="list"),e),"");return"list"===t&&(l+="</ul>"),l},o=e=>{let t={impact:[],impact_tagalog:[]};return e.reduce((e,l)=>(Object.keys(e).forEach(n=>{let s=l[n].replace(/<ul>/g,"");(s=(s=s.replace(/<\/ul>/g,"")).replace(/<li>/g,"")).split("</li>").forEach(l=>{l.includes("<p>")?l.replace(/<p>/g,"").split("</p>").forEach(l=>{t[n].includes(l)||""===l||(t[n].push(l),e[n].push("<p>".concat(l,"</p>")))}):t[n].includes(l)||""===l||(t[n].push(l),e[n].push("<li>".concat(l,"</li>")))})}),{...e}),{impact:[],impact_tagalog:[]})};return{group:t,error:s}}},6903:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});var n=l(67294);function s(e,t,l){let[s,a]=(0,n.useState)(null),[i,o]=(0,n.useState)(""),r=e=>e.map(e=>e.farming_activity).filter((e,t,l)=>l.indexOf(e)===t);return(0,n.useEffect)(()=>{if(o(""),(null==e?void 0:e.length)>0&&(null==l?void 0:l.length)>0&&t){let c=r(e),u=null==l?void 0:l.map(e=>e.code);try{a(u.reduce((l,n)=>(null==c||c.forEach(s=>{let a=t[n].label,i=e.filter(e=>e.crop_stage===n&&e.farming_activity===s);i.length>0&&a&&(void 0===l[a]&&(l[a]={}),void 0===l[a][s]&&(l[a][s]=[]),l[a][s]=[...l[a][s],...i])}),l),{}))}catch(e){var n,s,i;a(null),o(null!==(i=null!==(s=null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)&&void 0!==s?s:e.message)&&void 0!==i?i:String(e))}}else(null==e?void 0:e.length)>0?a(e):a(null)},[e,t,l]),{group:s,error:i}}},38508:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});var n=l(67294),s=l(22088);function a(e,t,l){let[a,i]=(0,n.useState)([]),[o,r]=(0,n.useState)(!1),[c,u]=(0,n.useState)("");return(0,n.useEffect)(()=>{let n=async()=>{try{let n=[];r(!1),u(""),n=await (0,s.iR)({crop:e,climateRisk:t,type:l}),r(!1),i(n||[])}catch(e){var n,a;u(null!==(a=null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)&&void 0!==a?a:e.message),r(!1)}};e&&l?n():i([])},[e,t,l]),{recommendationsSMS:a,loading:o,error:c}}},38660:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});var n=l(67294),s=l(98037);function a(e,t){let[l,a]=(0,n.useState)([]),[i,o]=(0,n.useState)(!1),[r,c]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,s.yZ)();a(null!=e?e:[])}catch(l){var e,t;c(null!==(t=null==l?void 0:null===(e=l.response)||void 0===e?void 0:e.data)&&void 0!==t?t:l.message),o(!1)}})()},[e,t]),{services:l,loading:i,error:r}}},18938:function(e,t,l){"use strict";l.d(t,{Kx:function(){return o},ky:function(){return i},m$:function(){return r},tl:function(){return c}});var n=l(67294),s=l(36100),a=l(56871);function i(e,t){let[l,i]=(0,n.useState)(null),[o,r]=(0,n.useState)(!0),[c,u]=(0,n.useState)(""),d=(0,n.useRef)(!0);return(0,n.useEffect)(()=>((async()=>{try{let l=(0,s.JU)(a.db,e,t),n=await (0,s.QT)(l);d.current&&(n.exists()&&i(n.data()),r(!1))}catch(e){u(e.message),r(!1)}})(),()=>d.current=!1),[e,t]),[l,o,c]}function o(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,[o,r]=(0,n.useState)([]),[c,u]=(0,n.useState)(!0),[d,p]=(0,n.useState)(""),m=(0,n.useRef)(!0);return(0,n.useEffect)(()=>((async()=>{try{let n=[(0,s.Xo)(t,"asc")];i>0&&n.push((0,s.b9)(i));let o=(0,s.hJ)(a.db,e),c=l||(0,s.IO)(o,...n),d=await (0,s.PL)(c);m.current&&(r(d.docs.map(e=>({...e.data()}))),u(!1))}catch(e){p(e.message),u(!1)}})(),()=>m.current=!1),[e,t,l,i]),{documents:o,loading:c,error:d}}function r(e,t,l){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",[o,r]=(0,n.useState)([]),[c,u]=(0,n.useState)(!0),[d,p]=(0,n.useState)(""),m=(0,n.useRef)(!0);return(0,n.useEffect)(()=>((async()=>{try{let n=(0,s.IO)((0,s.hJ)(a.db,e,t,l),(0,s.Xo)(i)),o=await (0,s.PL)(n);m.current&&(r(o.docs.map(e=>({...e.data()}))),u(!1))}catch(e){p(e.message),u(!1)}})(),()=>m.current=!1),[e,t,l,i]),{documents:o,loading:c,error:d}}function c(e,t,l){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4?arguments[4]:void 0,[r,c]=(0,n.useState)([]),[u,d]=(0,n.useState)(!0),[p,m]=(0,n.useState)(""),g=(0,n.useRef)(!0);return(0,n.useEffect)(()=>((async()=>{try{let n=(0,s.hJ)(a.db,e,t,l);""!==i&&(n=(0,s.IO)(n,(0,s.Xo)(i))),o&&(n=(0,s.IO)(n,(0,s.b9)(o)));let r=await (0,s.PL)(n);g.current&&(c(r.docs.map(e=>({...e.data()}))),d(!1))}catch(e){m(e.message),d(!1)}})(),()=>g.current=!1),[e,t,l,i,o]),{documents:r,loading:u,error:p}}},98037:function(e,t,l){"use strict";l.d(t,{Wn:function(){return r},vo:function(){return u},yZ:function(){return o},Ef:function(){return c}});var n=l(96171),s=l(36100);class a extends n.Z{constructor(...e){super(...e),this.getSupportServices=async()=>{let e=this.collection(this.db,"support_services"),t=this.query(e,(0,s.Xo)("date","asc"));return(await this.getDocs(t)).docs.map(e=>({...e.data(),docId:e.id}))},this.addSupportService=async e=>{let{supportService:t}=e,l=this.collection(this.db,"support_services");await this.addDoc(l,{data:t,date:new Date})},this.updateSupportService=async e=>{let t=this.collection(this.db,"support_services"),l=this.doc(t,e.docId);delete e.docId,await this.updateDoc(l,e)},this.deleteSupportService=async e=>{let t=this.doc(this.db,"support_services",e);await this.deleteDoc(t)}}}let i=new a,o=i.getSupportServices.bind(i),r=i.addSupportService.bind(i),c=i.updateSupportService.bind(i),u=i.deleteSupportService.bind(i)}},function(e){e.O(0,[3153,6856,190,8583,1664,6541,955,4073,6455,5837,6080,3338,8591,4381,9031,2888,9774,179],function(){return e(e.s=82825)}),_N_E=e.O()}]);