(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6268],{85786:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/tenday/batch",function(){return n(26390)}])},26390:function(e,t,n){"use strict";n.r(t);var i=n(85893),r=n(67294),a=n(9473),s=n(45773),l=n(65328),o=n(60990),c=n(51015),d=n(60762),u=n(71919),p=n(12166),h=n(81873),g=n(33453),x=n(40110),m=n(92365),v=n(65806),f=n(56894),j=n(68573),b=n(52857),Z=n(92608),y=n(26541),S=n(96788),w=n(25837),k=n(44723),C=n(97182),B=n(84166),T=n(13539),P=n(95639),E=n(97416),G=n(31695),R=n(75941),_=n(46560),I=n(98813),D=n(96281),M=n(77457),N=n(9704),W=n(38660);let F={card:{padding:"16px",borderRadius:"8px",border:"1px solid #e0e0e0"},progressSection:{marginTop:"24px",padding:"16px",backgroundColor:"#f5f5f5",borderRadius:"8px"}};t.default=(0,l.Z)(function(e){var t;let{user:n,onBtnLogoutClick:l,loading:z}=e,A=(0,r.useRef)(!0),O=(0,r.useRef)(0),q=(0,a.I0)(),[L,U]=(0,r.useState)(null),[X,K]=(0,r.useState)([]),[Q,Y]=(0,r.useState)([]),[J,$]=(0,r.useState)([]),[H,V]=(0,r.useState)([]),[ee,et]=(0,r.useState)([]),[en,ei]=(0,r.useState)([]),[er,ea]=(0,r.useState)([]),[es,el]=(0,r.useState)(!0),[eo,ec]=(0,r.useState)(null),ed=(0,r.useRef)(null),[eu,ep]=(0,r.useState)({open:!1,url:"",filename:"",loading:!1,error:"",municipality:""}),{cropList:eh}=(0,N.Z)(),{services:eg}=(0,W.Z)(void 0,void 0),ex=eh.map(e=>({label:e,id:e})),[em,ev]=(0,r.useState)({isGenerating:!1,current:0,total:0,message:"",errors:[],generated:[],success:!1}),ef=()=>{ev({isGenerating:!1,current:0,total:0,message:"",errors:[],generated:[],success:!1})},ej=(0,r.useCallback)(()=>{ed.current&&(clearInterval(ed.current),ed.current=null)},[]),eb=(0,r.useCallback)(e=>{ej(),e&&(ed.current=setInterval(async()=>{try{var t,n;let i=null;try{i=localStorage.getItem("firebaseToken")}catch(e){i=null}if(!i)return;let r=await fetch("".concat("https://acap-mimaropa-server.onrender.com/api","/reports/tenday/batch/progress?requestId=").concat(encodeURIComponent(e)),{headers:{Authorization:"Bearer ".concat(i)}});if(!r.ok)return;let a=await r.json(),s=null==a?void 0:a.data;if(!s)return;let l=(null===(t=s.last)||void 0===t?void 0:t.municipality)&&(null===(n=s.last)||void 0===n?void 0:n.crop)?"".concat(s.last.municipality," - ").concat(s.last.crop):"",o=l?"Generating drafts... ".concat(l):"Generating drafts...";ev(e=>({...e,isGenerating:"done"!==s.status,current:s.current||e.current,total:s.total||e.total,message:o,success:!1})),s.done&&ej()}catch(e){}},800))},[ej]);(0,r.useEffect)(()=>(A.current=!0,(async()=>{try{let e=await (0,E.$m)();A.current&&($(e.data||[]),Y((0,D.m)(e.data)))}catch(e){console.error("Error loading provinces:",e)}})(),()=>{A.current=!1}),[]),(0,r.useEffect)(()=>{V([]),et([]),ei([]),ea([]),ef()},[L,X]),(0,r.useEffect)(()=>{if(0===X.length){ec(null);return}eo&&X.includes(eo)||ec(X[0])},[X,eo]);let eZ=e=>{K(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ey=e=>{et(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eS=(0,r.useCallback)(async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!L||0===X.length){alert("Please select a province and at least one crop");return}let n=J.find(e=>e.label===L.label),i=((null==n?void 0:null===(e=n.municipalities)||void 0===e?void 0:e.length)||0)*X.length;ev(e=>({...e,isGenerating:!0,current:0,total:i,message:"Checking available crops and municipalities...",errors:[],generated:[],success:!1}));try{let e=null!=t?t:++O.current,n="batch-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8));eb(n);let i=await q((0,R.JC)({region:"mimaropa",province:L.label,crops:X,requestId:n})).unwrap();if(e!==O.current)return;let r=i.drafts||[],a=i.errors||[],s=new Map,l=new Map;a.forEach(e=>{if(!(null==e?void 0:e.municipality)||!(null==e?void 0:e.crop))return;l.has(e.municipality)||l.set(e.municipality,new Map);let t=l.get(e.municipality);t.has(e.crop)||t.set(e.crop,[]),t.get(e.crop).push(e.error)}),r.forEach(e=>{s.has(e.municipality)||s.set(e.municipality,new Set),s.get(e.municipality).add(e.crop)});let o=J.find(e=>e.label===L.label),c=((null==o?void 0:o.municipalities)||[]).map(e=>e.label).map(e=>{let t=s.get(e)||new Set,n=X.map(n=>{var i;let r=t.has(n),a=(null===(i=l.get(e))||void 0===i?void 0:i.get(n))||[];return{crop:n,status:r?"complete":"incomplete",reason:r?"":a[0]||"Missing data"}}),i=n.filter(e=>"incomplete"===e.status).map(e=>{let{crop:t,reason:n}=e;return{crop:t,reason:n}});return{municipality:e,status:0===i.length?"complete":"incomplete",missing:i,perCropStatuses:n}}),d=Array.from(s.keys());ei(r),V(d),et(d),ea(c),ev({isGenerating:!1,current:i.success+i.failed,total:i.totalToGenerate,message:r.length>0?"Found ".concat(r.length," of ").concat(i.totalToGenerate," bulletins with data. ").concat(d.length," municipalities have at least one crop ready."):"No bulletin data found for the selected crops and date range.",errors:a,generated:r,success:r.length>0}),ej()}catch(e){ej(),ev(t=>({...t,isGenerating:!1,message:"Error checking data: ".concat(e),errors:[{error:e.toString()}],success:!1}))}},[q,J,L,X,eb,ej]);(0,r.useEffect)(()=>()=>ej(),[ej]),(0,r.useEffect)(()=>{if(!L||0===X.length)return;let e=++O.current,t=setTimeout(()=>{eS(e)},400);return()=>clearTimeout(t)},[eS,L,X]);let ew=async e=>{if(!L||!eo){alert("Please select a crop for preview");return}ep(t=>({...t,loading:!0,error:"",open:!0,municipality:e}));try{let t={region:"mimaropa",province:L.label,municipality:e,operation:"preview",language:es?"en":"tag",crop:eo,services:eg.map(e=>e.data)},n=await (0,G.bM)(t),i=new Blob([n],{type:"application/pdf"}),r=URL.createObjectURL(i),a="".concat(L.label,"_").concat(e,"_").concat(eo,".pdf");ep({open:!0,url:r,filename:a,loading:!1,error:"",municipality:e})}catch(t){let e=await (0,M.fu)(t);ep(t=>({...t,loading:!1,error:e||"Failed to load preview."}))}},ek=()=>{eu.url&&URL.revokeObjectURL(eu.url),ep({open:!1,url:"",filename:"",loading:!1,error:"",municipality:""})},eC=async()=>{if(!en.length)return;if(0===ee.length){alert("Please select at least one municipality to save");return}let e=new Set(ee),t=en.filter(t=>e.has(t.municipality));if(0===t.length){alert("No draft bulletins available for the selected municipalities");return}ev(e=>({...e,isGenerating:!0,current:0,total:t.length,message:"Publishing bulletins and uploading PDFs..."}));try{let e=0,i=[];for(let n of t){try{await (0,G.Bu)({region:"mimaropa",province:n.province,municipality:n.municipality,operation:"create",language:es?"en":"tag",crop:n.crop,services:eg.map(e=>e.data)}),e+=1}catch(e){i.push({municipality:n.municipality,crop:n.crop,error:e.message||e.toString()})}ev(t=>({...t,current:e+i.length}))}ev({isGenerating:!1,current:e,total:t.length,message:"Published ".concat(e," bulletins to server!"),errors:i,generated:[],success:e>0}),ei([]),V([]),et([]),q((0,_.uq)(I.Ry.TEN_DAY)),q((0,R.RC)({uid:n.uid,type:I.Ry.TEN_DAY}))}catch(e){ev(t=>({...t,isGenerating:!1,message:"Error saving: ".concat(e),errors:[{error:e.toString()}],success:!1}))}},eB=em.isGenerating,eT=em.total>0?Math.round(em.current/em.total*100):0,eP=eB&&(0===em.total||0===em.current),eE=H.length>0&&ee.length===H.length,eG=ee.length>0&&!eE,eR=J.find(e=>e.label===(null==L?void 0:L.label)),e_=(null==eR?void 0:null===(t=eR.municipalities)||void 0===t?void 0:t.length)||0,eI=er.filter(e=>"complete"===e.status),eD=er.filter(e=>"incomplete"===e.status),eM=eI.map(e=>e.municipality),eN=eD.map(e=>e.municipality),eW=en.length,eF=em.total||X.length*e_;return(0,i.jsx)(s.Z,{loading:z,user:n,onBtnLogoutClick:l,accLevel:I.DW.ADMIN,children:(0,i.jsxs)(o.Z,{sx:{padding:"24px"},children:[(0,i.jsx)(S.Z,{variant:"h4",sx:{marginBottom:"8px"},children:"Batch 10-Day Bulletin Generation"}),(0,i.jsx)(S.Z,{variant:"body2",sx:{marginBottom:"24px",color:"#666"},children:"Generate 10-Day bulletins for municipalities with complete data in a province with multiple crops in one operation."}),(0,i.jsxs)(j.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(j.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(d.Z,{sx:F.card,children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(S.Z,{variant:"h6",sx:{marginBottom:"16px"},children:"Selection Options"}),(0,i.jsx)(o.Z,{sx:{marginBottom:"16px"},children:(0,i.jsx)(w.Z,{disabled:eB,options:Q,value:L,onChange:(e,t)=>{U(t)},renderInput:e=>(0,i.jsx)(y.Z,{...e,label:"Select Province",size:"small"})})}),(0,i.jsx)(S.Z,{variant:"subtitle2",sx:{marginBottom:"12px"},children:"Select Crops (Only enabled crops with data will be generated):"}),(0,i.jsx)(f.Z,{children:ex.map(e=>(0,i.jsx)(v.Z,{control:(0,i.jsx)(p.Z,{checked:X.includes(e.label),onChange:()=>eZ(e.label),disabled:eB}),label:e.label},e.id))}),0===X.length&&(0,i.jsx)(k.Z,{severity:"info",sx:{marginTop:"12px"},children:"Select at least one crop to proceed"}),X.length>0&&(0,i.jsx)(o.Z,{sx:{marginTop:"16px"},children:(0,i.jsxs)(B.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,i.jsx)(v.Z,{control:(0,i.jsx)(T.Z,{checked:es,onChange:e=>el(e.target.checked)}),label:es?"English":"Tagalog"}),(0,i.jsx)(w.Z,{disabled:eB,options:X.map(e=>({label:e,id:e})),value:eo?{label:eo,id:eo}:null,onChange:(e,t)=>ec((null==t?void 0:t.label)||null),sx:{minWidth:"200px"},renderInput:e=>(0,i.jsx)(y.Z,{...e,label:"Preview Crop",size:"small"})})]})}),H.length>0&&(0,i.jsxs)(o.Z,{sx:{marginTop:"16px"},children:[(0,i.jsx)(S.Z,{variant:"subtitle2",sx:{marginBottom:"12px"},children:"Select Municipalities (with data):"}),(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(v.Z,{control:(0,i.jsx)(p.Z,{checked:eE,indeterminate:eG,onChange:()=>{if(ee.length===H.length){et([]);return}et(H)}}),label:"Select All"}),H.map(e=>(0,i.jsx)(v.Z,{control:(0,i.jsx)(p.Z,{checked:ee.includes(e),onChange:()=>ey(e),disabled:eB}),label:e},e))]})]}),er.length>0&&(0,i.jsxs)(o.Z,{sx:{marginTop:"16px"},children:[(0,i.jsx)(S.Z,{variant:"subtitle2",sx:{marginBottom:"12px"},children:"Municipality Status"}),(0,i.jsx)(B.Z,{spacing:1,children:er.map(e=>{var t,n;return(0,i.jsxs)(o.Z,{sx:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0"},children:[(0,i.jsxs)(B.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,i.jsx)(S.Z,{variant:"body2",sx:{fontWeight:600},children:e.municipality}),(0,i.jsx)(h.Z,{size:"small",label:"complete"===e.status?"Complete":"in-progress"===e.status?"In Progress":"Incomplete",color:"complete"===e.status?"success":"in-progress"===e.status?"info":"warning"}),(null===(n=e.perCropStatuses)||void 0===n?void 0:n.some(e=>"complete"===e.status))?(0,i.jsx)(c.Z,{size:"small",variant:"outlined",onClick:()=>{var t;let n=null===(t=e.perCropStatuses)||void 0===t?void 0:t.find(e=>e.crop===eo);if((null==n?void 0:n.status)!=="complete"){alert("Preview crop is missing for this municipality. Choose a crop marked OK.");return}ew(e.municipality)},disabled:eB||!eo,children:"Preview"}):null]}),(null===(t=e.perCropStatuses)||void 0===t?void 0:t.length)>0&&(0,i.jsx)(B.Z,{direction:"row",spacing:1,useFlexGap:!0,flexWrap:"wrap",sx:{marginTop:"6px"},children:e.perCropStatuses.map(t=>{let n="Missing",r="warning",a="outlined";return"complete"===t.status?(n="OK",r="success",a="filled"):"running"===t.status?(n="Running",r="info",a="filled"):"pending"===t.status&&(n="Pending",r="default",a="outlined"),(0,i.jsx)(h.Z,{size:"small",label:"".concat(t.crop,": ").concat(n),color:r,variant:a},"".concat(e.municipality,"-").concat(t.crop))})}),"incomplete"===e.status&&e.missing.length>0&&(0,i.jsx)(o.Z,{sx:{marginTop:"6px"},children:e.missing.map(t=>(0,i.jsxs)(S.Z,{variant:"caption",display:"block",sx:{color:"#d32f2f"},children:[t.crop,": ",t.reason]},"".concat(e.municipality,"-").concat(t.crop)))})]},e.municipality)})})]}),L&&X.length>0&&0===H.length&&em.message&&(0,i.jsx)(k.Z,{severity:"warning",sx:{marginTop:"12px"},children:"No municipalities found with complete data for the selected crops."})]})})}),(0,i.jsx)(j.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(d.Z,{sx:F.card,children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(S.Z,{variant:"h6",sx:{marginBottom:"16px"},children:"Generation Summary"}),(0,i.jsxs)(o.Z,{sx:{marginBottom:"12px"},children:[(0,i.jsxs)(S.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Province:"})," ",L?L.label:"Not selected"]}),(0,i.jsxs)(S.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Selected Crops:"})," ",X.length>0?X.join(", "):"None"]}),(0,i.jsxs)(S.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Municipalities Selected:"})," ",ee.length>0?"".concat(ee.length," selected"):"None"]}),(0,i.jsxs)(S.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Municipalities With Data:"})," ",L?"".concat(H.length," of ").concat(e_):"N/A"]}),(0,i.jsxs)(S.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Status:"})," ",er.length>0?"".concat(eI.length," complete, ").concat(eD.length," incomplete"):"Not checked"]}),(0,i.jsxs)(S.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Bulletins Ready:"})," ",eF>0?"".concat(eW," of ").concat(eF):"Not checked"]})]}),er.length>0&&(0,i.jsxs)(o.Z,{sx:{marginBottom:"12px"},children:[(0,i.jsx)(S.Z,{variant:"body2",sx:{fontWeight:600,marginBottom:"6px"},children:"Pass/Fail Summary"}),(0,i.jsxs)(S.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Pass:"})," ",eI.length," | ",(0,i.jsx)("strong",{children:"Fail:"})," ",eD.length]}),eM.length>0&&(0,i.jsxs)(o.Z,{sx:{marginTop:"8px"},children:[(0,i.jsx)(S.Z,{variant:"caption",sx:{fontWeight:600,display:"block"},children:"Successful Municipalities"}),(0,i.jsx)(B.Z,{direction:"row",spacing:1,useFlexGap:!0,flexWrap:"wrap",sx:{marginTop:"4px"},children:eM.map(e=>(0,i.jsx)(h.Z,{size:"small",label:e,color:"success",variant:"outlined"},"success-".concat(e)))})]}),eN.length>0&&(0,i.jsxs)(o.Z,{sx:{marginTop:"8px"},children:[(0,i.jsx)(S.Z,{variant:"caption",sx:{fontWeight:600,display:"block"},children:"Incomplete Municipalities"}),(0,i.jsx)(B.Z,{direction:"row",spacing:1,useFlexGap:!0,flexWrap:"wrap",sx:{marginTop:"4px"},children:eN.map(e=>(0,i.jsx)(h.Z,{size:"small",label:e,color:"warning",variant:"outlined"},"fail-".concat(e)))})]})]}),L&&X.length>0&&(0,i.jsxs)(k.Z,{severity:"info",children:["Will generate bulletins only for crops with available data in"," ",(0,i.jsx)("strong",{children:L.label})," for each selected crop"]})]})})}),(0,i.jsx)(j.ZP,{item:!0,xs:12,children:(0,i.jsxs)(o.Z,{sx:{display:"flex",gap:"12px"},children:[(0,i.jsx)(c.Z,{variant:"contained",color:"primary",onClick:()=>eS(),disabled:eB||!L||0===X.length,sx:{minWidth:"200px"},children:eB?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.Z,{size:20,sx:{marginRight:"8px"}}),"Checking..."]}):"Recheck Data"}),em.success&&ee.length>0&&(0,i.jsx)(c.Z,{variant:"contained",color:"success",onClick:eC,sx:{minWidth:"200px"},children:"✓ Save Selected Bulletins"}),(0,i.jsx)(c.Z,{variant:"outlined",onClick:()=>{U(null),K([]),V([]),et([]),ei([]),ef()},disabled:eB,children:"Reset"})]})}),em.message&&(0,i.jsx)(j.ZP,{item:!0,xs:12,children:(0,i.jsxs)(o.Z,{sx:F.progressSection,children:[(0,i.jsx)(S.Z,{variant:"h6",sx:{marginBottom:"12px"},children:"Generation Progress"}),eB&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,i.jsxs)(S.Z,{variant:"body2",children:[em.current," / ",em.total||"..."]}),(0,i.jsx)(S.Z,{variant:"body2",children:eP?"In progress...":"".concat(eT,"%")})]}),(0,i.jsx)(Z.Z,{variant:eP?"indeterminate":"determinate",value:eP?void 0:eT,sx:{marginBottom:"12px",height:"8px"}})]}),(0,i.jsx)(k.Z,{severity:em.success?"success":eB?"info":"error",sx:{marginBottom:"12px"},children:em.message}),em.errors.length>0&&(0,i.jsxs)(o.Z,{sx:{marginTop:"12px"},children:[(0,i.jsx)(S.Z,{variant:"subtitle2",sx:{marginBottom:"8px",color:"#d32f2f"},children:"Errors:"}),em.errors.slice(0,5).map((e,t)=>(0,i.jsxs)(S.Z,{variant:"caption",display:"block",sx:{color:"#d32f2f",marginBottom:"4px"},children:["• ",e.municipality," - ",e.crop,": ",e.error]},t)),em.errors.length>5&&(0,i.jsxs)(S.Z,{variant:"caption",sx:{color:"#d32f2f"},children:["... and ",em.errors.length-5," more errors"]})]}),em.generated.length>0&&(0,i.jsxs)(o.Z,{sx:{marginTop:"12px"},children:[(0,i.jsxs)(S.Z,{variant:"subtitle2",sx:{marginBottom:"8px",color:"#388e3c"},children:["Successfully Generated (",em.generated.length,"):"]}),em.generated.slice(0,5).map((e,t)=>(0,i.jsxs)(S.Z,{variant:"caption",display:"block",sx:{color:"#388e3c",marginBottom:"4px"},children:["✓ ",e.municipality," - ",e.crop]},t)),em.generated.length>5&&(0,i.jsxs)(S.Z,{variant:"caption",sx:{color:"#388e3c"},children:["... and ",em.generated.length-5," more"]})]})]})})]}),(0,i.jsxs)(g.Z,{open:eu.open,onClose:ek,fullWidth:!0,maxWidth:"lg",children:[(0,i.jsxs)(m.Z,{children:["Preview: ",eu.municipality||"Municipality",(0,i.jsx)(b.Z,{"aria-label":"close",onClick:ek,sx:{position:"absolute",right:8,top:8},children:(0,i.jsx)(P.Z,{})})]}),(0,i.jsxs)(x.Z,{dividers:!0,children:[eu.loading&&(0,i.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",padding:"24px"},children:(0,i.jsx)(C.Z,{})}),eu.error&&(0,i.jsx)(k.Z,{severity:"error",sx:{marginBottom:"12px"},children:eu.error}),eu.url&&(0,i.jsx)(o.Z,{sx:{height:"70vh"},children:(0,i.jsx)("iframe",{title:"10-day preview",src:eu.url,style:{width:"100%",height:"100%",border:"none"}})})]})]})]})})})},9704:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(67294),r=n(61061);function a(){let[e,t]=(0,i.useState)([]),[n,a]=(0,i.useState)(!1),[s,l]=(0,i.useState)("");return(0,i.useEffect)(()=>{(async()=>{var e,n,i;try{a(!0);let n=await (0,r.TQ)();t(null!==(e=null==n?void 0:n.list)&&void 0!==e?e:[]),a(!1),l("")}catch(e){l(null!==(i=null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)&&void 0!==i?i:e.message),a(!1),t([])}})()},[]),{cropList:e,loading:n,error:s}}},38660:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(67294),r=n(98037);function a(e,t){let[n,a]=(0,i.useState)([]),[s,l]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(async()=>{try{let e=await (0,r.yZ)();a(null!=e?e:[])}catch(n){var e,t;c(null!==(t=null==n?void 0:null===(e=n.response)||void 0===e?void 0:e.data)&&void 0!==t?t:n.message),l(!1)}})()},[e,t]),{services:n,loading:s,error:o}}},98037:function(e,t,n){"use strict";n.d(t,{Wn:function(){return o},vo:function(){return d},yZ:function(){return l},Ef:function(){return c}});var i=n(96171),r=n(36100);class a extends i.Z{constructor(...e){super(...e),this.getSupportServices=async()=>{let e=this.collection(this.db,"support_services"),t=this.query(e,(0,r.Xo)("date","asc"));return(await this.getDocs(t)).docs.map(e=>({...e.data(),docId:e.id}))},this.addSupportService=async e=>{let{supportService:t}=e,n=this.collection(this.db,"support_services");await this.addDoc(n,{data:t,date:new Date})},this.updateSupportService=async e=>{let t=this.collection(this.db,"support_services"),n=this.doc(t,e.docId);delete e.docId,await this.updateDoc(n,e)},this.deleteSupportService=async e=>{let t=this.doc(this.db,"support_services",e);await this.deleteDoc(t)}}}let s=new a,l=s.getSupportServices.bind(s),o=s.addSupportService.bind(s),c=s.updateSupportService.bind(s),d=s.deleteSupportService.bind(s)},77457:function(e,t,n){"use strict";n.d(t,{aS:function(){return a},fu:function(){return s}});var i=n(98813);let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(e).toFixed(t)},a=e=>e===i.nQ?i.DD:r(e),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Promise(t=>{if(void 0===e||"object"!=typeof e)t("Missing error response object");else if(e.response){if(e.response.data instanceof Blob){let n=new Blob([e.response.data],{type:"application/octet-stream"}),i=new FileReader;i.onload=()=>{t(i.result)},i.readAsText(n)}else t("Error reading data")}else e.request?t(e.request):t(e.message)})}},96281:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return e.map((e,n)=>({id:n,label:e[t]}))}}},function(e){e.O(0,[3153,7023,3745,1664,6541,8848,6294,6905,5837,9998,4723,3539,7235,8591,2888,9774,179],function(){return e(e.s=85786)}),_N_E=e.O()}]);