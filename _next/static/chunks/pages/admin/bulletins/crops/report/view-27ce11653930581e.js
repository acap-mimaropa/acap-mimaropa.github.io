(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9472],{26754:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/report/view",function(){return t(70284)}])},71663:function(e,n){"use strict";n.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},headerText:{marginBottom:"32px",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"top"},conditionLegend:{borderRadius:e=>e.spacing(1),width:"100%",padding:e=>e.spacing(1),border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:e=>e.spacing(1)},recSeasonal:{marginTop:e=>e.spacing(1),marginBottom:e=>e.spacing(5),"& p, ul, ol":{fontSize:"14px"}},recSeasonalStage:{marginTop:e=>e.spacing(5),marginBottom:e=>e.spacing(2),textDecoration:"underline"},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"48px"}},pdfcontent:{ul:{paddingLeft:3}}}},70284:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var i=t(85893),o=t(67294),r=t(9473),a=t(11163),l=t(65328),s=t(45773),d=t(45697),c=t.n(d),p=t(60990),u=t(51015),x=t(49986),m=t(56912),h=t(88607),g=t(28907),b=t(96788),f=t(40155),j=t(42823),v=t(16729),Z=t(25517),y=t(84325),S=t(67812),w=t(51963),C=t(71663),k=t(76975),B=t(77208),T=t(14971),D=t(61730);let R=(0,B.Z)();function E(e){let{children:n,value:t,index:o,...r}=e;return r.smallscreen&&(r.smallscreen=r.smallscreen.toString()),(0,i.jsx)("div",{role:"tabpanel",hidden:t!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),...r,children:t===o&&(0,i.jsx)(p.Z,{sx:{p:r.smallscreen?2:3,whiteSpace:(null==e?void 0:e.smsstyle)||"normal"},children:n})})}function _(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function F(e){let{report:n,loading:t,onBackBtnClick:a,onDeleteClick:l,onSmsBtnClick:s}=e,[d,c]=(0,o.useState)(0),{fieldValues:B}=(0,w.Z)(n,[S.X3.REGION,S.X3.TYPE,S.X3.UID,S.X3.ID]),{status:F,error:I}=(0,r.v9)(e=>e.reports),N=(0,D.Z)(R.breakpoints.between("xs","md"));return(0,i.jsx)("div",{children:t||n.loading?(0,i.jsx)(f.Z,{}):void 0!==n.stages?(0,i.jsxs)(p.Z,{container:!0,sx:C.Z.container,children:[(0,i.jsxs)(p.Z,{sx:{marginBottom:"32px",display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(T.Z,{theme:R,children:(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(b.Z,{variant:"h5",children:"Crop Recommendation Summary"}),(0,i.jsx)(b.Z,{variant:"h6",children:y.eT[n.type]})]})}),(0,i.jsxs)(x.Z,{orientation:N?"vertical":"horizontal",children:[(0,i.jsx)(u.Z,{disableElevation:!0,color:"primary",sx:{...C.Z.button,color:e=>e.palette.primary.main},variant:"outlined",onClick:s,children:"SMS"}),(0,i.jsx)(v.Z,{isOpen:!1,maxWidth:"sm",openButtonText:"Delete",title:"Delete Report",contentText:""!==n.info?n.info:"Are you sure you want to delete this Bulletin report log?",confirmBtnText:""!==n.info?"Ok":"Delete",modalConfirmHandlerCB:l,loading:F===Z.G.PENDING,modalButtonStyles:{borderRadius:0,width:"100%"},children:""!==I&&(0,i.jsx)(b.Z,{variant:"caption",sx:{color:"red"},children:I})}),(0,i.jsx)(u.Z,{disableElevation:!0,color:"primary",variant:"contained",sx:C.Z.button,onClick:a,children:"Back"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(p.Z,{sx:k.Z.details,children:[B.map(e=>{var n;return(0,i.jsx)("div",{children:(0,i.jsxs)(b.Z,{variant:"body2",children:[(0,i.jsxs)("strong",{children:[null==e?void 0:e.label,": "]})," ",null!==(n=null==e?void 0:e.value)&&void 0!==n?n:"-"]})},e.id)}),(0,i.jsxs)(b.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"ID:"})," ",n.id]})]}),(0,i.jsx)(m.Z,{sx:{marginTop:"32px"}})]}),(0,i.jsxs)(p.Z,{sx:{width:"100%"},children:[(0,i.jsx)(p.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(h.Z,{value:d,onChange:(e,n)=>{c(n)},"aria-label":"basic tabs example",children:[(0,i.jsx)(g.Z,{label:"PDF FORM",..._(0)}),(0,i.jsx)(g.Z,{label:"SMS FORM",..._(1)})]})}),(0,i.jsx)(E,{value:d,index:0,smallscreen:!!N||void 0,smsstyle:"normal",children:(0,i.jsx)(p.Z,{sx:{ul:N?C.Z.pdfcontent.ul:"none",hr:k.Z.htmlReportHR,...k.Z.content},dangerouslySetInnerHTML:{__html:n.recommendations}})}),(0,i.jsx)(E,{value:d,index:1,smsstyle:"pre-wrap",children:(0,i.jsx)(b.Z,{variant:"body1",gutterBottom:!0,children:n.smsRecommendations||(0,i.jsx)("span",{style:{color:"#ff1744"},children:"No SMS Recommendations available."})})})]})]}):(0,i.jsx)(j.Z,{})})}R.typography.h5={fontSize:"1.2rem","@media (min-width:600px)":{fontSize:"1.5rem"},[R.breakpoints.up("md")]:{fontSize:"2rem"}},E.propTypes={children:c().node,index:c().number.isRequired,value:c().number.isRequired},F.propTypes={report:c().object,loading:c().bool,onBackBtnClick:c().func,onDeleteClick:c().func,onSmsBtnClick:c().func};var I=t(88925),N=t(98813),L=t(92246),M=t(75941),O=t(31695);let z={loading:!0,error:"",info:"",deleting:!1};var W=(0,l.Z)(function(e){let[n,t]=(0,o.useState)(z),l=(0,a.useRouter)(),d=(0,r.I0)();(0,o.useEffect)(()=>{d((0,I.s_)())},[d]),(0,o.useEffect)(()=>{n.loading&&Object.keys(l.query).length>0&&(async()=>{try{let e=await (0,O.QL)(l.query.docId),n=e.date_created.toDate();e.date_created="".concat(n.toDateString()," ").concat(n.toLocaleTimeString("it-IT",L.W6)),t(n=>({...n,loading:!1,...e}))}catch(e){t({...z,loading:!1,error:e.message})}})()},[l,n.loading]);let c=async()=>{""===n.info?d((0,M.Ee)(n.id)).unwrap().then(()=>{t(e=>({...e,deleting:!1,info:"Report deleted."}))}):l.push("/admin/bulletins/crops")};return(0,i.jsx)(s.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:N.DW.ADMIN,children:(0,i.jsx)(F,{report:n,loading:e.loading,onBackBtnClick:()=>{l.push("/admin/bulletins/crops")},onDeleteClick:c,onSmsBtnClick:()=>{l.push({pathname:"/admin/sms/viewSMS",query:{docId:n.id}})}})})})}},function(e){e.O(0,[3153,7023,3745,1664,8848,6294,6905,9998,3338,7212,8591,1182,2888,9774,179],function(){return e(e.s=26754)}),_N_E=e.O()}]);