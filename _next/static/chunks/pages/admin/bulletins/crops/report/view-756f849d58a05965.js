(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9472],{26754:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/report/view",function(){return i(70284)}])},42823:function(e,n,i){"use strict";i.d(n,{Z:function(){return c}});var t=i(85893),o=i(25675),r=i.n(o),l=i(60990),a=i(96788),d=i(71604),s={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},c=function(e){let{message:n="Failed to load data",style:i={}}=e;return(0,t.jsxs)(l.Z,{sx:s,style:i,children:[(0,t.jsx)(r(),{unoptimized:!0,src:(0,d.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:d.imageLoader,alt:"Empty data"}),(0,t.jsx)(a.Z,{variant:"subtitle1",children:n})]})}},40155:function(e,n,i){"use strict";i.d(n,{Z:function(){return c}});var t=i(85893),o=i(60990),r=i(56912),l=i(84324),a={padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},d={marginTop:"32px",marginBottom:"32px"},s={marginTop:"16px",marginBottom:"16px"},c=function(){return(0,t.jsxs)(o.Z,{sx:a,children:[(0,t.jsx)(o.Z,{sx:{width:"300px"},children:[1,2,3,4,5,6,7,8].map(e=>(0,t.jsx)(l.Z,{variant:"text"},"up-".concat(e)))}),(0,t.jsx)(r.Z,{sx:d}),(0,t.jsx)(o.Z,{children:[1,2,3,4,5,6,7,8].map(e=>(0,t.jsx)(l.Z,{variant:"rectangular",sx:s},"down-".concat(e)))})]})}},76975:function(e,n){"use strict";n.Z={htmlReportHR:{color:"rgba(0, 0, 0, 0.87)",fontWeight:400,fontSize:"1rem",lineHeight:"1.5",flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:"rgba(0, 0, 0, 0.12)",borderBottomWidth:"thin",margin:"48px 0 48px 0"},details:{maxWidth:{md:"60%",sm:"100%"},"& div":{marginBottom:"4px"},"& p":{color:e=>e.palette.grey[800]}},content:{"& h2":{fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:400,fontSize:"1.5rem",lineHeight:1.334,letterSpacing:"0em",textDecoration:"underline"},"& h3":{fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:500,fontSize:"1.25rem",lineHeight:1.6,letterSpacing:"0.0075em",color:"rgba(0, 0, 0, 0.67)"},"& li":{fontSize:"14px"}}}},71663:function(e,n){"use strict";n.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},headerText:{marginBottom:"32px",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"top"},conditionLegend:{borderRadius:e=>e.spacing(1),width:"100%",padding:e=>e.spacing(1),border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:e=>e.spacing(1)},recSeasonal:{marginTop:e=>e.spacing(1),marginBottom:e=>e.spacing(5),"& p, ul, ol":{fontSize:"14px"}},recSeasonalStage:{marginTop:e=>e.spacing(5),marginBottom:e=>e.spacing(2),textDecoration:"underline"},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"48px"}},pdfcontent:{ul:{paddingLeft:3}}}},70284:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return P}});var t=i(85893),o=i(67294),r=i(9473),l=i(11163),a=i(65328),d=i(45773),s=i(45697),c=i.n(s),p=i(60990),u=i(51015),m=i(49986),x=i(56912),g=i(88607),h=i(28907),f=i(96788),b=i(40155),v=i(42823),S=i(16729),I=i(25517),T=i(84325),E=i(67812),y=i(51963),C=i(71663),N=i(76975),R=i(77208),j=i(14971),D=i(61730);let Z=(0,R.Z)();function O(e){let{children:n,value:i,index:o,...r}=e;return r.smallscreen&&(r.smallscreen=r.smallscreen.toString()),(0,t.jsx)("div",{role:"tabpanel",hidden:i!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),...r,children:i===o&&(0,t.jsx)(p.Z,{sx:{p:r.smallscreen?2:3,whiteSpace:(null==e?void 0:e.smsstyle)||"normal"},children:n})})}function w(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function _(e){let{report:n,loading:i,onBackBtnClick:l,onDeleteClick:a,onSmsBtnClick:d}=e,[s,c]=(0,o.useState)(0),{fieldValues:R}=(0,y.Z)(n,[E.X3.REGION,E.X3.TYPE,E.X3.UID,E.X3.ID]),{status:_,error:A}=(0,r.v9)(e=>e.reports),F=(0,D.Z)(Z.breakpoints.between("xs","md"));return(0,t.jsx)("div",{children:i||n.loading?(0,t.jsx)(b.Z,{}):void 0!==n.stages?(0,t.jsxs)(p.Z,{container:!0,sx:C.Z.container,children:[(0,t.jsxs)(p.Z,{sx:{marginBottom:"32px",display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)(j.Z,{theme:Z,children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(f.Z,{variant:"h5",children:"Crop Recommendation Summary"}),(0,t.jsx)(f.Z,{variant:"h6",children:T.eT[n.type]})]})}),(0,t.jsxs)(m.Z,{orientation:F?"vertical":"horizontal",children:[(0,t.jsx)(u.Z,{disableElevation:!0,color:"primary",sx:{...C.Z.button,color:e=>e.palette.primary.main},variant:"outlined",onClick:d,children:"SMS"}),(0,t.jsx)(S.Z,{isOpen:!1,maxWidth:"sm",openButtonText:"Delete",title:"Delete Report",contentText:""!==n.info?n.info:"Are you sure you want to delete this Bulletin report log?",confirmBtnText:""!==n.info?"Ok":"Delete",modalConfirmHandlerCB:a,loading:_===I.G.PENDING,modalButtonStyles:{borderRadius:0,width:"100%"},children:""!==A&&(0,t.jsx)(f.Z,{variant:"caption",sx:{color:"red"},children:A})}),(0,t.jsx)(u.Z,{disableElevation:!0,color:"primary",variant:"contained",sx:C.Z.button,onClick:l,children:"Back"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(p.Z,{sx:N.Z.details,children:[R.map(e=>{var n;return(0,t.jsx)("div",{children:(0,t.jsxs)(f.Z,{variant:"body2",children:[(0,t.jsxs)("strong",{children:[null==e?void 0:e.label,": "]})," ",null!==(n=null==e?void 0:e.value)&&void 0!==n?n:"-"]})},e.id)}),(0,t.jsxs)(f.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"ID:"})," ",n.id]})]}),(0,t.jsx)(x.Z,{sx:{marginTop:"32px"}})]}),(0,t.jsxs)(p.Z,{sx:{width:"100%"},children:[(0,t.jsx)(p.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,t.jsxs)(g.Z,{value:s,onChange:(e,n)=>{c(n)},"aria-label":"basic tabs example",children:[(0,t.jsx)(h.Z,{label:"PDF FORM",...w(0)}),(0,t.jsx)(h.Z,{label:"SMS FORM",...w(1)})]})}),(0,t.jsx)(O,{value:s,index:0,smallscreen:!!F||void 0,smsstyle:"normal",children:(0,t.jsx)(p.Z,{sx:{ul:F?C.Z.pdfcontent.ul:"none",hr:N.Z.htmlReportHR,...N.Z.content},dangerouslySetInnerHTML:{__html:n.recommendations}})}),(0,t.jsx)(O,{value:s,index:1,smsstyle:"pre-wrap",children:(0,t.jsx)(f.Z,{variant:"body1",gutterBottom:!0,children:n.smsRecommendations||(0,t.jsx)("span",{style:{color:"#ff1744"},children:"No SMS Recommendations available."})})})]})]}):(0,t.jsx)(v.Z,{})})}Z.typography.h5={fontSize:"1.2rem","@media (min-width:600px)":{fontSize:"1.5rem"},[Z.breakpoints.up("md")]:{fontSize:"2rem"}},O.propTypes={children:c().node,index:c().number.isRequired,value:c().number.isRequired},_.propTypes={report:c().object,loading:c().bool,onBackBtnClick:c().func,onDeleteClick:c().func,onSmsBtnClick:c().func};var A=i(88925),F=i(98813),M=i(92246),k=i(75941),W=i(31695);let B={loading:!0,error:"",info:"",deleting:!1};var P=(0,a.Z)(function(e){let[n,i]=(0,o.useState)(B),a=(0,l.useRouter)(),s=(0,r.I0)();(0,o.useEffect)(()=>{s((0,A.s_)())},[s]),(0,o.useEffect)(()=>{n.loading&&Object.keys(a.query).length>0&&(async()=>{try{let e=await (0,W.QL)(a.query.docId),n=e.date_created.toDate();e.date_created="".concat(n.toDateString()," ").concat(n.toLocaleTimeString("it-IT",M.W6)),i(n=>({...n,loading:!1,...e}))}catch(e){i({...B,loading:!1,error:e.message})}})()},[a,n.loading]);let c=async()=>{""===n.info?s((0,k.Ee)(n.id)).unwrap().then(()=>{i(e=>({...e,deleting:!1,info:"Report deleted."}))}):a.push("/admin/bulletins/crops")};return(0,t.jsx)(d.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:F.DW.ADMIN,children:(0,t.jsx)(_,{report:n,loading:e.loading,onBackBtnClick:()=>{a.push("/admin/bulletins/crops")},onDeleteClick:c,onSmsBtnClick:()=>{a.push({pathname:"/admin/sms/viewSMS",query:{docId:n.id}})}})})})},67812:function(e,n,i){"use strict";i.d(n,{$P:function(){return l},GW:function(){return r},I4:function(){return d},KM:function(){return s},X3:function(){return t},qv:function(){return o},vU:function(){return a}});let t={UID:"uid",ID:"id",REGION:"region",PROVINCE:"province",MUNICIPALITY:"municipality",TYPE:"type",CROP:"crop",STAGES:"stages",ACTIVITIES:"activities",MONTH:"month",CONDITION:"condition",CONDITIONS:"conditions",RISK:"risk",DATE_RANGE:"date_range",RAINFALL:"rainfall",TYPHOON:"typhoon",WIND_SIGNAL:"wind_signal",RECOMMENDATIONS:"recommendations",SMS_RECOMMENDATIONS:"smsRecommendations",UPDATED_BY:"updated_by",DATE_CREATED:"date_created"},o=[{field:t.REGION,label:"Region"},{field:t.PROVINCE,label:"Province"},{field:t.MUNICIPALITY,label:"Municipality"},{field:t.TYPE,label:"Report Type"},{field:t.CROP,label:"Crop"}],r=[{field:t.MONTH,label:"Month"},{field:t.STAGES,label:"Crop Stage(s)"},{field:t.ACTIVITIES,label:"Farming Activities"},{field:t.RISK,label:"Climate Risk"}],l=[{field:t.CONDITION,label:"Weather Condition"},{field:t.CONDITIONS,label:"Weather Condition"}],a=[{field:t.DATE_RANGE,label:"Weather data validity"},{field:t.RAINFALL,label:"Weather Condition"}],d=[{field:t.TYPHOON,label:"Typhoon Name"},{field:t.WIND_SIGNAL,label:"Wind Signal No."}],s={CROP_RECOMMENDATIONS:[{field:t.RECOMMENDATIONS,label:"Recommendations"},{field:t.SMS_RECOMMENDATIONS,label:"SMS Recommendations"}],USER_INFO:[{field:t.UPDATED_BY,label:"Created by"},{field:t.DATE_CREATED,label:"Date created"},{field:t.UID,label:"User ID"},{field:t.ID,label:"ID"}]}},51963:function(e,n,i){"use strict";i.d(n,{Z:function(){return l}});var t=i(67294),o=i(98813),r=i(67812);function l(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[i,l]=(0,t.useState)([]),a=(e,n)=>{var i,t,l,a,d,s;let c="";switch(e){case r.X3.CONDITIONS:for(let e=0;e<(null!=n?n:[]).length;e+=1)c+="".concat(null===(i=o.re[null===(l=n[e])||void 0===l?void 0:null===(t=l.mo)||void 0===t?void 0:t.toUpperCase()])||void 0===i?void 0:i.format,": ")+(null!==(d=null===(a=Object.values(o.MW).find(i=>{var t;return i.label===(null===(t=n[e])||void 0===t?void 0:t.con)}))||void 0===a?void 0:a.sync)&&void 0!==d?d:"n/a"),e<n.length-1&&(c+=", ");break;case r.X3.CONDITION:c=(null===(s=Object.values(o.MW).find(e=>e.label===n))||void 0===s?void 0:s.sync)||"n/a";break;default:c=n}return Array.isArray(c)&&(c=c.toString().split(",").join(", ")),null!=c?c:"n/a"};return(0,t.useEffect)(()=>{if(!(null==e?void 0:e.id)||i.length>0)return;let t=[...r.qv];"seasonal"===e[r.X3.TYPE]&&(t=[...t,...r.GW,...r.$P,...r.KM.USER_INFO]),"ten_day"===e[r.X3.TYPE]&&(t=[...t,...r.GW,...r.vU,...r.KM.USER_INFO]),"special_weather"===e[r.X3.TYPE]&&(t=[...t,...r.I4,...r.KM.USER_INFO]),l(t.map((n,i)=>({...n,id:i,value:a(n.field,null==e?void 0:e[n.field])})).filter(e=>!n.includes(e.field)&&!["-","n/a"].includes(e.value)))},[e,n,i]),{fieldValues:i}}}},function(e){e.O(0,[3153,7023,3745,1664,955,7958,4073,4959,6080,3338,9619,4588,2888,9774,179],function(){return e(e.s=26754)}),_N_E=e.O()}]);