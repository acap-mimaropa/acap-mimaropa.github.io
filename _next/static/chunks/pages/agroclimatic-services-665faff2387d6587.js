(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6603],{49361:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return n(3604)}])},48414:function(e,t,n){"use strict";var l=n(85893),i=n(9008),a=n.n(i),s=n(98813);t.Z=function(e){let{title:t,ogDescription:n,ogImageURL:i,ogImgAlt:o="Picture",ogSiteName:r="ACAP-".concat(s.Gt.toUpperCase()),ogURL:c,canonicalURL:d="http://localhost"}=e;return(0,l.jsxs)(a(),{children:[(0,l.jsx)("meta",{name:"description",content:n}),(0,l.jsx)("meta",{rel:"canonical",href:d}),(0,l.jsx)("meta",{name:"og:description",content:n}),(0,l.jsx)("meta",{property:"og:title",content:t}),(0,l.jsx)("meta",{property:"og:site_name",content:r}),(0,l.jsx)("meta",{property:"og:image",content:i}),(0,l.jsx)("meta",{property:"og:image:width",content:"600"}),(0,l.jsx)("meta",{property:"og:image:height",content:"315"}),(0,l.jsx)("meta",{property:"og:image:alt",content:o}),(0,l.jsx)("meta",{property:"og:url",content:c}),(0,l.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,l.jsx)("meta",{name:"twitter:title",content:t}),(0,l.jsx)("meta",{name:"twitter:image",content:i}),(0,l.jsx)("title",{children:t})]})}},2052:function(e,t,n){"use strict";var l=n(85893),i=n(93454);t.Z=function(e){return(0,l.jsx)(i.Z,{...e,elevation:15})}},42823:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var l=n(85893),i=n(25675),a=n.n(i),s=n(60990),o=n(96788),r=n(71604),c={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},d=function(e){let{message:t="Failed to load data",style:n={}}=e;return(0,l.jsxs)(s.Z,{sx:c,style:n,children:[(0,l.jsx)(a(),{unoptimized:!0,src:(0,r.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:r.imageLoader,alt:"Empty data"}),(0,l.jsx)(o.Z,{variant:"subtitle1",children:t})]})}},56112:function(e,t,n){"use strict";var l=n(85893),i=n(93454);let a=(0,n(77527).ZP)(e=>(0,l.jsx)(i.Z,{...e}))(e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:t.spacing(1),boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}});t.Z=a},3604:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return J},default:function(){return X}});var l=n(85893),i=n(67294),a=n(97416),s=n(56112),o=n(98813),r=n(25675),c=n.n(r),d=n(45697),u=n.n(d),p=n(26541),h=n(25837),m=n(60990),g=n(51015),x=n(49986),_=n(56912),v=n(96788),f=n(68573),y=n(2052),b=n(84630),j={container:{display:"flex",flexDirection:"column"},cardContainer:{display:{xs:"none",md:"grid"},"& h6":{fontSize:"1.2rem",lineHeight:"1.6rem"},"& h6:nth-child(2)":{fontWeight:"bold"},placeContent:"center",width:"100%",maxWidth:"430px",minHeight:"85px",border:"2px solid #cc00cc",borderRadius:"40px",padding:e=>e.spacing(2),margin:"auto",marginBottom:"6px",marginTop:"6px",textAlign:"center",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px !important"},arrowIcon:{margin:"auto",color:"#cc00cc",display:{xs:"none",md:"block"}}},C=function(e){let{info:t,show:n=!0,borderColor:i="#cc00cc"}=e;return(0,l.jsxs)(m.Z,{sx:j.container,children:[(0,l.jsxs)(m.Z,{sx:j.cardContainer,style:{borderColor:i},children:[(0,l.jsx)(v.Z,{variant:"subtitle1",children:"You have selected ".concat("cropstage"===t.from?"crop stage":t.from)}),(0,l.jsx)(v.Z,{variant:"subtitle1",children:t.label})]}),n&&(0,l.jsx)(b.Z,{size:24,sx:j.arrowIcon,style:{color:i}})]})},S=n(29455),Z=n(71604),R=n(41664),w=n.n(R),E={container:{marginTop:e=>e.spacing(3),minHeight:"400px"},selectContainer:{borderRight:{sm:"none",md:"1px solid gray"}},recsContainer:{marginTop:"-24px",paddingLeft:{sm:"none",md:"54px !important"},"& .toggleButton":{float:"right",width:"80px"}},autocomplete:{maxWidth:{xs:"100%",md:"300px"},paddingTop:e=>e.spacing(2)},conditionLegend:{maxWidth:{sm:"100%"},margin:{md:"24px"},marginBottom:"32px",padding:e=>e.spacing(1),borderRadius:"4px",border:"1px solid grey",textAlign:"center"},welcome:{display:"grid",placeContent:"center",marginTop:e=>e.spacing(10),textAlign:"center","& h5":{marginTop:e=>e.spacing(2)}}},O=n(13311);let P=["sel_province","sel_crop","sel_stage","sel_activity"];function T(e){var t,n,a,s;let[o,r]=(0,i.useState)(!1),{sel_options:d}=e,{climateRisk:u,seasonalMonths:b,optsprovinces:j,optscrops:R,optsmonths:T,optscropstages:L,optsactivities:I}=e,{onSelectItemChange:k,onResetClick:D}=e,{croppingCalendar:A,recommendations:M,loading:q}=e;(0,i.useEffect)(()=>{null===d.sel_activity&&!0===o&&0!==A.length&&r(!1)},[d.sel_activity,o,A]);let F=()=>{let e="Loading...";return j.length>0&&(e=null===d.sel_province?"Select a province":"Province"),e};return(0,l.jsxs)(m.Z,{sx:{minHeight:"75vh"},id:"contents-seasonal-recommendations",children:[(0,l.jsx)(v.Z,{variant:"h4",children:"Seasonal Recommendations"}),(0,l.jsx)(v.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,l.jsxs)(f.ZP,{container:!0,spacing:2,sx:E.container,children:[(0,l.jsxs)(f.ZP,{item:!0,xs:12,md:4,sx:E.selectContainer,children:[(0,l.jsxs)(m.Z,{sx:{paddingRight:e=>e.spacing(2),wdith:"100%"},children:[(0,l.jsx)(h.Z,{disablePortal:!0,id:"province",value:d.sel_province?{...d.sel_province,label:(0,O.c)(d.sel_province.label)}:null,disabled:0===j.length||q,options:j.map(e=>({...e,label:(0,O.c)(e.label)})),sx:E.autocomplete,PaperComponent:y.Z,renderInput:e=>(0,l.jsx)(p.Z,{...e,label:F()}),isOptionEqualToValue:(e,t)=>e.label===t,onChange:(e,t)=>k(e,{...t,from:"province"})}),d.sel_province&&(0,l.jsxs)(m.Z,{sx:{mt:2},children:[(0,l.jsx)(v.Z,{align:"center",variant:"body1",children:(0,l.jsx)("strong",{children:"Seasonal Forecast Duration:"})}),(0,l.jsxs)(v.Z,{align:"center",variant:"body1",children:[null===(t=b[0])||void 0===t?void 0:t.label," to ",null===(n=b[5])||void 0===n?void 0:n.label]})]}),(0,l.jsx)(h.Z,{disablePortal:!0,id:"crop",value:d.sel_crop,disabled:0===R.length||q||null===d.sel_province,options:R,sx:E.autocomplete,PaperComponent:y.Z,renderInput:e=>(0,l.jsx)(p.Z,{...e,label:null===d.sel_crop?"Select a crop type":"Crop"}),isOptionEqualToValue:(e,t)=>e.label===t,getOptionDisabled:e=>e.disabled,onChange:(e,t)=>k(e,{...t,from:"crop"})}),0===L.length&&null!==d.sel_crop&&!q&&(0,l.jsxs)("div",{children:[(0,l.jsx)(v.Z,{variant:"caption",color:"orange",children:(0,l.jsxs)("strong",{children:["No crop stages for this seasonal range for"," ",d.sel_crop,"."]})}),(0,l.jsx)("br",{}),(0,l.jsxs)(v.Z,{variant:"caption",children:["See\xa0",(0,l.jsx)(w(),{href:"/cropping-calendar-v2",passHref:!0,legacyBehavior:!0,children:(0,l.jsx)("a",{style:{color:"orange",fontWeight:600},target:"_blank",children:"Cropping Calendar"})}),"\xa0for reference."]})]}),(0,l.jsx)(h.Z,{disablePortal:!0,id:"cropstage",value:d.sel_stage,disabled:0===L.length||q,options:L,sx:E.autocomplete,PaperComponent:y.Z,renderInput:e=>(0,l.jsx)(p.Z,{...e,label:null===d.sel_stage?"Select a crop stage":"Crop Stage"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,onChange:(e,t)=>k(e,{...t,from:"cropstage"})}),(0,l.jsx)(h.Z,{disablePortal:!0,id:"activity",value:d.sel_activity,disabled:0===I.length||q,options:I,sx:E.autocomplete,PaperComponent:y.Z,renderInput:e=>(0,l.jsx)(p.Z,{...e,label:null===d.sel_activity?"Select an activity":"Activity"}),isOptionEqualToValue:(e,t)=>e.label===t,onChange:(e,t)=>{k(e,{...t,from:"activity"}),r(!1)}}),(0,l.jsx)("div",{children:""!==d.error?(0,l.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:d.error}):(0,l.jsx)("div",{children:"\xa0"})}),(0,l.jsxs)(x.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,l.jsx)(g.Z,{size:"medium",disabled:q,onClick:D,children:"Clear"}),(0,l.jsx)(g.Z,{size:"medium",variant:"contained",onClick:()=>r(e=>!e),disabled:null===d.sel_activity&&!M.length||o,children:"Finish"})]})]}),(0,l.jsx)("br",{}),(0,l.jsx)(_.Z,{}),(0,l.jsx)("br",{}),""!==u&&T.length>0&&(0,l.jsxs)(m.Z,{sx:E.conditionLegend,children:[(0,l.jsxs)(v.Z,{variant:"body2",children:["Climate Risk for the season"," ",(0,l.jsx)("strong",{children:null===(a=T[0])||void 0===a?void 0:a.label})," to"," ",(0,l.jsx)("strong",{children:null===(s=T[5])||void 0===s?void 0:s.label}),":"]}),(0,l.jsx)("div",{children:u})]})]}),(0,l.jsx)(f.ZP,{item:!0,xs:12,md:8,sx:E.recsContainer,children:null!==d.sel_crop&&(null!==d.sel_activity||M.length)&&o?(0,l.jsx)(S.Z,{impactOutlookOnly:!0,title:d.sel_crop,recommendations:M}):Object.values(d).filter(e=>e).length>1?(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:P.map((e,t)=>{var n,i;let a={from:e.slice(e.indexOf("_")+1),label:["sel_stage"].includes(e)?null!==(i=null===(n=d[e])||void 0===n?void 0:n.label)&&void 0!==i?i:"":d[e]};return null!==d[e]&&void 0!==d[e]?(0,l.jsx)(C,{info:a,show:t<P.length-1},"card-opt-".concat(t)):(0,l.jsx)("div",{},"card-opt-".concat(t))})}):(0,l.jsxs)(m.Z,{sx:E.welcome,children:[(0,l.jsx)(c(),{unoptimized:!0,src:(0,Z.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:Z.imageLoader,alt:"Empty data"}),(0,l.jsx)(v.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,l.jsx)(v.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}T.propTypes={sel_options:u().object,optsprovinces:u().array,optscrops:u().array,optsmonths:u().array,optscropstages:u().array,optsactivities:u().array,seasonalMonths:u().array,recommendations:u().array,loading:u().bool,onSelectItemChange:u().func,onResetClick:u().func};var L=n(26525),I=n(18752),k=n(9704),D=n(44858),A=n(18938),M=n(63431);let q={sel_province:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_condition:{id:0,from:"weather_condition",label:o.MW.WAY_BELOW_NORMAL.label},loading:!1,error:""};var F=function(e){var t,n;let{provinces:a=[]}=e,[s,r]=(0,i.useState)(q),[c,d]=(0,i.useState)([]),[u,p]=(0,i.useState)({}),[h,m]=(0,i.useState)([]),[g,x]=(0,i.useState)([]),[_,v]=(0,i.useState)([]),[f,y]=(0,i.useState)(!0),b=(0,i.useRef)(!1),{cropList:j}=(0,k.Z)(),C=j.map((e,t)=>({disabled:!1,label:e,id:t})),{documents:S,loading:Z}=(0,A.m$)(L.M.WEATHER_FORECASTS,"mimaropa",L.M.SUB_SEASONAL,"name"),{cropcalendar:R,cropStages:w,loading:E}=(0,I.Z)("seasonal",s.sel_province,s.sel_crop),{recommendations:O,farmoperations:P,loading:F}=(0,D.Z)(u.code,null!==(n=null===(t=s.sel_stage)||void 0===t?void 0:t.code)&&void 0!==n?n:null,s.sel_crop,"seasonal");return(0,i.useEffect)(()=>{if(0!==R.length&&!f&&0!==c.length){let e=[];c.forEach(t=>{if(0===R.length)return;let n=R.data1[0][t.id].split(",");"none"===n[0]||e.includes(n[0])||e.push(n[0]),"none"===n[1]||e.includes(n[1])||e.push(n[1]);let l=R.data2[0][t.id].split(",");"none"===l[0]||e.includes(l[0])||e.push(l[0]),"none"===l[1]||e.includes(l[1])||e.push(l[1])}),v(e.map((e,t)=>({id:t,label:w[e].label,code:e})))}},[R,f,s.sel_crop,c,w]),(0,i.useEffect)(()=>{0===R.length&&O.length&&m(O)},[R,O]),(0,i.useEffect)(()=>(b.current=!0,()=>{b.current=!1}),[]),(0,i.useEffect)(()=>{a.length>0&&S.length>0&&!Z&&(x(a),d(S[0].mos.reduce((e,t)=>(e.push({id:o.re[t.toUpperCase()].code,label:o.re[t.toUpperCase()].format,disabled:!1}),e),[])))},[a,S,Z]),(0,i.useEffect)(()=>{y(Z||F||E)},[Z,F,E]),(0,l.jsx)(T,{croppingCalendar:R,climateRisk:u.label,optsprovinces:g,optscrops:C,optsmonths:c,optscropstages:_,optsactivities:P,sel_options:s,recommendations:h,loading:f,seasonalMonths:c,onSelectItemChange:(e,t)=>{let{from:n,label:l}=t;if(h.length>0&&m([]),Object.keys(t).includes("id"))switch(n){case"province":v([]);let i=S.find(e=>e.name===l);p((0,M.Z)(i.months,"seasonal")),r({...q,sel_province:l});break;case"crop":r({...s,sel_crop:l,sel_stage:null,sel_activity:null});break;case"cropstage":r({...s,sel_stage:t,sel_activity:null});break;case"activity":m(O.filter(e=>e.crop_stage===s.sel_stage.code&&e.farming_activity===l)),r({...s,sel_activity:l})}else"province"===n?(r(q),v([])):"crop"===n?(r({...s,sel_crop:null,sel_stage:null,sel_activity:null}),v([])):"cropstage"===n?r({...s,sel_stage:null,sel_activity:null}):"activity"===n&&r({...s,sel_activity:null})},onResetClick:()=>{r(q),v([]),m([])}})};let W=["sel_province","sel_municipality","sel_day","sel_crop","sel_month","sel_stage","sel_activity"];function N(e){var t,n;let[a,s]=(0,i.useState)(!1),{sel_options:r,loading:d,recommendations:u,weathertoday:b,warning:j}=e,{climateRisk:R,optsprovinces:P,optsmunicipalities:T,optsdays:L,optscrops:I,optscropstages:k,optsactivities:D}=e,{onSelectItemChange:A,onResetClick:M}=e;(0,i.useEffect)(()=>{null===r.sel_activity&&!0===a&&s(!1)},[r.sel_activity,a]);let q=()=>{let e="Loading...";return P.length>0&&(e=null===r.sel_province?"Select a province":"Province"),e};return(0,l.jsxs)(m.Z,{sx:{minHeight:"75vh"},id:"contents-tenday-recommendations",children:[(0,l.jsx)(v.Z,{variant:"h4",children:"10-Day Farm Weather Outlook and Advisory Recommendations"}),(0,l.jsx)(v.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,l.jsxs)(f.ZP,{container:!0,spacing:2,sx:E.container,children:[(0,l.jsxs)(f.ZP,{item:!0,xs:12,md:4,sx:E.selectContainer,children:[(0,l.jsxs)(m.Z,{sx:{minWidth:"100%",paddingRight:e=>e.spacing(2)},children:[(0,l.jsx)(h.Z,{disablePortal:!0,id:"province",value:r.sel_province?{...r.sel_province,label:(0,O.c)(r.sel_province.label)}:null,disabled:0===P.length||d,options:P.map(e=>({...e,label:(0,O.c)(e.label)})),sx:E.autocomplete,PaperComponent:y.Z,renderInput:e=>(0,l.jsx)(p.Z,{...e,label:q()}),isOptionEqualToValue:(e,t)=>e.id===(null==t?void 0:t.id)&&e.label===(null==t?void 0:t.label),onChange:(e,t)=>A(e,{...t,from:"province"})}),(0,l.jsx)(h.Z,{disablePortal:!0,id:"municipality",value:r.sel_municipality?{...r.sel_municipality,label:(0,O.c)(r.sel_municipality.label)}:null,disabled:0===T.length||d,options:T.map(e=>({...e,label:(0,O.c)(e.label)})),sx:E.autocomplete,PaperComponent:y.Z,renderInput:e=>(0,l.jsx)(p.Z,{...e,label:null===r.sel_municipality?"Select a municipality":"Municipality"}),isOptionEqualToValue:(e,t)=>e.id===(null==t?void 0:t.id)&&e.label===(null==t?void 0:t.label),getOptionDisabled:e=>e.disabled||void 0!==e.iscalendar,onChange:(e,t)=>A(e,{...t,from:"municipality"})}),r.sel_municipality&&(0,l.jsxs)(m.Z,{sx:{mt:2},children:[(0,l.jsx)(v.Z,{align:"center",variant:"body1",children:(0,l.jsx)("strong",{children:"Forecast Duration:"})}),(0,l.jsxs)(v.Z,{align:"center",variant:"body1",children:[null===(t=L[0])||void 0===t?void 0:t.label," to ",null===(n=L[9])||void 0===n?void 0:n.label]})]}),(0,l.jsx)(h.Z,{disablePortal:!0,id:"crop",value:r.sel_crop,disabled:0===I.length||null===r.sel_municipality||d,options:I,sx:E.autocomplete,PaperComponent:y.Z,renderInput:e=>(0,l.jsx)(p.Z,{...e,label:null===r.sel_crop?"Select a crop type":"Crop"}),isOptionEqualToValue:(e,t)=>e.label===t,getOptionDisabled:e=>e.disabled,onChange:(e,t)=>A(e,{...t,from:"crop"})}),(0,l.jsx)(h.Z,{disablePortal:!0,id:"cropstage",value:r.sel_stage,disabled:0===k.length||d,options:k,sx:E.autocomplete,PaperComponent:y.Z,renderInput:e=>(0,l.jsx)(p.Z,{...e,label:null===r.sel_stage?"Select a crop stage":"Crop Stage"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,onChange:(e,t)=>A(e,{...t,from:"cropstage"})}),0===k.length&&null!==r.sel_crop&&(0,l.jsxs)("div",{children:[(0,l.jsx)(v.Z,{variant:"caption",color:"orange",children:(0,l.jsxs)("strong",{children:["No crop stages for this ten day range for ",r.sel_crop,"."]})}),(0,l.jsx)("br",{}),(0,l.jsxs)(v.Z,{variant:"caption",children:["See\xa0",(0,l.jsx)(w(),{href:"/cropping-calendar-v2",passHref:!0,legacyBehavior:!0,children:(0,l.jsx)("a",{style:{color:"orange",fontWeight:600},target:"_blank",children:"Cropping Calendar"})}),"\xa0for reference."]})]}),(0,l.jsx)(h.Z,{disablePortal:!0,id:"activity",value:r.sel_activity,disabled:0===D.length||d,options:D,sx:E.autocomplete,PaperComponent:y.Z,renderInput:e=>(0,l.jsx)(p.Z,{...e,label:null===r.sel_activity?"Select an activity":"Activity"}),isOptionEqualToValue:(e,t)=>e.label===t,onChange:(e,t)=>{A(e,{...t,from:"activity"}),s(!1)}}),(0,l.jsx)("div",{children:""!==r.error||""!==j?(0,l.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:r.error||j}):(0,l.jsx)("div",{children:"\xa0"})}),(0,l.jsxs)(x.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,l.jsx)(g.Z,{size:"medium",onClick:M,children:"Clear"}),(0,l.jsx)(g.Z,{size:"medium",variant:"contained",onClick:()=>s(e=>!e),disabled:null===r.sel_activity||a,children:"Finish"})]})]}),(0,l.jsx)("br",{}),(0,l.jsx)(_.Z,{}),(0,l.jsx)("br",{}),null!==b&&(0,l.jsxs)(m.Z,{sx:E.conditionLegend,style:{backgroundColor:o.tN[b.code],color:[o.MW.ABOVE_NORMAL.label,o.MW.WAY_BELOW_NORMAL.label].includes(b.code)?"#fff":"#000"},children:[(0,l.jsx)(v.Z,{variant:"subtitle2",children:"Rainfall Intensity for the Day"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:b.label_full}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{children:b.rainfall})]})]}),""!==R&&(0,l.jsxs)(m.Z,{sx:E.conditionLegend,children:[(0,l.jsx)(v.Z,{variant:"subtitle2",children:"Climate Risk:"}),(0,l.jsx)("div",{children:R})]})]}),(0,l.jsx)(f.ZP,{item:!0,xs:12,md:8,sx:E.recsContainer,children:null!==r.sel_crop&&null!==r.sel_activity&&a?(0,l.jsx)(S.Z,{impactOutlookOnly:!0,title:r.sel_crop,recommendations:u}):Object.values(r).filter(e=>e).length>1?(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:W.map((e,t)=>{var n,i;let a={from:e.slice(e.indexOf("_")+1),label:["sel_day","sel_stage"].includes(e)?null!==(i=null===(n=r[e])||void 0===n?void 0:n.label)&&void 0!==i?i:"":r[e]};return null!==r[e]&&void 0!==r[e]?(0,l.jsx)(C,{info:a,show:t<W.length-1,borderColor:"blue"},"card-opt-".concat(t)):(0,l.jsx)("div",{},"card-opt-".concat(t))})}):(0,l.jsxs)(m.Z,{sx:E.welcome,children:[(0,l.jsx)(c(),{unoptimized:!0,src:(0,Z.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:Z.imageLoader,alt:"Empty data"}),(0,l.jsx)(v.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,l.jsx)(v.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}N.propTypes={sel_options:u().object,optsprovinces:u().array,optsmunicipalities:u().array,optscrops:u().array,optsdays:u().array,optscropstages:u().array,optsactivities:u().array,recommendations:u().array,weathertoday:u().object,onSelectItemChange:u().func,onClickDateSelector:u().func,onResetClick:u().func};var U=n(63867),z=n(83074),H=n(92246);let V={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_day:null,sel_condition:{id:0,from:"weather_condition",label:null,date:new Date().toDateString()},loading:!1,error:"",warning:""};var B=function(e){var t,n,a;let{provinces:s=[]}=e,[o,r]=(0,i.useState)(V),[c,d]=(0,i.useState)({}),[u,p]=(0,i.useState)([]),[h,m]=(0,i.useState)(null),[g,x]=(0,i.useState)([]),[_,v]=(0,i.useState)([]),[f,y]=(0,i.useState)(!0),b=(0,i.useRef)(!1),{cropList:j}=(0,k.Z)(),C=j.map((e,t)=>({disabled:!1,label:e,id:t})),S=(0,U.Z)(null===(t=o.sel_province)||void 0===t?void 0:t.label,s),{recommendations:Z,farmoperations:R,loading:w}=(0,D.Z)(c.code,null!==(a=null===(n=o.sel_stage)||void 0===n?void 0:n.code)&&void 0!==a?a:null,o.sel_crop,"tenday"),{cropcalendar:E,cropStages:P,loading:T}=(0,I.Z)("10-day",o.sel_province,o.sel_crop),{days:L,loading:A,warning:q}=(0,z.Z)(o.sel_province,o.sel_municipality);(0,i.useEffect)(()=>{L.length>0&&d((0,M.Z)(L,"tenday"))},[L]),(0,i.useEffect)(()=>{if(L.length>0&&!T&&!w){let t=new Date(L[0].label_full),n=(0,H.Mn)(t);if(0!==E.length){var e;let t=null===(e=o.sel_municipality)||void 0===e?void 0:e.label,l=o.sel_crop,i=E.data1.find(e=>(0,O.c)(e.municipality)===(0,O.c)(t)&&e.crop===l),a=E.data2.find(e=>(0,O.c)(e.municipality)===(0,O.c)(t)&&e.crop===l),s=[];i&&a&&Object.keys(P).length>0&&(Object.keys(n).forEach(e=>{let t=i[e].split(",");n[e].forEach(e=>{"1st_half"===e&&"none"!==t[0]?s.includes(t[0])||s.push(t[0]):"2nd_half"!==e||"none"===t[1]||s.includes(t[1])||s.push(t[1])});let l=a[e].split(",");n[e].forEach(e=>{"1st_half"===e&&"none"!==l[0]?s.includes(l[0])||s.push(l[0]):"2nd_half"!==e||"none"===l[1]||s.includes(l[1])||s.push(l[1])})}),v(s.map((e,t)=>({id:t,label:P[e].label,code:e}))))}}},[P,E.length,E.data1,E.data2,L,o.sel_municipality,o.sel_crop,T,w]),(0,i.useEffect)(()=>(b.current=!0,()=>{b.current=!1}),[]),(0,i.useEffect)(()=>{s.length>0&&x(s)},[s]),(0,i.useEffect)(()=>{y(A||w||T)},[A,w,T]);let F=(e,t)=>{let{from:n}=t;if(u.length>0&&p([]),Object.keys(t).includes("id"))switch(n){case"province":v([]),m(null),r({...V,sel_province:t});break;case"municipality":v([]),r({...o,sel_municipality:t,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null});break;case"day":v([]),m(L.find(e=>e.label===t.label)),r({...o,sel_day:t,sel_month:null,sel_crop:null,sel_stage:null,sel_activity:null});break;case"crop":v([]),r({...o,sel_crop:t.label,sel_month:null,sel_stage:null,sel_activity:null});break;case"cropstage":r({...o,sel_stage:t,sel_activity:null});break;case"activity":p(Z.filter(e=>e.crop_stage===o.sel_stage.code&&e.farming_activity===t.label)),r({...o,sel_activity:t.label})}else"province"===n?(r(V),v([])):"municipality"===n?(r({...o,sel_municipality:null,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null}),v([])):"day"===n?(r({...o,sel_day:null,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null}),v([])):"crop"===n?(r({...o,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null}),v([])):"cropstage"===n?r({...o,sel_stage:null,sel_activity:null}):"activity"===n&&r({...o,sel_activity:null})};return(0,l.jsx)(N,{climateRisk:c.label,optsprovinces:g,optsmunicipalities:S,optscrops:C,optsdays:L,optscropstages:_,optsactivities:R,sel_options:o,recommendations:u,weathertoday:h,loading:f,warning:q,onSelectItemChange:F,onClickDateSelector:e=>{let t=new Date(e).toDateString();F(null,{id:t=t.substring(0,t.length-5),label:t,full:new Date(e),from:"day"})},onResetClick:()=>{r(V),v([]),p([])}})},G=function(e){let{provinces:t=[]}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)(s.Z,{sx:{boxShadow:"none"}}),(0,l.jsx)("div",{id:"seasonal-recommendations"}),(0,l.jsx)(s.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,l.jsx)(F,{provinces:t})}),(0,l.jsx)("div",{id:"resilient-practices"}),(0,l.jsx)(s.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,l.jsx)(B,{provinces:t})})]})},Y=n(48414),J=!0,X=function(e){let{media:t}=e,[n,s]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{try{let e=await (0,a.$m)();s(e.data)}catch(e){}})()},[]),(0,l.jsxs)("div",{children:[(0,l.jsx)(Y.Z,{title:"Agro-Climatic Advisory Portal - ".concat(o.Gt," (ACAP-").concat(o.Gt.toUpperCase(),") Crop Recommendations"),ogDescription:t.description,ogImageURL:t.url,ogURL:t.path,canonicalURL:t.path}),(0,l.jsx)(G,{provinces:n})]})}},9704:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var l=n(67294),i=n(61061);function a(){let[e,t]=(0,l.useState)([]),[n,a]=(0,l.useState)(!1),[s,o]=(0,l.useState)("");return(0,l.useEffect)(()=>{(async()=>{var e,n,l;try{a(!0);let n=await (0,i.TQ)();t(null!==(e=null==n?void 0:n.list)&&void 0!==e?e:[]),a(!1),o("")}catch(e){o(null!==(l=null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)&&void 0!==l?l:e.message),a(!1),t([])}})()},[]),{cropList:e,loading:n,error:s}}},63867:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var l=n(67294);function i(e,t){let[n,i]=(0,l.useState)([]);return(0,l.useEffect)(()=>{var n,l;i(e&&t&&null!==(l=null===(n=t.find(t=>t.label===e))||void 0===n?void 0:n.municipalities)&&void 0!==l?l:[])},[e,t]),n}},18938:function(e,t,n){"use strict";n.d(t,{Kx:function(){return o},ky:function(){return s},m$:function(){return r},tl:function(){return c}});var l=n(67294),i=n(36100),a=n(56871);function s(e,t){let[n,s]=(0,l.useState)(null),[o,r]=(0,l.useState)(!0),[c,d]=(0,l.useState)(""),u=(0,l.useRef)(!0);return(0,l.useEffect)(()=>((async()=>{try{let n=(0,i.JU)(a.db,e,t),l=await (0,i.QT)(n);u.current&&(l.exists()&&s(l.data()),r(!1))}catch(e){d(e.message),r(!1)}})(),()=>u.current=!1),[e,t]),[n,o,c]}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,[o,r]=(0,l.useState)([]),[c,d]=(0,l.useState)(!0),[u,p]=(0,l.useState)(""),h=(0,l.useRef)(!0);return(0,l.useEffect)(()=>((async()=>{try{let l=[(0,i.Xo)(t,"asc")];s>0&&l.push((0,i.b9)(s));let o=(0,i.hJ)(a.db,e),c=n||(0,i.IO)(o,...l),u=await (0,i.PL)(c);h.current&&(r(u.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,n,s]),{documents:o,loading:c,error:u}}function r(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",[o,r]=(0,l.useState)([]),[c,d]=(0,l.useState)(!0),[u,p]=(0,l.useState)(""),h=(0,l.useRef)(!0);return(0,l.useEffect)(()=>((async()=>{try{let l=(0,i.IO)((0,i.hJ)(a.db,e,t,n),(0,i.Xo)(s)),o=await (0,i.PL)(l);h.current&&(r(o.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,n,s]),{documents:o,loading:c,error:u}}function c(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4?arguments[4]:void 0,[r,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(!0),[p,h]=(0,l.useState)(""),m=(0,l.useRef)(!0);return(0,l.useEffect)(()=>((async()=>{try{let l=(0,i.hJ)(a.db,e,t,n);""!==s&&(l=(0,i.IO)(l,(0,i.Xo)(s))),o&&(l=(0,i.IO)(l,(0,i.b9)(o)));let r=await (0,i.PL)(l);m.current&&(c(r.docs.map(e=>({...e.data()}))),u(!1))}catch(e){h(e.message),u(!1)}})(),()=>m.current=!1),[e,t,n,s,o]),{documents:r,loading:d,error:p}}},83074:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var l=n(67294),i=n(9473),a=n(98813),s=n(61984),o=n(92246),r=n(25517);function c(e,t){let[n,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(null),[p,h]=(0,l.useState)(""),[m,g]=(0,l.useState)(""),[x,_]=(0,l.useState)(!1),v=(0,i.I0)(),{ids:f,status:y,entities:b,error:j}=(0,i.v9)(e=>e.tendayweather);return(0,l.useEffect)(()=>{null!==e&&(h(""),g(""),v((0,s.R)(e)))},[e,v]),(0,l.useEffect)(()=>{h(j)},[j]),(0,l.useEffect)(()=>{_(y===r.G.PENDING)},[y]),(0,l.useEffect)(()=>{if(h(""),g(""),y===r.G.FULLFILLED&&f.length>0&&""===j&&null!==t){let e=Object.values(b).find(e=>e.municipality===t);if(void 0!==e){let t=JSON.parse(e.data),n=Object.values(a.MW);c(t.reduce((e,l,i)=>{var a,s,r,c,d;return[...e,{id:i,label:l.day_format,label_full:null===(a=(0,o.Ay)(l.day_format,t[9].day_format))||void 0===a?void 0:a.toDateString(),rainfall:l.rainfall,forecast:null!==(c=null===(s=n.find(e=>e.tenday===l.rainfall))||void 0===s?void 0:s.sync)&&void 0!==c?c:"-",code:null!==(d=null===(r=n.find(e=>e.tenday===l.rainfall))||void 0===r?void 0:r.label)&&void 0!==d?d:"-"}]},[]));let l=new Date(1e3*t[0].date_start.seconds),i=(0,o.Mn)(l);l.getFullYear()!==new Date().getFullYear()&&h("Invalid year detected in the 10-day validity date range: ".concat(t[0].date_range)),u({months:i,date_start:l,date_range:t[0].date_range})}else{let e=j||"Weather data for the municipality is not available at the moment, however, you can continue viewing recommendations. Please verify that the municipality name is present in the 10-Day weather forecast.";j?(c([]),u(null),h(e)):g(e)}}},[t,b,f,y,j]),{days:n,summary:d,loading:x,error:p,warning:m}}},22088:function(e,t,n){"use strict";n.d(t,{fI:function(){return h},sT:function(){return p},$K:function(){return r},YH:function(){return d},O_:function(){return g},iR:function(){return u},Ee:function(){return c},vU:function(){return m}});var l=n(96171),i=n(78986);let a={CROP_REC_LIST_RECS_LITE:"n_list_crop_recommendations",CROP_REC_LIST_RECS_FORMATTED:"n_list_crop_recommendations_",CROP_REC_LIST:"n_crop_recommendations_",CROP_REC_SMS_LIST:"n_crop_recommendations_"};class s extends l.Z{constructor(...e){super(...e),this.getFormattedRecommendationsFromStages=async e=>{let t,{cropstages:n,forecast:l,type:s}=e;if(void 0===n||void 0===l)return;let o="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(s),r=this.collection(this.db,o);return t=s===i.q.SEASONAL?this.query(r,this.where("crop_stage","in",n),this.where("forecast","==",l)):this.query(r,this.where("crop_stage","in",n)),await this.getCollectionData(o,"",t)},this.getFormattedRecommendations=async e=>{let t,{cropstage:n,forecast:l,type:s}=e;if(void 0===n||void 0===l)return;let o="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(s),r=this.collection(this.db,o);return t=s===i.q.SEASONAL?this.query(r,this.where("crop_stage","==",n),this.where("forecast","==",l)):this.query(r,this.where("crop_stage","==",n)),await this.getCollectionData(o,"",t)},this.getCropRecommendationsLite=async e=>{let{type:t}=e;return await this.getDocumentData(a.CROP_REC_LIST_RECS_LITE,t)},this.getCropRecommendations=async e=>{let{crop:t,type:n}=e;if(!t||!n)return;let l="".concat(a.CROP_REC_LIST).concat(n),i=this.collection(this.db,l),s=this.query(i,this.where("crop","==",t));return await this.getCollectionDataWithID(l,"",s)},this.getRecommendations=async e=>{let t,{climateRisk:n,_cropStage:l,crop:i,type:s,multipleStages:o}=e;if(!n||!i)return;if(o){if(0===l.length)return}else if(!l)return;let r="".concat(a.CROP_REC_LIST).concat(s),c=this.collection(this.db,r);return t=o?this.query(c,this.where("climate_risk","==",n),this.where("crop_stage","in",l),this.where("crop","==",i)):this.query(c,this.where("climate_risk","==",n),this.where("crop_stage","==",l),this.where("crop","==",i)),await this.getCollectionData(r,"",t)},this.getSeasonalGeneralRecommendations=async e=>{let{climateRisk:t,crop:n}=e;if(!t||!n)return;let l="n_crop_recommendations_seasonal_general",i=this.collection(this.db,l),a=this.query(i,this.where("climate_risk","==",t),this.where("crop","==",n));return await this.getCollectionData(l,"",a)},this.getRecommendationsFlexible=async e=>{let{climateRisk:t,_cropStage:n,crop:l,type:i,multipleStages:s=!1}=e,o="".concat(a.CROP_REC_LIST).concat(i),r=this.collection(this.db,o);if(!l)return;let c=[this.where("crop","==",l)];t&&c.push(this.where("climate_risk","==",t)),n&&(s?c.push(this.where("crop_stage","in",n)):c.push(this.where("crop_stage","==",n)));let d=this.query(r,...c);return await this.getCollectionData(o,"",d)},this.getRecommendationsQuery=async e=>{let{type:t,queryFields:n=[]}=e;if(!t)throw Error("Missing parameter/s");let l="".concat(a.CROP_REC_LIST).concat(t),i=this.collection(this.db,l),s=n.map(e=>this.where(e.field,e.op,e.value)),o=this.query(i,...s);return await this.getCollectionData(l,"",o)},this.getRecommendationsSMS=async e=>{let{crop:t,climateRisk:n,type:l}=e;if(!t||!n||!l)return;let i="".concat(a.CROP_REC_SMS_LIST).concat(l),s=this.collection(this.db,i),o=this.query(s,this.where("crop","==",t),this.where("climate_risk","==",n));return await this.getCollectionData(i,"",o)},this.updateRecommendation=async e=>{let{type:t,newRecommendation:n}=e,l="".concat(a.CROP_REC_SMS_LIST).concat(t),i=this.collection(this.db,l),s=this.doc(i,n.docid);delete n.docid,await this.updateDoc(s,n)},this.createRecommendation=async e=>{let{type:t,recommendation:n}=e,l="".concat(a.CROP_REC_SMS_LIST).concat(t),i=this.collection(this.db,l);return await this.addDoc(i,n)}}}let o=new s;o.getFormattedRecommendations.bind(o),o.getFormattedRecommendationsFromStages.bind(o),o.getCropRecommendationsLite.bind(o);let r=o.getRecommendations.bind(o),c=o.getSeasonalGeneralRecommendations.bind(o),d=o.getRecommendationsFlexible.bind(o),u=o.getRecommendationsSMS.bind(o),p=o.getCropRecommendations.bind(o),h=o.createRecommendation.bind(o),m=o.updateRecommendation.bind(o),g=o.getRecommendationsQuery.bind(o)},13311:function(e,t,n){"use strict";function l(e){if(!e)return"";try{return decodeURIComponent(escape(e))}catch(t){return e.replace(/Ã±/g,"\xf1").replace(/Ã‘/g,"\xd1").replace(/Ã¡/g,"\xe1").replace(/Ã©/g,"\xe9").replace(/Ã³/g,"\xf3").replace(/Ã­/g,"\xed").replace(/Ã¼/g,"\xfc").replace(/Ã/g,"\xed")}}n.d(t,{c:function(){return l}})}},function(e){e.O(0,[3153,7023,3745,1664,6541,5837,5117,6902,2888,9774,179],function(){return e(e.s=49361)}),_N_E=e.O()}]);