"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4381],{2052:function(e,t,n){var i=n(85893),o=n(93454);t.Z=function(e){return(0,i.jsx)(o.Z,{...e,elevation:15})}},42823:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(85893),o=n(25675),a=n.n(o),r=n(60990),l=n(96788),s=n(71604),c={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},d=function(e){let{message:t="Failed to load data",style:n={}}=e;return(0,i.jsxs)(r.Z,{sx:c,style:n,children:[(0,i.jsx)(a(),{unoptimized:!0,src:(0,s.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:s.imageLoader,alt:"Empty data"}),(0,i.jsx)(l.Z,{variant:"subtitle1",children:t})]})}},11859:function(e,t,n){var i=n(85893),o=n(60990),a=n(97182);t.Z=function(e){let{text:t="",size:n=24,children:r}=e;return(0,i.jsxs)(o.Z,{sx:{width:"100%",textAlign:"center",height:"20vh"},children:[(0,i.jsxs)(o.Z,{sx:{width:"100%",textAlign:"center",marginTop:e=>e.spacing(12),marginBottom:"32px",display:"flex",justifyContent:"center"},children:[(0,i.jsx)("span",{children:""!==t?t:"Loading..."})," \xa0",(0,i.jsx)(a.Z,{size:n})]}),r]})}},16729:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(85893),o=n(67294),a=n(45697),r=n.n(a),l=n(51015),s=n(2782),c=n(97182),d=n(33453),u=n(96727),p=n(92365),h=n(40110),g=n(52857),m={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"48px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:e=>e.palette.grey[500]}};function x(e){let[t,n]=o.useState({open:null}),{loading:a=!1,isOpen:r=!1,showButtons:x=!0,maxWidth:b="sm",IconSVG:v=null,modalButtonStyles:f={},modalExtraHandlerCB:y=null,modalCancelHandlerCB:C=null,modalConfirmHandlerCB:_=null,modalOpenHandlerCB:R=null,isDisabled:w=!1}=e,{openButtonText:Z="Click",title:S="Window Title",extraBtnText:j="",cancelBtnText:T="Cancel",confirmBtnText:B="Ok",contentText:k="",error:E="",colorTheme:F="primary"}=e;(0,o.useEffect)(()=>{n(e=>({...e,open:r}))},[r]);let L=()=>{n({...t,open:!1}),C&&C()};return(0,i.jsxs)("div",{children:[Z&&(0,i.jsxs)(l.Z,{disabled:w,disableElevation:!0,variant:"contained",color:F,onClick:()=>{n({...t,open:!0}),R&&R()},sx:{...m.button,...f},children:[v&&(0,i.jsx)(v,{sx:m.icon}),Z]}),(0,i.jsxs)(d.Z,{maxWidth:b,fullWidth:!0,open:t.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,i.jsxs)(p.Z,{children:[(0,i.jsx)("span",{children:S}),(0,i.jsx)(g.Z,{"aria-label":"close",sx:m.closeButton,onClick:L,disabled:a,children:(0,i.jsx)(s.Z,{})})]}),(0,i.jsxs)(h.Z,{sx:m.dialogContent,children:[""!==k&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:k}),(0,i.jsx)("div",{className:"error",children:E})]}),e.children]}),x&&(0,i.jsxs)(u.Z,{sx:m.dialogActions,children:[""!==j&&(0,i.jsx)(l.Z,{onClick:y||L,disabled:a,children:j}),(0,i.jsx)(l.Z,{onClick:C||L,disabled:a,children:T}),(0,i.jsxs)(l.Z,{variant:"contained",disabled:a,onClick:_||L,children:[(0,i.jsx)("span",{style:{display:a?"none":"block"},children:B}),(0,i.jsx)(c.Z,{size:24,color:"secondary",sx:{display:a?"block":"none"}})]})]})]})]})}x.propTypes={loading:r().bool,isOpen:r().bool,showButtons:r().bool,maxWidth:r().string,IconSVG:r().elementType,modalButtonStyles:r().object,modalCancelHandlerCB:r().func,modalConfirmHandlerCB:r().func,modalOpenHandlerCB:r().func,modalExtraHandlerCB:r().func,openButtonText:r().string,cancelBtnText:r().string,confirmBtnText:r().string,extraBtnText:r().string,title:r().string,contentText:r().string,children:r().node,error:r().string,isDisabled:r().bool,colorTheme:r().string};var b=x},57951:function(e,t,n){var i=n(85893),o=n(60990),a=n(51015),r=n(33453),l=n(96727),s=n(40110),c=n(92365),d=n(25675),u=n.n(d),p=n(71604),h=n(42823),g=n(11859);t.Z=function(e){let{open:t,pdfPreview:n,error:d="",loading:m=!1,toggleViewerOpen:x}=e;return(0,i.jsxs)(r.Z,{open:t,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"data-saved-success","aria-describedby":"alert-dialog-description",children:[(0,i.jsx)(c.Z,{id:"data-saved-success",children:n.filename?"Bulletin Preview - ".concat(n.filename):"Bulletin Preview"}),(0,i.jsx)(s.Z,{sx:{padding:0,overflow:"hidden"},children:(0,i.jsx)(o.Z,{id:"alert-dialog-description",children:m?(0,i.jsx)("div",{style:{width:"100%",height:"90vh",textAlign:"center"},children:(0,i.jsx)(g.Z,{text:"Loading Preview...",children:(0,i.jsx)(u(),{unoptimized:!0,src:(0,p.assetPrefixer)("images/icons/data-processing-128.png"),height:100,width:100,loader:p.imageLoader,alt:"Loading Preview"})})}):""!==d?(0,i.jsx)("div",{style:{width:"100%",height:"100vh"},children:(0,i.jsx)(h.Z,{message:d})}):(0,i.jsx)("embed",{src:n.url,style:{width:"100%",height:"70vh"}})})}),(0,i.jsx)(l.Z,{children:(0,i.jsx)(a.Z,{variant:"contained",onClick:x,autoFocus:!0,children:"OK"})})]})}},71663:function(e,t){t.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},headerText:{marginBottom:"32px",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"top"},conditionLegend:{borderRadius:e=>e.spacing(1),width:"100%",padding:e=>e.spacing(1),border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:e=>e.spacing(1)},recSeasonal:{marginTop:e=>e.spacing(1),marginBottom:e=>e.spacing(5),"& p, ul, ol":{fontSize:"14px"}},recSeasonalStage:{marginTop:e=>e.spacing(5),marginBottom:e=>e.spacing(2),textDecoration:"underline"},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"48px"}},pdfcontent:{ul:{paddingLeft:3}}}},24006:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(85893),o=n(67294),a=n(45697),r=n.n(a),l=n(25675),s=n.n(l),c=n(60990),d=n(96788),u=n(71604),p={selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)}};let h=[{key:"sel_crop",label:"Crop"},{key:"sel_province",label:"Province"}],g=[{key:"sel_month",label:"Months"},{key:"climate_risk",label:"Climate Risk"},{key:"sel_stage",label:"Crop Stages"},{key:"sel_activity",label:"Activities"}],m=[{key:"sel_typhoon",label:"Typhoon Name"},{key:"sel_signal",label:"Wind Signal"}],x=()=>(0,i.jsx)(d.Z,{variant:"caption",color:"orange",children:(0,i.jsx)("strong",{children:"No data available."})});function b(e){let{cropstages:t,climateRisk:n,selecteditems:a,farmoperations:r,loading:l,reportType:b="seasonal"}=e,v=(0,o.useMemo)(()=>"special"===b?[...m,...h]:[...h,...g],[b]),f=(0,o.useMemo)(()=>"special"===b?(null==a?void 0:a.sel_signal)===null:(null==a?void 0:a.sel_province)===null,[b,a]);return(0,i.jsxs)(c.Z,{sx:p.selectionSummary,children:[(0,i.jsx)(d.Z,{variant:"h6",children:"Selection Summary"}),f?(0,i.jsxs)(c.Z,{sx:{...p.welcome,..."special"===b&&{minHeight:"184px"}},children:[(0,i.jsx)(s(),{unoptimized:!0,src:(0,u.assetPrefixer)("images/icons/finance.svg"),height:85,width:85,loader:u.imageLoader,alt:"Empty data"}),(0,i.jsxs)(c.Z,{sx:{marginTop:"16px"},children:[(0,i.jsx)(d.Z,{variant:"subtitle2",children:"Crop Recommendations PDF Bulletins Creator"}),(0,i.jsx)(d.Z,{variant:"subtitle2",children:"Please select a province to start."})]})]}):(0,i.jsx)(c.Z,{sx:{...p.summary,..."special"===b&&{minHeight:"184px"}},children:v.map((e,o)=>{let s="-";switch(e.key){case"sel_activity":s=null!==a.sel_crop?r||(0,i.jsx)(x,{}):"";break;case"sel_month":s=null!==a[e.key]?a[e.key].label:"-";break;case"climate_risk":s=n;break;case"sel_stage":s=null!==a.sel_crop?t||(0,i.jsx)(x,{}):"";break;case"sel_signal":var c;s=null!==a[e.key]?null===(c=a[e.key])||void 0===c?void 0:c.label:"";break;default:s=null!==a[e.key]?a[e.key]:""}let u=e.label;return"sel_month"===e.key&&"tenday"===b&&(u="Date"),(0,i.jsxs)("div",{children:[(0,i.jsxs)(d.Z,{variant:"subtitle2",style:{display:"inline-block"},children:[u,": \xa0"]}),(0,i.jsx)(d.Z,{variant:"body2",style:{display:"inline-block"},children:["sel_activity"].includes(e.key)&&l?(0,i.jsx)("span",{children:"loading..."}):s})]},"selected-".concat(o))})}),""!==a.error&&(0,i.jsx)(d.Z,{variant:"caption",sx:{color:"red"},children:a.error})]})}b.propTypes={selecteditems:r().object,farmoperations:r().string,loading:r().bool,reportType:r().string};var v=b},55292:function(e,t,n){var i=n(64836);t.Z=void 0;var o=i(n(33651)),a=n(85893);t.Z=(0,o.default)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},2782:function(e,t,n){var i=n(64836);t.Z=void 0;var o=i(n(33651)),a=n(85893);t.Z=(0,o.default)([(0,a.jsx)("path",{d:"M21 19.1H3V5h18zM21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},"0"),(0,a.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41z"},"1")],"CancelPresentation")},49986:function(e,t,n){n.d(t,{Z:function(){return _}});var i=n(63366),o=n(87462),a=n(67294),r=n(90512),l=n(94780),s=n(2101),c=n(66643),d=n(77527),u=n(44001),p=n(1588),h=n(34867);function g(e){return(0,h.ZP)("MuiButtonGroup",e)}let m=(0,p.Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]);var x=n(1058),b=n(41825),v=n(85893);let f=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],y=e=>{let{classes:t,color:n,disabled:i,disableElevation:o,fullWidth:a,orientation:r,variant:s}=e,d={root:["root",s,"vertical"===r&&"vertical",a&&"fullWidth",o&&"disableElevation"],grouped:["grouped","grouped".concat((0,c.Z)(r)),"grouped".concat((0,c.Z)(s)),"grouped".concat((0,c.Z)(s)).concat((0,c.Z)(r)),"grouped".concat((0,c.Z)(s)).concat((0,c.Z)(n)),i&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,l.Z)(d,g,t)},C=(0,d.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[{["& .".concat(m.grouped)]:t.grouped},{["& .".concat(m.grouped)]:t["grouped".concat((0,c.Z)(n.orientation))]},{["& .".concat(m.grouped)]:t["grouped".concat((0,c.Z)(n.variant))]},{["& .".concat(m.grouped)]:t["grouped".concat((0,c.Z)(n.variant)).concat((0,c.Z)(n.orientation))]},{["& .".concat(m.grouped)]:t["grouped".concat((0,c.Z)(n.variant)).concat((0,c.Z)(n.color))]},{["& .".concat(m.firstButton)]:t.firstButton},{["& .".concat(m.lastButton)]:t.lastButton},{["& .".concat(m.middleButton)]:t.middleButton},t.root,t[n.variant],!0===n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,"vertical"===n.orientation&&t.vertical]}})(e=>{let{theme:t,ownerState:n}=e;return(0,o.Z)({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[2]},n.disableElevation&&{boxShadow:"none"},n.fullWidth&&{width:"100%"},"vertical"===n.orientation&&{flexDirection:"column"},{["& .".concat(m.grouped)]:(0,o.Z)({minWidth:40,"&:hover":(0,o.Z)({},"contained"===n.variant&&{boxShadow:"none"})},"contained"===n.variant&&{boxShadow:"none"}),["& .".concat(m.firstButton,",& .").concat(m.middleButton)]:(0,o.Z)({},"horizontal"===n.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===n.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===n.variant&&"horizontal"===n.orientation&&{borderRight:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(m.disabled)]:{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"text"===n.variant&&"vertical"===n.orientation&&{borderBottom:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(m.disabled)]:{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"text"===n.variant&&"inherit"!==n.color&&{borderColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):(0,s.Fq)(t.palette[n.color].main,.5)},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"transparent"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"transparent"},"contained"===n.variant&&"horizontal"===n.orientation&&{borderRight:"1px solid ".concat((t.vars||t).palette.grey[400]),["&.".concat(m.disabled)]:{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"contained"===n.variant&&"vertical"===n.orientation&&{borderBottom:"1px solid ".concat((t.vars||t).palette.grey[400]),["&.".concat(m.disabled)]:{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"contained"===n.variant&&"inherit"!==n.color&&{borderColor:(t.vars||t).palette[n.color].dark},{"&:hover":(0,o.Z)({},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"currentColor"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"currentColor"})}),["& .".concat(m.lastButton,",& .").concat(m.middleButton)]:(0,o.Z)({},"horizontal"===n.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===n.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===n.variant&&"horizontal"===n.orientation&&{marginLeft:-1},"outlined"===n.variant&&"vertical"===n.orientation&&{marginTop:-1})})});var _=a.forwardRef(function(e,t){let n=(0,u.i)({props:e,name:"MuiButtonGroup"}),{children:l,className:s,color:c="primary",component:d="div",disabled:p=!1,disableElevation:h=!1,disableFocusRipple:g=!1,disableRipple:m=!1,fullWidth:_=!1,orientation:R="horizontal",size:w="medium",variant:Z="outlined"}=n,S=(0,i.Z)(n,f),j=(0,o.Z)({},n,{color:c,component:d,disabled:p,disableElevation:h,disableFocusRipple:g,disableRipple:m,fullWidth:_,orientation:R,size:w,variant:Z}),T=y(j),B=a.useMemo(()=>({className:T.grouped,color:c,disabled:p,disableElevation:h,disableFocusRipple:g,disableRipple:m,fullWidth:_,size:w,variant:Z}),[c,p,h,g,m,_,w,Z,T.grouped]),k=a.Children.toArray(l).filter(e=>a.isValidElement(e)),E=k.length,F=e=>{let t=0===e,n=e===E-1;return t&&n?"":t?T.firstButton:n?T.lastButton:T.middleButton};return(0,v.jsx)(C,(0,o.Z)({as:d,role:"group",className:(0,r.Z)(T.root,s),ref:t,ownerState:j},S,{children:(0,v.jsx)(x.Z.Provider,{value:B,children:k.map((e,t)=>(0,v.jsx)(b.Z.Provider,{value:F(t),children:e},t))})}))})},9704:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(67294),o=n(61061);function a(){let[e,t]=(0,i.useState)([]),[n,a]=(0,i.useState)(!1),[r,l]=(0,i.useState)("");return(0,i.useEffect)(()=>{(async()=>{var e,n,i;try{a(!0);let n=await (0,o.TQ)();t(null!==(e=null==n?void 0:n.list)&&void 0!==e?e:[]),a(!1),l("")}catch(e){l(null!==(i=null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)&&void 0!==i?i:e.message),a(!1),t([])}})()},[]),{cropList:e,loading:n,error:r}}},22088:function(e,t,n){n.d(t,{fI:function(){return h},sT:function(){return p},$K:function(){return s},YH:function(){return d},O_:function(){return m},iR:function(){return u},Ee:function(){return c},vU:function(){return g}});var i=n(96171),o=n(78986);let a={CROP_REC_LIST_RECS_LITE:"n_list_crop_recommendations",CROP_REC_LIST_RECS_FORMATTED:"n_list_crop_recommendations_",CROP_REC_LIST:"n_crop_recommendations_",CROP_REC_SMS_LIST:"n_crop_recommendations_"};class r extends i.Z{constructor(...e){super(...e),this.getFormattedRecommendationsFromStages=async e=>{let t,{cropstages:n,forecast:i,type:r}=e;if(void 0===n||void 0===i)return;let l="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(r),s=this.collection(this.db,l);return t=r===o.q.SEASONAL?this.query(s,this.where("crop_stage","in",n),this.where("forecast","==",i)):this.query(s,this.where("crop_stage","in",n)),await this.getCollectionData(l,"",t)},this.getFormattedRecommendations=async e=>{let t,{cropstage:n,forecast:i,type:r}=e;if(void 0===n||void 0===i)return;let l="".concat(a.CROP_REC_LIST_RECS_FORMATTED).concat(r),s=this.collection(this.db,l);return t=r===o.q.SEASONAL?this.query(s,this.where("crop_stage","==",n),this.where("forecast","==",i)):this.query(s,this.where("crop_stage","==",n)),await this.getCollectionData(l,"",t)},this.getCropRecommendationsLite=async e=>{let{type:t}=e;return await this.getDocumentData(a.CROP_REC_LIST_RECS_LITE,t)},this.getCropRecommendations=async e=>{let{crop:t,type:n}=e;if(!t||!n)return;let i="".concat(a.CROP_REC_LIST).concat(n),o=this.collection(this.db,i),r=this.query(o,this.where("crop","==",t));return await this.getCollectionDataWithID(i,"",r)},this.getRecommendations=async e=>{let t,{climateRisk:n,_cropStage:i,crop:o,type:r,multipleStages:l}=e;if(!n||!o)return;if(l){if(0===i.length)return}else if(!i)return;let s="".concat(a.CROP_REC_LIST).concat(r),c=this.collection(this.db,s);return t=l?this.query(c,this.where("climate_risk","==",n),this.where("crop_stage","in",i),this.where("crop","==",o)):this.query(c,this.where("climate_risk","==",n),this.where("crop_stage","==",i),this.where("crop","==",o)),await this.getCollectionData(s,"",t)},this.getSeasonalGeneralRecommendations=async e=>{let{climateRisk:t,crop:n}=e;if(!t||!n)return;let i="n_crop_recommendations_seasonal_general",o=this.collection(this.db,i),a=this.query(o,this.where("climate_risk","==",t),this.where("crop","==",n));return await this.getCollectionData(i,"",a)},this.getRecommendationsFlexible=async e=>{let{climateRisk:t,_cropStage:n,crop:i,type:o,multipleStages:r=!1}=e,l="".concat(a.CROP_REC_LIST).concat(o),s=this.collection(this.db,l);if(!i)return;let c=[this.where("crop","==",i)];t&&c.push(this.where("climate_risk","==",t)),n&&(r?c.push(this.where("crop_stage","in",n)):c.push(this.where("crop_stage","==",n)));let d=this.query(s,...c);return await this.getCollectionData(l,"",d)},this.getRecommendationsQuery=async e=>{let{type:t,queryFields:n=[]}=e;if(!t)throw Error("Missing parameter/s");let i="".concat(a.CROP_REC_LIST).concat(t),o=this.collection(this.db,i),r=n.map(e=>this.where(e.field,e.op,e.value)),l=this.query(o,...r);return await this.getCollectionData(i,"",l)},this.getRecommendationsSMS=async e=>{let{crop:t,climateRisk:n,type:i}=e;if(!t||!n||!i)return;let o="".concat(a.CROP_REC_SMS_LIST).concat(i),r=this.collection(this.db,o),l=this.query(r,this.where("crop","==",t),this.where("climate_risk","==",n));return await this.getCollectionData(o,"",l)},this.updateRecommendation=async e=>{let{type:t,newRecommendation:n}=e,i="".concat(a.CROP_REC_SMS_LIST).concat(t),o=this.collection(this.db,i),r=this.doc(o,n.docid);delete n.docid,await this.updateDoc(r,n)},this.createRecommendation=async e=>{let{type:t,recommendation:n}=e,i="".concat(a.CROP_REC_SMS_LIST).concat(t),o=this.collection(this.db,i);return await this.addDoc(o,n)}}}let l=new r;l.getFormattedRecommendations.bind(l),l.getFormattedRecommendationsFromStages.bind(l),l.getCropRecommendationsLite.bind(l);let s=l.getRecommendations.bind(l),c=l.getSeasonalGeneralRecommendations.bind(l),d=l.getRecommendationsFlexible.bind(l),u=l.getRecommendationsSMS.bind(l),p=l.getCropRecommendations.bind(l),h=l.createRecommendation.bind(l),g=l.updateRecommendation.bind(l),m=l.getRecommendationsQuery.bind(l)},77457:function(e,t,n){n.d(t,{aS:function(){return a},fu:function(){return r}});var i=n(98813);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(e).toFixed(t)},a=e=>e===i.nQ?i.DD:o(e),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Promise(t=>{if(void 0===e||"object"!=typeof e)t("Missing error response object");else if(e.response){if(e.response.data instanceof Blob){let n=new Blob([e.response.data],{type:"application/octet-stream"}),i=new FileReader;i.onload=()=>{t(i.result)},i.readAsText(n)}else t("Error reading data")}else e.request?t(e.request):t(e.message)})}}}]);