"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9146],{2052:function(e,t,i){var n=i(85893),o=i(93454);t.Z=function(e){return(0,n.jsx)(o.Z,{...e,elevation:15})}},42823:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(85893),o=i(25675),s=i.n(o),a=i(60990),r=i(96788),l=i(71604),c={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},d=function(e){let{message:t="Failed to load data",style:i={}}=e;return(0,n.jsxs)(a.Z,{sx:c,style:i,children:[(0,n.jsx)(s(),{unoptimized:!0,src:(0,l.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:l.imageLoader,alt:"Empty data"}),(0,n.jsx)(r.Z,{variant:"subtitle1",children:t})]})}},11859:function(e,t,i){var n=i(85893),o=i(60990),s=i(97182);t.Z=function(e){let{text:t="",size:i=24,children:a}=e;return(0,n.jsxs)(o.Z,{sx:{width:"100%",textAlign:"center",height:"20vh"},children:[(0,n.jsxs)(o.Z,{sx:{width:"100%",textAlign:"center",marginTop:e=>e.spacing(12),marginBottom:"32px",display:"flex",justifyContent:"center"},children:[(0,n.jsx)("span",{children:""!==t?t:"Loading..."})," \xa0",(0,n.jsx)(s.Z,{size:i})]}),a]})}},16729:function(e,t,i){i.d(t,{Z:function(){return b}});var n=i(85893),o=i(67294),s=i(45697),a=i.n(s),r=i(51015),l=i(2782),c=i(97182),d=i(33453),h=i(96727),p=i(92365),u=i(40110),g=i(52857),m={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"48px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:e=>e.palette.grey[500]}};function x(e){let[t,i]=o.useState({open:null}),{loading:s=!1,isOpen:a=!1,showButtons:x=!0,maxWidth:b="sm",IconSVG:f=null,modalButtonStyles:y={},modalExtraHandlerCB:_=null,modalCancelHandlerCB:C=null,modalConfirmHandlerCB:v=null,modalOpenHandlerCB:w=null,isDisabled:R=!1}=e,{openButtonText:S="Click",title:j="Window Title",extraBtnText:k="",cancelBtnText:T="Cancel",confirmBtnText:Z="Ok",contentText:E="",error:F="",colorTheme:D="primary"}=e;(0,o.useEffect)(()=>{i(e=>({...e,open:a}))},[a]);let L=()=>{i({...t,open:!1}),C&&C()};return(0,n.jsxs)("div",{children:[S&&(0,n.jsxs)(r.Z,{disabled:R,disableElevation:!0,variant:"contained",color:D,onClick:()=>{i({...t,open:!0}),w&&w()},sx:{...m.button,...y},children:[f&&(0,n.jsx)(f,{sx:m.icon}),S]}),(0,n.jsxs)(d.Z,{maxWidth:b,fullWidth:!0,open:t.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,n.jsxs)(p.Z,{children:[(0,n.jsx)("span",{children:j}),(0,n.jsx)(g.Z,{"aria-label":"close",sx:m.closeButton,onClick:L,disabled:s,children:(0,n.jsx)(l.Z,{})})]}),(0,n.jsxs)(u.Z,{sx:m.dialogContent,children:[""!==E&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:E}),(0,n.jsx)("div",{className:"error",children:F})]}),e.children]}),x&&(0,n.jsxs)(h.Z,{sx:m.dialogActions,children:[""!==k&&(0,n.jsx)(r.Z,{onClick:_||L,disabled:s,children:k}),(0,n.jsx)(r.Z,{onClick:C||L,disabled:s,children:T}),(0,n.jsxs)(r.Z,{variant:"contained",disabled:s,onClick:v||L,children:[(0,n.jsx)("span",{style:{display:s?"none":"block"},children:Z}),(0,n.jsx)(c.Z,{size:24,color:"secondary",sx:{display:s?"block":"none"}})]})]})]})]})}x.propTypes={loading:a().bool,isOpen:a().bool,showButtons:a().bool,maxWidth:a().string,IconSVG:a().elementType,modalButtonStyles:a().object,modalCancelHandlerCB:a().func,modalConfirmHandlerCB:a().func,modalOpenHandlerCB:a().func,modalExtraHandlerCB:a().func,openButtonText:a().string,cancelBtnText:a().string,confirmBtnText:a().string,extraBtnText:a().string,title:a().string,contentText:a().string,children:a().node,error:a().string,isDisabled:a().bool,colorTheme:a().string};var b=x},57951:function(e,t,i){var n=i(85893),o=i(60990),s=i(51015),a=i(33453),r=i(96727),l=i(40110),c=i(92365),d=i(25675),h=i.n(d),p=i(71604),u=i(42823),g=i(11859);t.Z=function(e){let{open:t,pdfPreview:i,error:d="",loading:m=!1,toggleViewerOpen:x}=e;return(0,n.jsxs)(a.Z,{open:t,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"data-saved-success","aria-describedby":"alert-dialog-description",children:[(0,n.jsx)(c.Z,{id:"data-saved-success",children:i.filename?"Bulletin Preview - ".concat(i.filename):"Bulletin Preview"}),(0,n.jsx)(l.Z,{sx:{padding:0,overflow:"hidden"},children:(0,n.jsx)(o.Z,{id:"alert-dialog-description",children:m?(0,n.jsx)("div",{style:{width:"100%",height:"90vh",textAlign:"center"},children:(0,n.jsx)(g.Z,{text:"Loading Preview...",children:(0,n.jsx)(h(),{unoptimized:!0,src:(0,p.assetPrefixer)("images/icons/data-processing-128.png"),height:100,width:100,loader:p.imageLoader,alt:"Loading Preview"})})}):""!==d?(0,n.jsx)("div",{style:{width:"100%",height:"100vh"},children:(0,n.jsx)(u.Z,{message:d})}):(0,n.jsx)("embed",{src:i.url,style:{width:"100%",height:"70vh"}})})}),(0,n.jsx)(r.Z,{children:(0,n.jsx)(s.Z,{variant:"contained",onClick:x,autoFocus:!0,children:"OK"})})]})}},71663:function(e,t){t.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},headerText:{marginBottom:"32px",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"top"},conditionLegend:{borderRadius:e=>e.spacing(1),width:"100%",padding:e=>e.spacing(1),border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:e=>e.spacing(1)},recSeasonal:{marginTop:e=>e.spacing(1),marginBottom:e=>e.spacing(5),"& p, ul, ol":{fontSize:"14px"}},recSeasonalStage:{marginTop:e=>e.spacing(5),marginBottom:e=>e.spacing(2),textDecoration:"underline"},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"48px"}},pdfcontent:{ul:{paddingLeft:3}}}},24006:function(e,t,i){i.d(t,{Z:function(){return f}});var n=i(85893),o=i(67294),s=i(45697),a=i.n(s),r=i(25675),l=i.n(r),c=i(60990),d=i(96788),h=i(71604),p={selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},welcome:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:e=>e.spacing(1),textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:e=>e.spacing(1),marginTop:e=>e.spacing(1),padding:e=>e.spacing(3)}};let u=[{key:"sel_crop",label:"Crop"},{key:"sel_province",label:"Province"}],g=[{key:"sel_month",label:"Months"},{key:"climate_risk",label:"Climate Risk"},{key:"sel_stage",label:"Crop Stages"},{key:"sel_activity",label:"Activities"}],m=[{key:"sel_typhoon",label:"Typhoon Name"},{key:"sel_signal",label:"Wind Signal"}],x=()=>(0,n.jsx)(d.Z,{variant:"caption",color:"orange",children:(0,n.jsx)("strong",{children:"No data available."})});function b(e){let{cropstages:t,climateRisk:i,selecteditems:s,farmoperations:a,loading:r,reportType:b="seasonal"}=e,f=(0,o.useMemo)(()=>"special"===b?[...m,...u]:[...u,...g],[b]),y=(0,o.useMemo)(()=>"special"===b?(null==s?void 0:s.sel_signal)===null:(null==s?void 0:s.sel_province)===null,[b,s]);return(0,n.jsxs)(c.Z,{sx:p.selectionSummary,children:[(0,n.jsx)(d.Z,{variant:"h6",children:"Selection Summary"}),y?(0,n.jsxs)(c.Z,{sx:{...p.welcome,..."special"===b&&{minHeight:"184px"}},children:[(0,n.jsx)(l(),{unoptimized:!0,src:(0,h.assetPrefixer)("images/icons/finance.svg"),height:85,width:85,loader:h.imageLoader,alt:"Empty data"}),(0,n.jsxs)(c.Z,{sx:{marginTop:"16px"},children:[(0,n.jsx)(d.Z,{variant:"subtitle2",children:"Crop Recommendations PDF Bulletins Creator"}),(0,n.jsx)(d.Z,{variant:"subtitle2",children:"Please select a province to start."})]})]}):(0,n.jsx)(c.Z,{sx:{...p.summary,..."special"===b&&{minHeight:"184px"}},children:f.map((e,o)=>{let l="-";switch(e.key){case"sel_activity":l=null!==s.sel_crop?a||(0,n.jsx)(x,{}):"";break;case"sel_month":l=null!==s[e.key]?s[e.key].label:"-";break;case"climate_risk":l=i;break;case"sel_stage":l=null!==s.sel_crop?t||(0,n.jsx)(x,{}):"";break;case"sel_signal":var c;l=null!==s[e.key]?null===(c=s[e.key])||void 0===c?void 0:c.label:"";break;default:l=null!==s[e.key]?s[e.key]:""}let h=e.label;return"sel_month"===e.key&&"tenday"===b&&(h="Date"),(0,n.jsxs)("div",{children:[(0,n.jsxs)(d.Z,{variant:"subtitle2",style:{display:"inline-block"},children:[h,": \xa0"]}),(0,n.jsx)(d.Z,{variant:"body2",style:{display:"inline-block"},children:["sel_activity"].includes(e.key)&&r?(0,n.jsx)("span",{children:"loading..."}):l})]},"selected-".concat(o))})}),""!==s.error&&(0,n.jsx)(d.Z,{variant:"caption",sx:{color:"red"},children:s.error})]})}b.propTypes={selecteditems:a().object,farmoperations:a().string,loading:a().bool,reportType:a().string};var f=b},9704:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(67294),o=i(61061);function s(){let[e,t]=(0,n.useState)([]),[i,s]=(0,n.useState)(!1),[a,r]=(0,n.useState)("");return(0,n.useEffect)(()=>{(async()=>{var e,i,n;try{s(!0);let i=await (0,o.TQ)();t(null!==(e=null==i?void 0:i.list)&&void 0!==e?e:[]),s(!1),r("")}catch(e){r(null!==(n=null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.data)&&void 0!==n?n:e.message),s(!1),t([])}})()},[]),{cropList:e,loading:i,error:a}}},22088:function(e,t,i){i.d(t,{fI:function(){return u},sT:function(){return p},$K:function(){return l},YH:function(){return d},O_:function(){return m},iR:function(){return h},Ee:function(){return c},vU:function(){return g}});var n=i(96171),o=i(78986);let s={CROP_REC_LIST_RECS_LITE:"n_list_crop_recommendations",CROP_REC_LIST_RECS_FORMATTED:"n_list_crop_recommendations_",CROP_REC_LIST:"n_crop_recommendations_",CROP_REC_SMS_LIST:"n_crop_recommendations_"};class a extends n.Z{constructor(...e){super(...e),this.getFormattedRecommendationsFromStages=async e=>{let t,{cropstages:i,forecast:n,type:a}=e;if(void 0===i||void 0===n)return;let r="".concat(s.CROP_REC_LIST_RECS_FORMATTED).concat(a),l=this.collection(this.db,r);return t=a===o.q.SEASONAL?this.query(l,this.where("crop_stage","in",i),this.where("forecast","==",n)):this.query(l,this.where("crop_stage","in",i)),await this.getCollectionData(r,"",t)},this.getFormattedRecommendations=async e=>{let t,{cropstage:i,forecast:n,type:a}=e;if(void 0===i||void 0===n)return;let r="".concat(s.CROP_REC_LIST_RECS_FORMATTED).concat(a),l=this.collection(this.db,r);return t=a===o.q.SEASONAL?this.query(l,this.where("crop_stage","==",i),this.where("forecast","==",n)):this.query(l,this.where("crop_stage","==",i)),await this.getCollectionData(r,"",t)},this.getCropRecommendationsLite=async e=>{let{type:t}=e;return await this.getDocumentData(s.CROP_REC_LIST_RECS_LITE,t)},this.getCropRecommendations=async e=>{let{crop:t,type:i}=e;if(!t||!i)return;let n="".concat(s.CROP_REC_LIST).concat(i),o=this.collection(this.db,n),a=this.query(o,this.where("crop","==",t));return await this.getCollectionDataWithID(n,"",a)},this.getRecommendations=async e=>{let t,{climateRisk:i,_cropStage:n,crop:o,type:a,multipleStages:r}=e;if(!i||!o)return;if(r){if(0===n.length)return}else if(!n)return;let l="".concat(s.CROP_REC_LIST).concat(a),c=this.collection(this.db,l);return t=r?this.query(c,this.where("climate_risk","==",i),this.where("crop_stage","in",n),this.where("crop","==",o)):this.query(c,this.where("climate_risk","==",i),this.where("crop_stage","==",n),this.where("crop","==",o)),await this.getCollectionData(l,"",t)},this.getSeasonalGeneralRecommendations=async e=>{let{climateRisk:t,crop:i}=e;if(!t||!i)return;let n="n_crop_recommendations_seasonal_general",o=this.collection(this.db,n),s=this.query(o,this.where("climate_risk","==",t),this.where("crop","==",i));return await this.getCollectionData(n,"",s)},this.getRecommendationsFlexible=async e=>{let{climateRisk:t,_cropStage:i,crop:n,type:o,multipleStages:a=!1}=e,r="".concat(s.CROP_REC_LIST).concat(o),l=this.collection(this.db,r);if(!n)return;let c=[this.where("crop","==",n)];t&&c.push(this.where("climate_risk","==",t)),i&&(a?c.push(this.where("crop_stage","in",i)):c.push(this.where("crop_stage","==",i)));let d=this.query(l,...c);return await this.getCollectionData(r,"",d)},this.getRecommendationsQuery=async e=>{let{type:t,queryFields:i=[]}=e;if(!t)throw Error("Missing parameter/s");let n="".concat(s.CROP_REC_LIST).concat(t),o=this.collection(this.db,n),a=i.map(e=>this.where(e.field,e.op,e.value)),r=this.query(o,...a);return await this.getCollectionData(n,"",r)},this.getRecommendationsSMS=async e=>{let{crop:t,climateRisk:i,type:n}=e;if(!t||!i||!n)return;let o="".concat(s.CROP_REC_SMS_LIST).concat(n),a=this.collection(this.db,o),r=this.query(a,this.where("crop","==",t),this.where("climate_risk","==",i));return await this.getCollectionData(o,"",r)},this.updateRecommendation=async e=>{let{type:t,newRecommendation:i}=e,n="".concat(s.CROP_REC_SMS_LIST).concat(t),o=this.collection(this.db,n),a=this.doc(o,i.docid);delete i.docid,await this.updateDoc(a,i)},this.createRecommendation=async e=>{let{type:t,recommendation:i}=e,n="".concat(s.CROP_REC_SMS_LIST).concat(t),o=this.collection(this.db,n);return await this.addDoc(o,i)}}}let r=new a;r.getFormattedRecommendations.bind(r),r.getFormattedRecommendationsFromStages.bind(r),r.getCropRecommendationsLite.bind(r);let l=r.getRecommendations.bind(r),c=r.getSeasonalGeneralRecommendations.bind(r),d=r.getRecommendationsFlexible.bind(r),h=r.getRecommendationsSMS.bind(r),p=r.getCropRecommendations.bind(r),u=r.createRecommendation.bind(r),g=r.updateRecommendation.bind(r),m=r.getRecommendationsQuery.bind(r)},77457:function(e,t,i){i.d(t,{aS:function(){return s},fu:function(){return a}});var n=i(98813);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(e).toFixed(t)},s=e=>e===n.nQ?n.DD:o(e),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Promise(t=>{if(void 0===e||"object"!=typeof e)t("Missing error response object");else if(e.response){if(e.response.data instanceof Blob){let i=new Blob([e.response.data],{type:"application/octet-stream"}),n=new FileReader;n.onload=()=>{t(n.result)},n.readAsText(i)}else t("Error reading data")}else e.request?t(e.request):t(e.message)})}}}]);