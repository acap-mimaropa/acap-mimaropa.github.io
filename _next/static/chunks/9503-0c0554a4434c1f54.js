"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9503],{31292:function(e,t){t.Z={tablecontainer:{marginTop:e=>e.spacing(1),border:e=>"1px solid ".concat(e.palette.bacap.border),borderRadius:e=>e.spacing(1),boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},table:{"& td":{border:e=>"1px solid ".concat(e.palette.bacap.border)}},headerMonths:{textAlign:"center",borderBottom:"none",borderLeft:e=>"1px solid ".concat(e.palette.bacap.border)},headerSub:{width:"5%",borderLeft:e=>"1px solid ".concat(e.palette.bacap.border)},tablecell:{border:"1px solid",textAlign:"center"},subheader:{marginBottom:e=>e.spacing(3),maxWidth:"800px",color:"gray","& a":{textDecoration:"none",color:e=>e.palette.green.dark},"& a:hover":{textDecoration:"underline"},"& a:visited":{color:e=>e.palette.green.dark}},labels:{fontSize:"12px",color:e=>e.palette.secondary.light},legend:{margin:e=>e.spacing(1),fontSize:"14px",display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"baseline"},"& ul":{listStyle:"none","& li":{marginRight:"10px"},span:{border:"1px solid #ccc",float:"left",width:"12px",height:"12px",margin:"4px"}},"& .wb_normal":{backgroundColor:"red",color:"#fff"},"& .b_normal":{backgroundColor:"yellow"},"& .near_normal":{backgroundColor:"#00c300"},"& .above_normal":{backgroundColor:"blue",color:"#fff"}},tableRowHeader:{"& th, td":{fontSize:"11px",textAlign:"center",lineHeight:e=>e.spacing(2),padding:"2px",fontWeight:500,borderTop:"none"},"& td":{border:"none"},"& td:nth-child(3n)":{borderRight:"1px solid rgb(226, 232, 240)"},"& td:last-child":{borderRight:"none"},"& td:first-child":{borderLeft:"1px solid rgb(226, 232, 240)"}},cellData:{"& td:first-child":{fontSize:"12px",textAlign:"left",borderLeft:"none",padding:"6px 16px 6px 16px"},"& td:last-child":{borderRight:"none"},"& td":{fontSize:"11px",textAlign:"center",padding:"10px",color:"rgba(0, 0, 0, 0.87)",border:"1px solid rgb(226, 232, 240)"}}}},83993:function(e,t,r){var a=r(85893),n=r(67294),o=r(9473),s=r(11163),i=r(60990),l=r(76592),c=r(19827),d=r(8863),u=r(25026),p=r(70360),h=r(46577),x=r(42823),f=r(57744),g=r(98813),b=r(25517),m=r(15440),S=r(32209),y=r(77457),v=r(31292);let w={updated_by:"-",date_created:"",monthLabels:[]};t.Z=function(e){let{withBorder:t=!1,weatherData:r=null,fsLoading:A=null}=e,[_,j]=(0,n.useState)(w),[E,Z]=(0,n.useState)(!1),R=(0,n.useRef)(!1),D=(0,s.useRouter)(),L=(0,o.I0)();(0,n.useEffect)(()=>(R.current=!0,()=>{R.current=!1}),[]);let{ids:O,status:C,entities:k}=(0,o.v9)(e=>e.seasonalweather),P=null!==r,T=P?A:C,N=P?r.map((e,t)=>t):O,I=P?r.reduce((e,t,r)=>({...e,[r]:t}),{}):k;(0,n.useEffect)(()=>{P?Z(!0):L((0,m.Y)()).unwrap().then(()=>{R.current&&Z(!0)})},[L,P]),(0,n.useEffect)(()=>{if(P?N.length>0&&E:T===b.G.FULLFILLED&&N.length>0&&E){let e=I[N[0]];R.current&&e&&j(t=>{var r,a;return{...t,updated_by:"/admin/weather"===D.pathname?e.updated_by:"an admin",update_method:e.update_method,date_created:e.date_created,monthLabels:(null===(r=e.months)||void 0===r?void 0:r.map(e=>"".concat(e.mo.charAt(0).toUpperCase()).concat(e.mo.slice(1)," ").concat(e.year)))||(null===(a=e.mos)||void 0===a?void 0:a.map((t,r)=>{var a;return"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)," ").concat((null===(a=e.years)||void 0===a?void 0:a[r])||"")}))||[]}})}},[I,T,N,D.pathname,E,P]);let F=e=>e===g.nQ?g.tN[g.DD]:"none";return(0,a.jsx)("div",{children:T===b.G.PENDING||!0===T?(0,a.jsx)(f.Z,{rows:7,cols:7}):N.length>0?(0,a.jsxs)(e=>{let{children:r}=e;return t?(0,a.jsx)(u.Z,{sx:v.Z.tablecontainer,children:r}):(0,a.jsx)(u.Z,{children:r})},{sx:{width:"650px"},children:[(0,a.jsxs)(l.Z,{"aria-label":"simple table",size:"small",sx:v.Z.table,children:[(0,a.jsxs)(p.Z,{children:[(0,a.jsxs)(h.Z,{sx:v.Z.tableRowHeader,children:[(0,a.jsx)(d.Z,{sx:{width:"15%"},rowSpan:2,children:"Province"}),_.monthLabels.map((e,t)=>(0,a.jsx)(d.Z,{sx:v.Z.headerMonths,colSpan:3,children:e},"".concat(e,"-").concat(t)))]}),(0,a.jsx)(h.Z,{sx:v.Z.tableRowHeader,children:[...Array(3*_.monthLabels.length)].fill("").map((e,t)=>{let r=t+1;return 1===r||r%3==1?(0,a.jsx)("td",{children:"Normal (mm)"},r):r%3==2?(0,a.jsx)("td",{children:"Forecast (mm)"},r):r%3==0?(0,a.jsx)("td",{children:"% of Normal"},r):void 0})})]}),(0,a.jsx)(c.Z,{children:Object.values(I).map(e=>(0,a.jsxs)(h.Z,{sx:v.Z.cellData,children:[(0,a.jsx)(d.Z,{children:e.name}),[...Array(3*_.monthLabels.length)].fill("").map((t,r)=>{let n=r+1;if(1===n)return(0,a.jsx)("td",{style:{backgroundColor:F(e.months[r].normal)},children:(0,y.aS)(e.months[0].normal)},r);if(n%3==1)return(0,a.jsx)("td",{style:{backgroundColor:F(e.months[r/3].normal)},children:(0,y.aS)(e.months[r/3].normal)},r);if(n%3==2){let t=(n+1)/3;return(0,a.jsx)("td",{style:{backgroundColor:F(e.months[t-1].mean)},children:(0,y.aS)(e.months[t-1].mean)},r)}if(n%3==0){let t=n/3-1;return(0,a.jsx)(d.Z,{sx:{backgroundColor:g.tN[e.months[t].con],textAlign:"center",color:["above_normal","wb_normal"].includes(e.months[t].con)?"#fff !important":"#000"},children:(0,y.aS)(e.months[t].val)},r)}})]},e.name))})]}),(0,a.jsxs)(i.Z,{sx:v.Z.legend,children:[_.update_method===g.o7.EXCEL?(0,a.jsxs)(S.Z,{children:["Updated via file upload of PAGASA's shared seasonal weather",(0,a.jsx)("br",{})," forecast excel file by ",_.updated_by," on \xa0",_.date_created,".",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"Full reference is available on PAGASA's ",(0,a.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"Seasonal (Rainfall) Forecast"})," web page."]}):(0,a.jsxs)(S.Z,{children:["Encoded with reference from PAGASA's ",(0,a.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"Seasonal (Rainfall) Forecast"})," web page ",(0,a.jsx)("br",{}),"by ",_.updated_by," on \xa0",_.date_created]}),(0,a.jsx)("ul",{children:Object.values(g.MW).map(e=>(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{style:{backgroundColor:g.tN[e.label]}}),e.sync," (",e.content,")"]},e.id))})]})]}):(0,a.jsx)(x.Z,{})})}},42823:function(e,t,r){r.d(t,{Z:function(){return d}});var a=r(85893),n=r(25675),o=r.n(n),s=r(60990),i=r(96788),l=r(71604),c={textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},d=function(e){let{message:t="Failed to load data",style:r={}}=e;return(0,a.jsxs)(s.Z,{sx:c,style:r,children:[(0,a.jsx)(o(),{unoptimized:!0,src:(0,l.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:l.imageLoader,alt:"Empty data"}),(0,a.jsx)(i.Z,{variant:"subtitle1",children:t})]})}},57744:function(e,t,r){r.d(t,{Z:function(){return i}});var a=r(85893),n=r(60990),o=r(84324),s={minHeight:"200px",width:"100%",border:"2px solid rgba(0, 0, 0, 0.11)",borderRadius:e=>e.spacing(2),color:e=>e.palette.text.secondary,borderStyle:"dashed",padding:e=>e.spacing(2),marginTop:e=>e.spacing(4)},i=function(e){let{rows:t=3,cols:r=3}=e;return(0,a.jsx)(n.Z,{sx:s,children:Array.from(Array(t).keys()).map((e,t)=>(0,a.jsx)("div",{style:{margin:"2px",display:"flex"},children:Array.from(Array(r).keys()).map((e,t)=>(0,a.jsx)(o.Z,{animation:"wave",variant:"rectangular",height:25,sx:{margin:"3px",width:"".concat(Math.round(100/r),"%")}},"col-".concat(t)))},"row-".concat(t)))})}},56112:function(e,t,r){var a=r(85893),n=r(93454);let o=(0,r(77527).ZP)(e=>(0,a.jsx)(n.Z,{...e}))(e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:t.spacing(1),boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}});t.Z=o},7520:function(e,t,r){var a=r(85893),n=r(93454);let o=(0,r(77527).ZP)(e=>(0,a.jsx)(n.Z,{...e}))(e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:t.spacing(1),backgroundColor:"#fff",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",border:"1px solid ".concat(t.palette.bacap.border)}});t.Z=o},38660:function(e,t,r){r.d(t,{Z:function(){return o}});var a=r(67294),n=r(98037);function o(e,t){let[r,o]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,n.yZ)();o(null!=e?e:[])}catch(r){var e,t;c(null!==(t=null==r?void 0:null===(e=r.response)||void 0===e?void 0:e.data)&&void 0!==t?t:r.message),i(!1)}})()},[e,t]),{services:r,loading:s,error:l}}},18938:function(e,t,r){r.d(t,{Kx:function(){return i},ky:function(){return s},m$:function(){return l},tl:function(){return c}});var a=r(67294),n=r(36100),o=r(20988);function s(e,t){let[r,s]=(0,a.useState)(null),[i,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(""),u=(0,a.useRef)(!0);return(0,a.useEffect)(()=>((async()=>{try{let r=(0,n.JU)(o.db,e,t),a=await (0,n.QT)(r);u.current&&(a.exists()&&s(a.data()),l(!1))}catch(e){d(e.message),l(!1)}})(),()=>u.current=!1),[e,t]),[r,i,c]}function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,[i,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[u,p]=(0,a.useState)(""),h=(0,a.useRef)(!0);return(0,a.useEffect)(()=>((async()=>{try{let a=[(0,n.Xo)(t,"asc")];s>0&&a.push((0,n.b9)(s));let i=(0,n.hJ)(o.db,e),c=r||(0,n.IO)(i,...a),u=await (0,n.PL)(c);h.current&&(l(u.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,r,s]),{documents:i,loading:c,error:u}}function l(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",[i,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[u,p]=(0,a.useState)(""),h=(0,a.useRef)(!0);return(0,a.useEffect)(()=>((async()=>{try{let a=(0,n.IO)((0,n.hJ)(o.db,e,t,r),(0,n.Xo)(s)),i=await (0,n.PL)(a);h.current&&(l(i.docs.map(e=>({...e.data()}))),d(!1))}catch(e){p(e.message),d(!1)}})(),()=>h.current=!1),[e,t,r,s]),{documents:i,loading:c,error:u}}function c(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),[p,h]=(0,a.useState)(""),x=(0,a.useRef)(!0);return(0,a.useEffect)(()=>((async()=>{try{let a=(0,n.hJ)(o.db,e,t,r);""!==s&&(a=(0,n.IO)(a,(0,n.Xo)(s))),i&&(a=(0,n.IO)(a,(0,n.b9)(i)));let l=await (0,n.PL)(a);x.current&&(c(l.docs.map(e=>({...e.data()}))),u(!1))}catch(e){h(e.message),u(!1)}})(),()=>x.current=!1),[e,t,r,s,i]),{documents:l,loading:d,error:p}}},98037:function(e,t,r){r.d(t,{Wn:function(){return l},vo:function(){return d},yZ:function(){return i},Ef:function(){return c}});var a=r(96171),n=r(36100);class o extends a.Z{constructor(...e){super(...e),this.getSupportServices=async()=>{let e=this.collection(this.db,"support_services"),t=this.query(e,(0,n.Xo)("date","asc"));return(await this.getDocs(t)).docs.map(e=>({...e.data(),docId:e.id}))},this.addSupportService=async e=>{let{supportService:t}=e,r=this.collection(this.db,"support_services");await this.addDoc(r,{data:t,date:new Date})},this.updateSupportService=async e=>{let t=this.collection(this.db,"support_services"),r=this.doc(t,e.docId);delete e.docId,await this.updateDoc(r,e)},this.deleteSupportService=async e=>{let t=this.doc(this.db,"support_services",e);await this.deleteDoc(t)}}}let s=new o,i=s.getSupportServices.bind(s),l=s.addSupportService.bind(s),c=s.updateSupportService.bind(s),d=s.deleteSupportService.bind(s)},88002:function(e,t,r){r.d(t,{K:function(){return i},d:function(){return l}});var a=r(96171),n=r(20988),o=r(98813),s=r(84325);let i={MEDIA_ASSETS:"n_page_media",ASSETS:"n_page_assets",PAGE_SEARCH:"n_page_search",GLOBAL_COLLECTIONS:"w_services",TYPHOON_ADVISORY:"typhoon_advisory",CYCLONE_ADVISORY:"cyclone_advisory"};class l extends a.Z{constructor(...e){var t;super(...e),t=this,this.getPageAssetsDoc=async function(e,r){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];try{if(!(n=await t.getDocumentData(i.ASSETS,e)))return[];if(!r)return n;if(a)return n.data.filter(e=>e.page===r);return n.data.filter(e=>e.page===r).map(e=>e.url)}catch(e){throw console.error(e.message),Error(e.message)}},this.getTyphoonAdvisory=async()=>{let e=this.doc(this.db,i.GLOBAL_COLLECTIONS,i.TYPHOON_ADVISORY),t=await this.getDoc(e);return t.exists()?t.data():null},this.getWeatherForecast=async(e,t)=>await this.getNestedCollectionData(i.WEATHER_FORECASTS,e,t,"name"),this.getPdfDownloadURL=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.Ry.SEASONAL,r="";switch(t){case s.Ry.SEASONAL:r=o.Do.PDF_STORAGE_SEASONAL;break;case s.Ry.TEN_DAY:r=o.Do.PDF_STORAGE_TENDAY;break;case s.Ry.SPECIAL_WEATHER:r=o.Do.PDF_STORAGE_SPECIAL}try{let t=(0,n.iH)(n.tO,"".concat(r,"/").concat(e));return await (0,n.Jt)(t)}catch(e){throw Error(e.message)}}}}},77457:function(e,t,r){r.d(t,{aS:function(){return o},fu:function(){return s}});var a=r(98813);let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(e).toFixed(t)},o=e=>e===a.nQ?a.DD:n(e),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Promise(t=>{if(void 0===e||"object"!=typeof e)t("Missing error response object");else if(e.response){if(e.response.data instanceof Blob){let r=new Blob([e.response.data],{type:"application/octet-stream"}),a=new FileReader;a.onload=()=>{t(a.result)},a.readAsText(r)}else t("Error reading data")}else e.request?t(e.request):t(e.message)})}}}]);